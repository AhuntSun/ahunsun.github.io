(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{490:function(s,a,t){"use strict";t.r(a);var n=t(27),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_07-变量提升：javascript代码是按顺序执行的吗"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_07-变量提升：javascript代码是按顺序执行的吗"}},[s._v("#")]),s._v(" 07.变量提升：JavaScript代码是按顺序执行的吗")]),s._v(" "),t("p",[s._v("讲解完宏观视角下的浏览器后，从这篇文章开始，我们就进入下一个新的模块了，这里我会对"),t("code",[s._v("JavaScript")]),s._v("执行原理做深入介绍。")]),s._v(" "),t("p",[s._v("今天在该模块的第一篇文章，我们主要讲解"),t("strong",[s._v("执行上下文")]),s._v("相关的内容。那为什么先讲执行上下文呢？它这么重要吗？可以这么说，只有理解了"),t("code",[s._v("JavaScrip")]),s._v("的执行上下文，你才能更好地理解"),t("code",[s._v("JavaScript")]),s._v("语言本身，比如"),t("strong",[s._v("变量提升")]),s._v("、"),t("strong",[s._v("作用域")]),s._v("和"),t("strong",[s._v("闭包")]),s._v("等。不仅如此，理解"),t("strong",[s._v("执行上下文")]),s._v("和"),t("strong",[s._v("调用栈")]),s._v("的概念还能助你成为一名更合格的前端开发者。")]),s._v(" "),t("p",[s._v("不过由于我们专栏不是专门讲"),t("code",[s._v("JavaScript")]),s._v("语言的，所以我并不会对"),t("code",[s._v("JavaScript")]),s._v("语法本身做过多介绍。本文主要是从"),t("code",[s._v("JavaScript")]),s._v("的顺序执行讲起，然后一步步带你了解"),t("code",[s._v("JavaScript")]),s._v("是怎么运行的。")]),s._v(" "),t("p",[s._v("接下来咱们先看段代码，你觉得下面这段代码输出的结果是什么？")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("myname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" myname "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'极客时间'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'函数showName被执行'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("使用过"),t("code",[s._v("JavaScript")]),s._v("开发的程序员应该都知道，"),t("code",[s._v("JavaScript")]),s._v("是按顺序执行的。若按照这个逻辑来理解的话，那么：")]),s._v(" "),t("ul",[t("li",[s._v("当执行到第"),t("code",[s._v("1")]),s._v("行的时候，由于函数"),t("code",[s._v("showName")]),s._v("还没有定义，所以执行应该会报错；")]),s._v(" "),t("li",[s._v("同样执行第"),t("code",[s._v("2")]),s._v("行的时候，由于变量"),t("code",[s._v("myname")]),s._v("函数也未定义，所以同样也会报错")])]),s._v(" "),t("p",[s._v("然而实际执行结果却并非如此， 如下图：")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/browser/part2/ls7/1.png",alt:""}})]),s._v(" "),t("p",[s._v("第"),t("code",[s._v("1")]),s._v("行输出“函数"),t("code",[s._v("showName")]),s._v("被执行”，第"),t("code",[s._v("2")]),s._v("行输出“"),t("code",[s._v("undefined")]),s._v("”，这和前面想象中的顺序执行有点不一样啊！")]),s._v(" "),t("p",[s._v("通过上面的执行结果，你应该已经知道了函数或者变量可以在定义之前使用，那如果使用没有定义的变量或者函数，"),t("code",[s._v("JavaScript")]),s._v("代码还能继续执行吗？为了验证这点，我们可以删除第"),t("code",[s._v("3")]),s._v("行变量"),t("code",[s._v("myname")]),s._v("的定义，如下所示：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("myname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'函数showName被执行'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("然后再次执行这段代码时，"),t("code",[s._v("JavaScript")]),s._v("引擎就会报错，结果如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/browser/part2/ls7/2.png",alt:""}})]),s._v(" "),t("p",[s._v("从上面两段代码的执行结果来看，我们可以得出如下三个结论。")]),s._v(" "),t("ul",[t("li",[s._v("执行过程中，若使用了未声明的变量，那么"),t("code",[s._v("JavaScript")]),s._v("执行会报错。")]),s._v(" "),t("li",[t("strong",[s._v("在一个变量定义之前使用它")]),s._v("，不会出错，但是该变量的值会为"),t("code",[s._v("undefined")]),s._v("，而不是定义时的值。")]),s._v(" "),t("li",[t("strong",[s._v("在一个函数定义之前使用它")]),s._v("，不会出错，且函数能正确执行")])]),s._v(" "),t("p",[s._v("第一个结论很好理解，因为变量没有定义，这样在执行"),t("code",[s._v("JavaScript")]),s._v("代码时，就找不到该变量，所以"),t("code",[s._v("JavaScript会")]),s._v("抛出错误。")]),s._v(" "),t("p",[s._v("但是对于第二个和第三个结论，就挺让人费解的：")]),s._v(" "),t("ul",[t("li",[s._v("变量和函数为什么能在其定义之前使用？这似乎表明"),t("code",[s._v("JavaScript")]),s._v("代码并不是一行一行执行的。")]),s._v(" "),t("li",[s._v("同样的方式，变量和函数的处理结果为什么不一样？比如上面的执行结果，提前使用的"),t("code",[s._v("showName")]),s._v("函数能打印出来完整结果，但是提前使用的"),t("code",[s._v("myname")]),s._v("变量值却是"),t("code",[s._v("undefined")]),s._v("，而不是定义时使用的“极客时间”这个值")])]),s._v(" "),t("h2",{attrs:{id:"变量提升（hoisting）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#变量提升（hoisting）"}},[s._v("#")]),s._v(" 变量提升（"),t("code",[s._v("Hoisting")]),s._v("）")]),s._v(" "),t("p",[s._v("要解释这两个问题，你就需要先了解下什么是变量提升。")]),s._v(" "),t("p",[s._v("不过在介绍变量提升之前，我们先通过下面这段代码，来看看什么是"),t("code",[s._v("JavaScript")]),s._v("中的声明和赋值。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("var myname = '极客时间'\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这段代码你可以把它看成是两行代码组成的：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("var myname    //声明部分\nmyname = '极客时间'  //赋值部分\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/browser/part2/ls7/3.png",alt:""}})]),s._v(" "),t("p",[s._v("上面是变量的声明和赋值，那接下来我们再来看看函数的声明和赋值，结合下面这段代码：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'foo'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("bar")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bar'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("第一个函数"),t("code",[s._v("foo")]),s._v("是一个完整的函数声明，也就是说没有涉及到赋值操作；第二个函数是先声明变量bar，再把"),t("code",[s._v("function(){console.log('bar')}")]),s._v("赋值给bar。为了直观理解，你可以参考下图：")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/browser/part2/ls7/4.png",alt:""}})]),s._v(" "),t("p",[s._v("好了，理解了声明和赋值操作，那接下来我们就可以聊聊什么是变量提升了。")]),s._v(" "),t("p",[t("strong",[s._v("所谓的变量提升，是指在"),t("code",[s._v("JavaScript")]),s._v("代码执行过程中，"),t("code",[s._v("JavaScript")]),s._v("引擎把变量的声明部分和函数的声明部分提升到代码开头的“行为”。变量被提升后，会给变量设置默认值，这个默认值就是我们熟悉的"),t("code",[s._v("undefined")])]),s._v("。")]),s._v(" "),t("p",[s._v("下面我们来模拟下实现：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\n* 变量提升部分\n*/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 把变量 myname提升到开头，")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 同时给myname赋值为undefined")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" myname "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("undefined")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 把函数showName提升到开头")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'showName被调用'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\n* 可执行代码部分\n*/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("myname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 去掉var声明部分，保留赋值语句")]),s._v("\nmyname "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'极客时间'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[s._v("为了模拟变量提升的效果，我们对代码做了以下调整，如下图：")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/browser/part2/ls7/5.png",alt:""}})]),s._v(" "),t("p",[s._v("从图中可以看出，对原来的代码主要做了两处调整：")]),s._v(" "),t("ul",[t("li",[s._v("第一处是把声明的部分都提升到了代码开头，如变量"),t("code",[s._v("myname")]),s._v("和函数"),t("code",[s._v("showName")]),s._v("，并给变量设置默认值"),t("code",[s._v("undefined")]),s._v("；")]),s._v(" "),t("li",[s._v("第二处是移除原本声明的变量和函数，如"),t("code",[s._v("var myname")]),s._v(" = '极客时间'的语句，移除了"),t("code",[s._v("var")]),s._v("声明，整个移除"),t("code",[s._v("showName")]),s._v("的函数声明。")]),s._v(" "),t("li",[s._v("通过这两步，就可以实现变量提升的效果。你也可以执行这段模拟变量提升的代码，其输出结果和第一段代码应该是完全一样的。")])]),s._v(" "),t("p",[s._v("通过这段模拟的变量提升代码，相信你已经明白了可以在定义之前使用变量或者函数的原因——函数和变量在执行之前都提升到了代码开头。")]),s._v(" "),t("h2",{attrs:{id:"javascript代码的执行流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#javascript代码的执行流程"}},[s._v("#")]),s._v(" JavaScript代码的执行流程")]),s._v(" "),t("p",[s._v("从概念的字面意义上来看，“变量提升”意味着变量和函数的声明会在物理层面移动到代码的最前面，正如我们所模拟的那样。但，这并不准确。实际上变量和函数声明在代码里的位置是不会改变的，而且是在编译阶段被"),t("code",[s._v("JavaScript")]),s._v("引擎放入内存中。对，你没听错，一段"),t("code",[s._v("JavaScript")]),s._v("代码在执行之前需要被"),t("code",[s._v("JavaScript")]),s._v("引擎编译，编译完成之后，才会进入执行阶段。大致流程你可以参考下图：")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/browser/part2/ls7/6.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"_1-编译阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-编译阶段"}},[s._v("#")]),s._v(" 1. 编译阶段")]),s._v(" "),t("p",[s._v("那么编译阶段和变量提升存在什么关系呢？")]),s._v(" "),t("p",[s._v("为了搞清楚这个问题，我们还是回过头来看上面那段模拟变量提升的代码，为了方便介绍，可以把这段代码分成两部分。")]),s._v(" "),t("p",[t("strong",[s._v("第一部分：变量提升部分的代码。")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" myname "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("undefined")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'函数showName被执行'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("strong",[s._v("第二部分：执行部分的代码。")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("myname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmyname "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'极客时间'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("下面我们就可以把JavaScript的执行流程细化，如下图所示：")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/browser/part2/ls7/7.png",alt:""}})]),s._v(" "),t("p",[s._v("从上图可以看出，输入一段代码，经过编译后，会生成两部分内容：执行上下文（"),t("code",[s._v("Execution context")]),s._v("）和可执行代码。")]),s._v(" "),t("p",[s._v("执行上下文是"),t("code",[s._v("JavaScript")]),s._v("执行一段代码时的运行环境，比如调用一个函数，就会进入这个函数的执行上下文，确定该函数在执行期间用到的诸如"),t("code",[s._v("this")]),s._v("、变量、对象以及函数等。")]),s._v(" "),t("p",[s._v("关于执行上下文的细节，我会在下一篇文章《08 | 调用栈：为什么"),t("code",[s._v("JavaScript")]),s._v("代码会出现栈溢出？》做详细介绍，现在你只需要知道，在执行上下文中存在一个变量环境的对象（"),t("code",[s._v("Viriable Environment")]),s._v("），该对象中保存了变量提升的内容，比如上面代码中的变量"),t("code",[s._v("myname")]),s._v("和函数"),t("code",[s._v("showName")]),s._v("，都保存在该对象中。")]),s._v(" "),t("p",[s._v("你可以简单地把变量环境对象看成是如下结构")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("VariableEnvironment:\n     myname -> undefined, \n     showName ->function : {console.log(myname)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("了解完变量环境对象的结构后，接下来，我们再结合下面这段代码来分析下是如何生成变量环境对象的。")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("myname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" myname "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'极客时间'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'函数showName被执行'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("我们可以一行一行来分析上述代码：")]),s._v(" "),t("ul",[t("li",[s._v("第"),t("code",[s._v("1")]),s._v("行和第"),t("code",[s._v("2")]),s._v("行，由于这两行代码不是声明操作，所以"),t("code",[s._v("JavaScript")]),s._v("引擎不会做任何处理；")]),s._v(" "),t("li",[s._v("第"),t("code",[s._v("3")]),s._v("行，由于这行是经过"),t("code",[s._v("var")]),s._v("声明的，因此"),t("code",[s._v("JavaScript")]),s._v("引擎将在环境对象中创建一个名为"),t("code",[s._v("myname")]),s._v("的属性，并使用"),t("code",[s._v("undefined")]),s._v("对其初始化；")]),s._v(" "),t("li",[s._v("第"),t("code",[s._v("4")]),s._v("行，"),t("code",[s._v("JavaScript")]),s._v("引擎发现了一个通过"),t("code",[s._v("function")]),s._v("定义的函数，所以它将函数定义存储到堆("),t("code",[s._v("HEAP")]),s._v("）中，并在环境对象中创建一个"),t("code",[s._v("showName")]),s._v("的属性，然后将该属性值指向堆中函数的位置（不了解堆也没关系，"),t("code",[s._v("JavaScript")]),s._v("的执行堆和执行栈我会在后续文章中介绍）。\n这样就生成了变量环境对象。接下来"),t("code",[s._v("JavaScript")]),s._v("引擎会把声明以外的代码编译为"),t("strong",[s._v("字节码")]),s._v("，至于字节码的细节，我也会在后面文章中做详细介绍，你可以类比如下的模拟代码")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("myname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmyname "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'极客时间'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("好了，现在有了"),t("strong",[s._v("执行上下文")]),s._v("和"),t("strong",[s._v("可执行代码")]),s._v("了，那么接下来就到了执行阶段了。")]),s._v(" "),t("h3",{attrs:{id:"_2-执行阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-执行阶段"}},[s._v("#")]),s._v(" 2. 执行阶段")]),s._v(" "),t("p",[t("code",[s._v("JavaScript")]),s._v("引擎开始执行“可执行代码”，按照顺序一行一行地执行。下面我们就来一行一行分析下这个执行过程")]),s._v(" "),t("ul",[t("li",[s._v("当执行到"),t("code",[s._v("showName")]),s._v("函数时，"),t("code",[s._v("JavaScript")]),s._v("引擎便开始在"),t("strong",[s._v("变量环境对象")]),s._v("中查找该函数，由于变量环境对象中存在该函数的引用，所以"),t("code",[s._v("JavaScript")]),s._v("引擎便开始执行该函数，并输出“函数"),t("code",[s._v("showName")]),s._v("被执行”结果。")]),s._v(" "),t("li",[s._v("接下来打印“"),t("code",[s._v("myname")]),s._v("”信息，"),t("code",[s._v("JavaScript")]),s._v("引擎继续在"),t("strong",[s._v("变量环境对象")]),s._v("中查找该对象，由于变量环境存在"),t("code",[s._v("myname")]),s._v("变量，并且其值为"),t("code",[s._v("undefined")]),s._v("，所以这时候就输出"),t("code",[s._v("undefined")]),s._v("。")]),s._v(" "),t("li",[s._v("接下来执行第"),t("code",[s._v("3")]),s._v("行，把“极客时间”赋给"),t("code",[s._v("myname")]),s._v("变量，赋值后变量环境中的"),t("code",[s._v("myname")]),s._v("属性值改变为“极客时间”，变量环境如下所示：")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('VariableEnvironment:\n     myname -> "极客时间", \n     showName ->function : {console.log(myname)\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("好了，以上就是一段代码的编译和执行流程。实际上，编译阶段和执行阶段都是非常复杂的，包括了词法分析、语法解析、代码优化、代码生成等，这些内容我会在《"),t("code",[s._v("14")]),s._v(" | 编译器和解释器："),t("code",[s._v("V8")]),s._v("是如何执行一段"),t("code",[s._v("JavaScript")]),s._v("代码的？》那节详细介绍，在本篇文章中你只需要知道"),t("code",[s._v("JavaScript")]),s._v("代码经过编译生成了什么内容就可以了")]),s._v(" "),t("h2",{attrs:{id:"代码中出现相同的变量或者函数怎么办？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码中出现相同的变量或者函数怎么办？"}},[s._v("#")]),s._v(" 代码中出现相同的变量或者函数怎么办？")]),s._v(" "),t("p",[s._v("现在你已经知道了，在执行一段"),t("code",[s._v("JavaScript")]),s._v("代码之前，会编译代码，并将代码中的函数和变量保存到执行上下文的"),t("strong",[s._v("变量环境")]),s._v("中，那么如果代码中出现了重名的函数或者变量，"),t("code",[s._v("JavaScript")]),s._v("引擎会如何处理？")]),s._v(" "),t("p",[s._v("我们先看下面这样一段代码")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'极客邦'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'极客时间'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("在上面代码中，我们先定义了一个"),t("code",[s._v("showName")]),s._v("的函数，该函数打印出来“极客邦”；然后调用"),t("code",[s._v("showName")]),s._v("，并定义了一个"),t("code",[s._v("showName")]),s._v("函数，这个"),t("code",[s._v("showName")]),s._v("函数打印出来的是“极客时间”；最后接着继续调用"),t("code",[s._v("showName")]),s._v("。那么你能分析出来这两次调用打印出来的值是什么吗？")]),s._v(" "),t("p",[t("strong",[s._v("我们来分析下其完整执行流程")]),s._v("：")]),s._v(" "),t("p",[s._v("即变量提升的最终原因为："),t("code",[s._v("JavaScript")]),s._v("没有块级作用域，所以无论变量在哪里定义，都会被当做全局变量，而被全局访问到，也就相当于将函数声明提到了当前执行上下文的最前面；")]),s._v(" "),t("p",[s._v("综上所述，"),t("strong",[s._v("一段代码如果定义了两个相同名字的函数，那么最终生效的是最后一个函数")]),s._v("。")]),s._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("p",[s._v("好了，今天就到这里，下面我来简单总结下今天的主要内容：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("JavaScript")]),s._v("代码执行过程中，需要先做"),t("strong",[s._v("变量提升")]),s._v("，而之所以需要实现变量提升，"),t("strong",[s._v("是因为"),t("code",[s._v("JavaScript")]),s._v("代码在执行之前需要先编译。")]),s._v("\n在编译阶段，变量和函数会被存放到"),t("strong",[s._v("变量环境")]),s._v("中，变量的默认值会被设置为"),t("code",[s._v("undefined")]),s._v("；在代码执行阶段，"),t("code",[s._v("JavaScript")]),s._v("引擎会从变量环境中去查找自定义的变量和函数。")]),s._v(" "),t("li",[s._v("如果在编译阶段，存在两个相同的函数，那么最终存放在变量环境中的是最后定义的那个，这是因为后定义的会覆盖掉之前定义的。")]),s._v(" "),t("li",[s._v("以上就是今天所讲的主要内容，当然，学习这些内容并不是让你掌握一些"),t("code",[s._v("JavaScript")]),s._v("小技巧，其主要目的是让你清楚"),t("code",[s._v("JavaScript")]),s._v("的执行机制："),t("strong",[s._v("先编译，再执行。")])])]),s._v(" "),t("blockquote",[t("p",[s._v("变量提升的原因为："),t("code",[s._v("V8")]),s._v("引擎在执行"),t("code",[s._v("JavaScript")]),s._v("代码的执行机制为：先编译，后执行。")]),s._v(" "),t("p",[s._v("即变量提升的"),t("strong",[s._v("本质原因")]),s._v("为："),t("code",[s._v("JavaScript")]),s._v('没有块级作用域，所以无论变量在哪里定义，都会被当做当前执行上下文（全局或函数）的"全局"变量，而被当前执行上下文访问到，也就相当于将函数声明提到了当前执行上下文的最前面；')])]),s._v(" "),t("p",[s._v("如果你了解了"),t("code",[s._v("JavaScript")]),s._v("执行流程，那么在编写代码时，你就能避开一些陷阱；在分析代码过程中，也能通过分析"),t("code",[s._v("JavaScript")]),s._v("的执行过程来定位问题")]),s._v(" "),t("h2",{attrs:{id:"思考时间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#思考时间"}},[s._v("#")]),s._v(" 思考时间")]),s._v(" "),t("p",[s._v("最后，看下面这段代码：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//不会变量声明和函数定义，放到执行上下文的可执行代码中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("showName")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//是变量定义，将其放入执行上下文的变量环境对象中；将赋值操作放入可执行代码中")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//函数定义，放入执行上下文中的变量环境中")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* 使用变量提升改写后的代码为 */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//变量环境对象中的内容")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("undefined")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//可执行代码中的内容")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("showName")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("p",[s._v("你能按照"),t("code",[s._v("JavaScript")]),s._v("的执行流程，来分析最终输出结果吗？")]),s._v(" "),t("p",[s._v("分析")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("输出1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("编译阶段:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("var showName\nfunction showName(){console.log(1)}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("执行阶段:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("showName()//输出1\nshowName=function(){console.log(2)}\n//如果后面再有showName执行的话，就输出2因为这时候函数引用已经变了\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[s._v("变量提升记住这个规律就行了：")]),s._v(" "),t("ul",[t("li",[s._v("在变量定义前使用，不会出错，不过值为"),t("code",[s._v("Undefined")]),s._v("；")]),s._v(" "),t("li",[s._v("在函数定义前使用，不会出错，会正常调用；")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);