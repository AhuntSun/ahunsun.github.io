(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{532:function(t,e,a){"use strict";a.r(e);var v=a(27),_=Object(v.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"第八讲：git标签、别名与git-gc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第八讲：git标签、别名与git-gc"}},[t._v("#")]),t._v(" 第八讲：Git标签、别名与Git gc")]),t._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("这一节主要介绍"),a("code",[t._v("Git")]),t._v("标签、别名与"),a("code",[t._v("Git")]),t._v("的垃圾回收机制。")]),t._v(" "),a("h2",{attrs:{id:"一、git标签-tag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、git标签-tag"}},[t._v("#")]),t._v(" 一、"),a("code",[t._v("Git")]),t._v("标签("),a("code",[t._v("tag")]),t._v(")")]),t._v(" "),a("h3",{attrs:{id:"_1-标签的实质"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-标签的实质"}},[t._v("#")]),t._v(" 1.标签的实质")]),t._v(" "),a("p",[t._v("标签与分支十分相似，都是指向某一次提交；并且，它们的值都为各自指向提交的"),a("code",[t._v("SHA1")]),t._v("值；但是，不同于会随着提交的变化而变化的分支，一旦给某次提交添加了标签，该标签就永远不会发生变化。")]),t._v(" "),a("p",[t._v("**注意：**标签标识的是某一次提交，这次提交可以是任何分支上的任何一次提交。")]),t._v(" "),a("h4",{attrs:{id:"两类标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#两类标签"}},[t._v("#")]),t._v(" 两类标签")]),t._v(" "),a("p",[a("code",[t._v("Git")]),t._v("标签有两种：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("轻量级标签")]),t._v("（"),a("code",[t._v("lightweight")]),t._v("）：不可添加注释；")]),t._v(" "),a("li",[a("strong",[t._v("带有附注的标签")]),t._v("（"),a("code",[t._v("annotated")]),t._v("）：可以添加注释；")])]),t._v(" "),a("blockquote",[a("p",[t._v("Annotated tags are meant for release while lightweight tags are meant for private or temporary object labels.")])]),t._v(" "),a("p",[t._v("以上是"),a("code",[t._v("git")]),t._v("官方文档对两种标签的说明，大意是：带注释的标签用于发布，而轻量级标签则用于私人或临时对象。")]),t._v(" "),a("p",[a("strong",[t._v("什么时候打标签呢？")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("**版本发布：**一般"),a("code",[t._v("master")]),t._v("分支都会作为项目的发布分支，当项目开发到了一个成熟的阶段，准备在"),a("code",[t._v("master")]),t._v("分支进行发布时。一般都会在"),a("code",[t._v("master")]),t._v('分支的当前提交上打上一个类似"'),a("code",[t._v("v1.2")]),t._v('"的标签；')]),t._v(" "),a("p",[t._v("比如"),a("code",[t._v("Vue")]),t._v("框架：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/1.png",alt:"image-20200418125541646"}})]),t._v(" "),a("p",[t._v("可以看到有许多标签，并且可以在"),a("code",[t._v("releases")]),t._v("选项中查看标签和发布版本：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/2.png",alt:"image-20200418125721571"}})])]),t._v(" "),a("li",[a("p",[t._v("**版本管理：**可以通过标签的形式记录项目某一阶段的状态，方便管理；")]),t._v(" "),a("p",[t._v("比如管理学习微信小程序时每个知识点的代码：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/3.png",alt:"image-20200418165957032"}})])])]),t._v(" "),a("h4",{attrs:{id:"查看标签文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看标签文件"}},[t._v("#")]),t._v(" "),a("strong",[t._v("查看标签文件")])]),t._v(" "),a("p",[t._v("如下图所示，分别给"),a("code",[t._v("master")]),t._v("分支的提交"),a("code",[t._v("mas2")]),t._v("添加一个轻量级标签"),a("code",[t._v("v1.0")]),t._v("和一个带有附注的标签"),a("code",[t._v("v2.0")]),t._v("：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/4.png",alt:"image-20200418122516160"}})]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("git dog")]),t._v("为"),a("code",[t._v("git log --all --decorate --oneline --graph")]),t._v("的别名，后面会讲解；")])]),t._v(" "),a("p",[t._v("随后，查看存储标签文件的"),a("code",[t._v(".git/refs/tags")]),t._v("目录：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/5.png",alt:"image-20200418123105227"}})]),t._v(" "),a("p",[t._v("可以看到：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("tags")]),t._v("目录下存储着添加的标签文件"),a("code",[t._v("v1.0")]),t._v("和"),a("code",[t._v("v2.0")]),t._v("；")]),t._v(" "),a("li",[t._v("分别打开标签文件"),a("code",[t._v("v1.0")]),t._v("和"),a("code",[t._v("v2.0")]),t._v("，它们的值都是一个"),a("code",[t._v("SHA1")]),t._v("值，并且与添加标签时所在提交"),a("code",[t._v("mas2")]),t._v("的"),a("code",[t._v("SHA1")]),t._v("值"),a("code",[t._v("6920a6e...")]),t._v("相等。")]),t._v(" "),a("li",[a("code",[t._v("emm...")]),t._v("等等！并不相等呀，只有"),a("code",[t._v("v1.0")]),t._v("的值与提交"),a("code",[t._v("mas2")]),t._v("的"),a("code",[t._v("SHA1")]),t._v("值相等，而与"),a("code",[t._v("v2.0")]),t._v("的值并不相等！")]),t._v(" "),a("li",[t._v("为什么给同一次提交"),a("code",[t._v("mas2")]),t._v("添加的标签，它们的"),a("code",[t._v("SHA1")]),t._v("值会不相等呢？这是因为"),a("code",[t._v("v1.0")]),t._v("是轻量级标签，而"),a("code",[t._v("v2.0")]),t._v("是带有附注的标签。")])]),t._v(" "),a("p",[t._v("虽然两个标签标记的都是同一次提交，但是它们的构造不一样：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("轻量级标签"),a("code",[t._v("v1.0")]),t._v("直接将这次提交的"),a("code",[t._v("SHA1")]),t._v("值作为自己的"),a("code",[t._v("SHA1")]),t._v("值；")])]),t._v(" "),a("li",[a("p",[t._v("而带附注的标签"),a("code",[t._v("v2.0")]),t._v("会创建一个"),a("code",[t._v("tag")]),t._v("对象，它的"),a("code",[t._v("SHA1")]),t._v("值是"),a("code",[t._v("tag")]),t._v("对象的"),a("code",[t._v("SHA1")]),t._v("值；")])])]),t._v(" "),a("p",[t._v("这就是轻量级标签与带有附注标签的区别。不过这两个标签仍然会指向同一次提交，如下图所示：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/6.png",alt:"image-20200418124847587"}})]),t._v(" "),a("h3",{attrs:{id:"_2-创建标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建标签"}},[t._v("#")]),t._v(" 2.创建标签")]),t._v(" "),a("h4",{attrs:{id:"git-tag-tag-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-tag-tag-name"}},[t._v("#")]),t._v(" "),a("code",[t._v("git tag <tag_name>")])]),t._v(" "),a("p",[t._v("创建一个轻量级标签：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/7.png",alt:"image-20200311143441005"}})]),t._v(" "),a("h4",{attrs:{id:"git-tag-a-tag-name-m-注释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-tag-a-tag-name-m-注释"}},[t._v("#")]),t._v(" "),a("code",[t._v("git tag -a <tag_name> -m '注释'")])]),t._v(" "),a("p",[t._v("创建一个带有附注的标签：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/8.png",alt:"image-20200311143555121"}})]),t._v(" "),a("h3",{attrs:{id:"_3-查看标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-查看标签"}},[t._v("#")]),t._v(" 3.查看标签")]),t._v(" "),a("h4",{attrs:{id:"git-tag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-tag"}},[t._v("#")]),t._v(" "),a("code",[t._v("git tag")])]),t._v(" "),a("p",[t._v("显示添加的所有标签：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/9.png",alt:"image-20200418140044357"}})]),t._v(" "),a("p",[t._v("也可以添加"),a("code",[t._v("--list")]),t._v("参数：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/10.png",alt:"image-20200418140101235"}})]),t._v(" "),a("p",[t._v("如下图所示：切换了分支"),a("code",[t._v("tag")]),t._v("仍然存在，说明"),a("code",[t._v("tag")]),t._v("与分支并没有关系，它标识的是某次特定的提交：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/11.png",alt:"image-20200418140210619"}})]),t._v(" "),a("h4",{attrs:{id:"git-show-tag-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-show-tag-name"}},[t._v("#")]),t._v(" "),a("code",[t._v("git show <tag_name>")])]),t._v(" "),a("p",[t._v("如图所示，在"),a("code",[t._v("master")]),t._v("分支上进行两次提交，每次为文件"),a("code",[t._v("test.txt")]),t._v("添加一行内容并且打上标签。其中"),a("code",[t._v("v1.0")]),t._v("为轻量级标签，"),a("code",[t._v("v2.0")]),t._v("为带有附注的标签：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/12.png",alt:"image-20200418164206660"}})]),t._v(" "),a("p",[t._v("随后，使用"),a("code",[t._v("git show")]),t._v("查看标签的内容：")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("轻量级标签：")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/13.png",alt:"image-20200418164502188"}})]),t._v(" "),a("p",[t._v("如图所示，该指令会显示标签"),a("code",[t._v("v1.0")]),t._v("所指向的提交；并且，会输出标签指向提交与上一次提交的比较结果；由于标签"),a("code",[t._v("v1.0")]),t._v("指向的提交为"),a("code",[t._v("master")]),t._v("分支的第一次提交，所以上一次提交为"),a("code",[t._v("null")]),t._v("。因此比较结果显示：相比于上一次提交，标签指向的提交"),a("code",[t._v("1st")]),t._v("在文件"),a("code",[t._v("test.txt")]),t._v("中新增了一行"),a("code",[t._v("1st")]),t._v("；")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("带注释的标签：")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/14.png",alt:"image-20200418165301312"}})]),t._v(" "),a("p",[t._v("相比于轻量级标签，带附注的标签是一个对象，可以存储附注和打标签的人和时间等信息，所以显示的信息多一些；从图中的比较结果可知，相比于上一次提交"),a("code",[t._v("1st")]),t._v("，标签"),a("code",[t._v("v2.0")]),t._v("指向的提交"),a("code",[t._v("2nd")]),t._v("为文件"),a("code",[t._v("test.txt")]),t._v("新增了一行"),a("code",[t._v("2nd")]),t._v("；")])])]),t._v(" "),a("h3",{attrs:{id:"_4-查找标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-查找标签"}},[t._v("#")]),t._v(" 4.查找标签")]),t._v(" "),a("h4",{attrs:{id:"git-tag-l-tag-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-tag-l-tag-name"}},[t._v("#")]),t._v(" "),a("code",[t._v("git tag -l <tag_name>")])]),t._v(" "),a("p",[t._v("该方式支持正则表达式查找；")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/15.png",alt:"image-20200418140732354"}})]),t._v(" "),a("p",[t._v("如上图所示：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("v*")]),t._v("表示搜索所有以"),a("code",[t._v("v")]),t._v("开头的标签；")]),t._v(" "),a("li",[a("code",[t._v("?2*")]),t._v("表示搜索任意开头，但包含"),a("code",[t._v("2")]),t._v("的标签；")])]),t._v(" "),a("h3",{attrs:{id:"_5-将标签推送到远程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-将标签推送到远程"}},[t._v("#")]),t._v(" 5.将标签推送到远程")]),t._v(" "),a("p",[t._v("要将标签推送到远程仓库，首先要建立本地仓库与远程仓库的联系，比如可以采用：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("git push -u origin master\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("建立本地"),a("code",[t._v("master")]),t._v("分支与远程"),a("code",[t._v("master")]),t._v("分支的联系，并进行一次推送：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/16.png",alt:"image-20200418143423585"}})]),t._v(" "),a("h4",{attrs:{id:"git-push-origin-tag-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-push-origin-tag-name"}},[t._v("#")]),t._v(" "),a("code",[t._v("git push origin <tag_name>")])]),t._v(" "),a("p",[t._v("这种方法可以推送指定的本地标签到远程仓库，例如将本地"),a("code",[t._v("master")]),t._v("分支上的标签"),a("code",[t._v("v1.0")]),t._v("推送到远程仓库：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/17.png",alt:"image-20200418143541273"}})]),t._v(" "),a("p",[t._v("执行上述指令后，对应的远程仓库"),a("code",[t._v("gitTest")]),t._v("中就会出现相应的"),a("code",[t._v("tag")]),t._v("信息了：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/18.png",alt:"image-20200418143927912"}})]),t._v(" "),a("p",[t._v("也可以在"),a("code",[t._v("releases")]),t._v("选项中，查看"),a("code",[t._v("tag")]),t._v("和"),a("code",[t._v("Releases")]),t._v("信息：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/19.png",alt:"image-20200418144230515"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/20.png",alt:"image-20200418144207107"}})]),t._v(" "),a("p",[a("strong",[t._v("也可以同时推送多个本地标签到远程仓库")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("git push origin  v2.0 v3.0\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/21.png",alt:"image-20200418144612359"}})]),t._v(" "),a("p",[t._v("以上的命令都是简写形式，"),a("strong",[t._v("完整写法为：")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("git push origin refs/tags/v4.0:refs/tags/v4.0\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/22.png",alt:"image-20200418144755135"}})]),t._v(" "),a("h5",{attrs:{id:"git-push-origin-tag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-push-origin-tag"}},[t._v("#")]),t._v(" "),a("code",[t._v("git push origin --tag")])]),t._v(" "),a("p",[t._v("该方法可以一次性推送所有的本地标签到远程仓库：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/23.png",alt:"image-20200418144952994"}})]),t._v(" "),a("p",[t._v("也可以采用简写命令：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("//下面的tag可以写成tags，效果一样\ngit push --tag\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/24.png",alt:"image-20200418145049074"}})]),t._v(" "),a("h3",{attrs:{id:"_6-删除远程标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-删除远程标签"}},[t._v("#")]),t._v(" 6.删除远程标签")]),t._v(" "),a("p",[t._v("当然，我们可以直接在远程仓库上删除远程标签。但是，最好的方式还是采用命令行进行删除。删除远程标签的方法与删除远程分支的方法非常类似，同样有两种方法：")]),t._v(" "),a("h4",{attrs:{id:"git-push-origin-tag-name-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-push-origin-tag-name-2"}},[t._v("#")]),t._v(" "),a("code",[t._v("git push origin :<tag_name>")])]),t._v(" "),a("p",[t._v("这种方法相当于推送一个空的标签到远程仓库，由此达到删除的效果。比如删除远程仓库中的标签"),a("code",[t._v("v3.0")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("git push origin :v3.0\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/25.png",alt:"image-20200418154504982"}})]),t._v(" "),a("p",[t._v("这样远程仓库中的标签"),a("code",[t._v("V3.0")]),t._v("就被删除了：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/26.png",alt:"image-20200418154554319"}})]),t._v(" "),a("p",[t._v("但是本地仓库中对应的标签"),a("code",[t._v("V3.0")]),t._v("并没有被删除：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/27.png",alt:"image-20200418154631370"}})]),t._v(" "),a("p",[t._v("上述指令为简写，"),a("strong",[t._v("完整写法如下")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("git push origin :refs/tags/v3.0\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/28.png",alt:"image-20200418154906969"}})]),t._v(" "),a("h4",{attrs:{id:"git-push-origin-delete-tag-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-push-origin-delete-tag-name"}},[t._v("#")]),t._v(" "),a("code",[t._v("git push origin --delete <tag_name>")])]),t._v(" "),a("p",[t._v("该方法采用了更加语义化的参数"),a("code",[t._v("--delete")]),t._v("，实现远程标签的删除：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("git push origin --delete v2.0\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/29.png",alt:"image-20200418155134748"}})]),t._v(" "),a("p",[t._v("同样成功地删除了远程仓库中的标签"),a("code",[t._v("v2.0")]),t._v("：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/30.png",alt:"image-20200418155216230"}})]),t._v(" "),a("p",[t._v("但是，本地的标签"),a("code",[t._v("v2.0")]),t._v("也没有被删除：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/31.png",alt:"image-20200418155311429"}})]),t._v(" "),a("p",[t._v("采用下列的完整写法，效果是一样的：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("git push origin --delete tag v2.0\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/32.png",alt:"image-20200418155513090"}})]),t._v(" "),a("blockquote",[a("p",[t._v("不难发现，删除"),a("strong",[t._v("远程分支")]),t._v("和"),a("strong",[t._v("远程标签")]),t._v("的方法是"),a("strong",[t._v("一样")]),t._v("的。")])]),t._v(" "),a("h3",{attrs:{id:"_7-删除本地标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-删除本地标签"}},[t._v("#")]),t._v(" 7.删除本地标签")]),t._v(" "),a("h4",{attrs:{id:"git-tag-d-tag-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-tag-d-tag-name"}},[t._v("#")]),t._v(" "),a("code",[t._v("git tag -d <tag_name>")])]),t._v(" "),a("p",[t._v("如通过以下命令删除标签"),a("code",[t._v("v3.0")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("git tag -d v3.0\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/33.png",alt:"image-20200418155616562"}})]),t._v(" "),a("h3",{attrs:{id:"_8-切换标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-切换标签"}},[t._v("#")]),t._v(" 8.切换标签")]),t._v(" "),a("h4",{attrs:{id:"git-checkout-tag-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-checkout-tag-name"}},[t._v("#")]),t._v(" "),a("code",[t._v("git checkout <tag_name>")])]),t._v(" "),a("p",[t._v("如图所示，在"),a("code",[t._v("master")]),t._v("分支上进行了三次提交，并且添加了相应的标签：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/34.png",alt:"image-20200418161353146"}})]),t._v(" "),a("p",[t._v("当我们通过"),a("code",[t._v("checkout")]),t._v("命令切换到标签"),a("code",[t._v("v2.0")]),t._v("时：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/35.png",alt:"image-20200418161526176"}})]),t._v(" "),a("p",[t._v("可见，会出现游离的提交。此时查看各分支状态：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/36.png",alt:"image-20200418161655468"}})]),t._v(" "),a("p",[t._v("如上图所示，当前处于标签"),a("code",[t._v("v2.0")]),t._v("指向的提交，并且切换标签的过程中改变了"),a("code",[t._v("HEAD")]),t._v("指针的指向。但是，并没有改变分支"),a("code",[t._v("master")]),t._v("的指向。过程如下图所示：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/37.png",alt:"image-20200418162458123"}})]),t._v(" "),a("p",[t._v("也就是说，切换标签与使用"),a("code",[t._v("reset")]),t._v("进行版本回退十分相似。只不过切换标签只改变了"),a("code",[t._v("HEAD")]),t._v("指针的指向，会造成游离的提交。若有需要可以创建一个新分支进行保存。")]),t._v(" "),a("h3",{attrs:{id:"_9-拉取标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-拉取标签"}},[t._v("#")]),t._v(" 9.拉取标签")]),t._v(" "),a("p",[t._v("在下图所示的情况中，本地仓库"),a("code",[t._v("mygit")]),t._v("与远程仓库有公共的提交历史（同源），并且不发生合并冲突的情况下（具体可参考"),a("a",{attrs:{href:"https://www.cnblogs.com/AhuntSun-blog/p/12713666.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Git应用详解第六讲：Git协作与Git pull常见问题"),a("OutboundLink")],1),t._v("）：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/38.png",alt:"image-20200418160517111"}})]),t._v(" "),a("p",[t._v("可以直接通过"),a("code",[t._v("git pull")]),t._v("将远程仓库的标签拉取下来，并创建本地仓库中没有的标签：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/39.png",alt:"image-20200418160737829"}})]),t._v(" "),a("h2",{attrs:{id:"二、git别名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、git别名"}},[t._v("#")]),t._v(" 二、"),a("code",[t._v("Git")]),t._v("别名")]),t._v(" "),a("h3",{attrs:{id:"_1-设置git命令别名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-设置git命令别名"}},[t._v("#")]),t._v(" 1.设置"),a("code",[t._v("git")]),t._v("命令别名")]),t._v(" "),a("h4",{attrs:{id:"git-config-作用域-alias-别名-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-config-作用域-alias-别名-命令"}},[t._v("#")]),t._v(" "),a("code",[t._v("git config <作用域> alias.<别名> '<命令>'")])]),t._v(" "),a("p",[t._v("别名就是一个替代，使用一个简短的字符串来代替常用的长命令。比如可以通过如下命令，使用别名"),a("code",[t._v("bra")]),t._v("来替代"),a("code",[t._v("branch")]),t._v("命令：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("git config --global alias.bra branch \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/40.png",alt:"image-20200417184645237"}})]),t._v(" "),a("p",[t._v("当命令较为简短时，可以省略命令两边的单引号：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/41.png",alt:"image-20200417184803691"}})]),t._v(" "),a("p",[t._v("在上述命令中：")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("--global")]),t._v("表示设置的别名作用域为系统用户，即该用户对所有的"),a("code",[t._v("git")]),t._v("仓库都可以使用这个别名；其余还有仓库作用域"),a("code",[t._v("--loacl")]),t._v("，系统作用域"),a("code",[t._v("--system")]),t._v("；")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("alias.br")]),t._v("表示更改别名为"),a("code",[t._v("br")]),t._v("；")])]),t._v(" "),a("li",[a("p",[t._v("再往后的"),a("code",[t._v("branch")]),t._v("表示需要起别名的命令，可以是带参数的长命令，此时不能省略命令两边的单引号：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("git config --global alias.dog 'log --all --decorate --oneline --graph'\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/42.png",alt:"image-20200413171109680"}})])])]),t._v(" "),a("p",[t._v("由于上面配置的别名作用域为系统用户，该配置会写入"),a("code",[t._v("gitconfig")]),t._v("配置文件。打开该文件可以看到写入的"),a("strong",[t._v("别名配置")]),t._v("：")]),t._v(" "),a("blockquote",[a("p",[t._v("**补充：**使用"),a("code",[t._v("vi ~/.gitconfig")]),t._v("可以直接打开"),a("code",[t._v("gitconfig")]),t._v("这个文件（记得加点），无论当前所处的路径是什么；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/43.png",alt:"image-20200417185537264"}})]),t._v(" "),a("p",[t._v("也就是说可以直接通过修改"),a("code",[t._v("gitconfig")]),t._v("文件的"),a("code",[t._v("alias")]),t._v("选项来设置别名，但是"),a("strong",[t._v("不建议")]),t._v("。")]),t._v(" "),a("p",[t._v("这样，通过别名就可以简化一些常用的命令了，比如"),a("code",[t._v("git status")]),t._v("、"),a("code",[t._v("git checkout")]),t._v("等：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/44.png",alt:"image-20200417185854925"}})]),t._v(" "),a("h3",{attrs:{id:"_2-设置外部命令别名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-设置外部命令别名"}},[t._v("#")]),t._v(" 2.设置外部命令别名")]),t._v(" "),a("p",[t._v("像"),a("code",[t._v("gitk")]),t._v("这样的外部命令，是没有"),a("code",[t._v("git")]),t._v("前缀的。设置别名的方法与设置"),a("code",[t._v("git")]),t._v("提供的命令有所不同，要按照如下格式设置：")]),t._v(" "),a("h4",{attrs:{id:"git-config-作用域-alias-别名-外部命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-config-作用域-alias-别名-外部命令"}},[t._v("#")]),t._v(" "),a("code",[t._v("git config <作用域> alias.<别名> '<!外部命令>'")])]),t._v(" "),a("ul",[a("li",[t._v("感叹号表示这是一个外部命令；")]),t._v(" "),a("li",[t._v("注意要加上单引号，不用加"),a("code",[t._v("git")]),t._v("前缀；")])]),t._v(" "),a("p",[t._v("比如在系统用户作用域下，将"),a("code",[t._v("git ui")]),t._v("设置为"),a("code",[t._v("gitk")]),t._v("的别名：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(" git config --global alias.ui '!gitk'\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("设置完成后，该配置会被写入系统用户的配置文件"),a("code",[t._v("gitconfig")]),t._v("中：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/45.png",alt:"image-20200417190632295"}})]),t._v(" "),a("p",[t._v("随后直接使用"),a("code",[t._v("git ui")]),t._v("便能打开"),a("code",[t._v("gitk")]),t._v("界面：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/46.png",alt:"image-20200417190558949"}})]),t._v(" "),a("p",[t._v("**补充：**设置了别名后，原来的命令仍然有效。")]),t._v(" "),a("h2",{attrs:{id:"三、垃圾回收：git-gc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、垃圾回收：git-gc"}},[t._v("#")]),t._v(" 三、垃圾回收："),a("code",[t._v("Git gc")])]),t._v(" "),a("p",[t._v("所谓"),a("code",[t._v("gc")]),t._v("就是垃圾回收机制，实际使用较少；它的作用是"),a("strong",[t._v("清理不必要的文件并优化本地存储库")]),t._v("。")]),t._v(" "),a("p",[t._v("为了演示它的作用，设置以下测试环境：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("首先，在本地仓库"),a("code",[t._v("mygit")]),t._v("创建"),a("code",[t._v("master")]),t._v("和"),a("code",[t._v("dev")]),t._v("两个分支，并将它们推送到远程仓库：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/47.png",alt:"image-20200418105755292"}})])]),t._v(" "),a("li",[a("p",[t._v("然后，给本地仓库"),a("code",[t._v("mygit")]),t._v("添加一个轻量级标签"),a("code",[t._v("v1.0")]),t._v("和一个带有附注的标签"),a("code",[t._v("v2.0")]),t._v("：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/48.png",alt:"image-20200418110041381"}})])])]),t._v(" "),a("p",[t._v("此时"),a("code",[t._v(".git/refs")]),t._v("目录下的各文件如下所示：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/49.png",alt:"image-20200418110228125"}})]),t._v(" "),a("p",[a("code",[t._v("heads")]),t._v("目录存储的是本地分支信息，"),a("code",[t._v("remote")]),t._v("目录存储的是远程分支信息，"),a("code",[t._v("tags")]),t._v("目录存储的是标签信息，符合预期。")]),t._v(" "),a("p",[t._v("随后，执行"),a("code",[t._v("git gc")]),t._v("命令：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/50.png",alt:"image-20200418110332080"}})]),t._v(" "),a("p",[t._v("再次查看"),a("code",[t._v(".git/refs")]),t._v("目录：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/51.png",alt:"image-20200418110544449"}})]),t._v(" "),a("p",[t._v("可以看到"),a("code",[t._v("refs")]),t._v("目录及其子目录下的文件消失了，但是"),a("code",[t._v(".git")]),t._v("目录下多了一个"),a("code",[t._v("packed-refs")]),t._v("文件。事实上，"),a("code",[t._v("refs")]),t._v("目录下的文件不是消失了，而是被打包到了"),a("code",[t._v("packed-refs")]),t._v("文件中。打开"),a("code",[t._v("packed-refs")]),t._v("文件：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson8/52.png",alt:"image-20200418111206150"}})]),t._v(" "),a("p",[t._v("可以看到执行"),a("code",[t._v("git gc")]),t._v("后"),a("code",[t._v("refs")]),t._v("目录及其子目录下的文件都被"),a("strong",[t._v("压缩打包")]),t._v("到"),a("code",[t._v("packed-refs")]),t._v("文件中了。从图中可以看到轻量级标签"),a("code",[t._v("v1.0")]),t._v("只占一行，而带附注的标签"),a("code",[t._v("v2.0")]),t._v("占两行：")]),t._v(" "),a("ul",[a("li",[t._v("其中第"),a("code",[t._v("6")]),t._v("行和第"),a("code",[t._v("8")]),t._v("行的"),a("code",[t._v("SHA1")]),t._v("值是相同的，这是因为两个标签都是给同一次提交上添加的；")]),t._v(" "),a("li",[t._v("而带附注的标签"),a("code",[t._v("v2.0")]),t._v("中的另外一行信息（第"),a("code",[t._v("7")]),t._v("行）表示的则是"),a("code",[t._v("tag")]),t._v("对象的"),a("code",[t._v("SHA1")]),t._v("值；")])]),t._v(" "),a("p",[t._v("打包完之后，再次"),a("strong",[t._v("修改文件")]),t._v("，或者"),a("strong",[t._v("添加分支")]),t._v("，新增的内容还是会在"),a("code",[t._v(".git/refs")]),t._v("目录下显示，而不会被打包到"),a("code",[t._v("packed-refs")]),t._v("文件中，需要重新执行"),a("code",[t._v("git gc")]),t._v("才会被打包。")])])}),[],!1,null,null,null);e.default=_.exports}}]);