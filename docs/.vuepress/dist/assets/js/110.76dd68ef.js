(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{429:function(t,v,e){"use strict";e.r(v);var _=e(33),a=Object(_.a)({},(function(){var t=this,v=t.$createElement,e=t._self._c||v;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"第三讲：本地分支的重要操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第三讲：本地分支的重要操作"}},[t._v("#")]),t._v(" 第三讲：本地分支的重要操作")]),t._v(" "),e("h2",{attrs:{id:"前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),e("p",[t._v("分支是"),e("code",[t._v("git")]),t._v("最核心的操作之一，了解分支的基本操作能够大大提高项目开发的效率。这一讲就来介绍一些分支的常见操作及其基本原理。")]),t._v(" "),e("h2",{attrs:{id:"一、分支概述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、分支概述"}},[t._v("#")]),t._v(" 一、分支概述")]),t._v(" "),e("p",[t._v("在开发当中，往往需要分工合作。比如：小红开发"),e("code",[t._v("A")]),t._v("功能，小明开发"),e("code",[t._v("B")]),t._v("功能，小刚开发"),e("code",[t._v("C")]),t._v("功能。如何才能做到三者并行开发呢？"),e("code",[t._v("git")]),t._v("为我们提供的分支功能就能实现这一需求，如下图所示：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/1.png",alt:"image-20200413193720239"}})]),t._v(" "),e("p",[t._v("在实际的开发过程中，"),e("code",[t._v("master")]),t._v("分支是用来发布项目稳定版本的。新的功能往往是在一个新建的分支上进行开发，等到新功能开发完毕并经过测试，表现稳定后，才会合并到"),e("code",[t._v("master")]),t._v("分支上进行版本更新。这样就可以在保持一款软件发行的同时，同步进行新功能的开发。")]),t._v(" "),e("p",[t._v("通常来说，远程仓库的"),e("code",[t._v("Git")]),t._v("分支会有如下几种："),e("code",[t._v("master")]),t._v("分支、"),e("code",[t._v("test")]),t._v("分支、"),e("code",[t._v("develop")]),t._v("分支，除此之外可能还有紧急修复"),e("code",[t._v("bug")]),t._v("的"),e("code",[t._v("hotfix")]),t._v("分支；但是，本地的分支可以有很多；本文主要介绍"),e("code",[t._v("Git")]),t._v("本地分支的内容。")]),t._v(" "),e("h2",{attrs:{id:"二、查看本地分支"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、查看本地分支"}},[t._v("#")]),t._v(" 二、查看本地分支")]),t._v(" "),e("h3",{attrs:{id:"_1-git-branch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-git-branch"}},[t._v("#")]),t._v(" 1."),e("code",[t._v("git branch")])]),t._v(" "),e("p",[t._v("查看当前版本库中的所有分支：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/2.png",alt:"image-20200310151203938"}})]),t._v(" "),e("p",[t._v("其中的 "),e("code",[t._v("*")]),t._v(" 表示当前处于的分支，可见当前处于"),e("code",[t._v("master")]),t._v("分支；")]),t._v(" "),e("p",[t._v("使用"),e("code",[t._v("git init")]),t._v("初始化"),e("code",[t._v("git")]),t._v("仓库时，"),e("code",[t._v("git")]),t._v("会自动创建一个"),e("code",[t._v("master")]),t._v("分支。但是，如果没有在"),e("code",[t._v("master")]),t._v("分支上进行任何提交就切换到其他分支，那么在切换分支的时候"),e("code",[t._v("master")]),t._v("分支会被销毁。并且，无法查看没有提交记录的分支，如下图所示：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/3.png",alt:"image-20200413115148907"}})]),t._v(" "),e("h3",{attrs:{id:"_2-git-branch-a"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-git-branch-a"}},[t._v("#")]),t._v(" 2."),e("code",[t._v("git branch -a")])]),t._v(" "),e("p",[t._v("查看所有本地分支，包括本地分支和本地远程分支：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/4.png",alt:"image-20200328164045256"}})]),t._v(" "),e("h3",{attrs:{id:"_3-git-branch-v"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-git-branch-v"}},[t._v("#")]),t._v(" 3."),e("code",[t._v("git branch -v")])]),t._v(" "),e("p",[t._v("查看所有本地分支上最近一次的提交记录：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/5.png",alt:"image-20200413122049091"}})]),t._v(" "),e("p",[t._v("但是，该指令无法查看本地远程分支：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/6.png",alt:"image-20200413123220561"}})]),t._v(" "),e("h3",{attrs:{id:"_4-git-branch-r"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-git-branch-r"}},[t._v("#")]),t._v(" 4."),e("code",[t._v("git branch -r")])]),t._v(" "),e("p",[e("code",[t._v("-r")]),t._v("参数用于单独查看本地远程分支：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/6.1.png",alt:"image-20200413174143173"}})]),t._v(" "),e("h3",{attrs:{id:"_5-git-branch-av"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-git-branch-av"}},[t._v("#")]),t._v(" 5."),e("code",[t._v("git branch -av")])]),t._v(" "),e("p",[t._v("该指令不仅可以显示所有的本地分支，包括本地远程分支，以及对应分支上的最新提交信息：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/7.png",alt:"image-20200409115958334"}})]),t._v(" "),e("h3",{attrs:{id:"_6-git-branch-vv"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-git-branch-vv"}},[t._v("#")]),t._v(" 6."),e("code",[t._v("git branch -vv")])]),t._v(" "),e("p",[e("code",[t._v("-vv")]),t._v("参数表示查看所有本地分支与远程分支的关联情况。如图所示，本地"),e("code",[t._v("master")]),t._v("分支有本地远程分支"),e("code",[t._v("origin/master")]),t._v("与之关联，说明它已与远程"),e("code",[t._v("master")]),t._v("分支建立了关联；")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/8.png",alt:"image-20200410121145929"}})]),t._v(" "),e("blockquote",[e("p",[t._v("至于上面提到的"),e("strong",[t._v("本地远程分支")]),t._v("，将在下一讲中详细介绍。")])]),t._v(" "),e("h2",{attrs:{id:"三、创建本地分支"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、创建本地分支"}},[t._v("#")]),t._v(" 三、创建本地分支")]),t._v(" "),e("h3",{attrs:{id:"_1-git-branch-branch-name"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-git-branch-branch-name"}},[t._v("#")]),t._v(" 1."),e("code",[t._v("git branch <branch_name>")])]),t._v(" "),e("p",[t._v("可通过上述命令创建新分支"),e("code",[t._v("new_branch")]),t._v("：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/9.png",alt:"image-20200310151357642"}})]),t._v(" "),e("p",[t._v("由于是在"),e("code",[t._v("master")]),t._v("分支上创建的"),e("code",[t._v("new_branch")]),t._v("分支，所以**"),e("code",[t._v("new_branch")]),t._v("分支"),e("strong",[t._v("与")]),e("code",[t._v("master")]),t._v("分支"),e("strong",[t._v("有着部分")]),t._v("共同的提交历史**；所以，"),e("code",[t._v("master")]),t._v("分支上的文件，"),e("code",[t._v("new_branch")]),t._v("分支上都有。但是，在"),e("code",[t._v("new_branch")]),t._v("分支上添加的"),e("code",[t._v("new_branch")]),t._v("文件，不会存在于"),e("code",[t._v("master")]),t._v("分支上：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/10.png",alt:"image-20200413120006856"}})]),t._v(" "),e("p",[t._v("此时两分支的状态为：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/11.png",alt:"image-20200413120509219"}})]),t._v(" "),e("h3",{attrs:{id:"_2-git-branch-b-branch-name"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-git-branch-b-branch-name"}},[t._v("#")]),t._v(" 2."),e("code",[t._v("git branch -b <branch_name>")])]),t._v(" "),e("p",[t._v("通过上述命令可创建并切换到"),e("code",[t._v("new_branch")]),t._v("分支：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/12.png",alt:"image-20200413120945856"}})]),t._v(" "),e("p",[t._v("如图所示，本来所在分支为"),e("code",[t._v("master")]),t._v("，并且没有"),e("code",[t._v("new_branch")]),t._v("分支。执行上述命令后，创建并切换到了"),e("code",[t._v("new_branch")]),t._v("分支上。")]),t._v(" "),e("h2",{attrs:{id:"四、切换本地分支"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、切换本地分支"}},[t._v("#")]),t._v(" 四、切换本地分支")]),t._v(" "),e("h3",{attrs:{id:"_1-git-checkout-branch-name"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-git-checkout-branch-name"}},[t._v("#")]),t._v(" 1."),e("code",[t._v("git checkout <branch_name>")])]),t._v(" "),e("p",[t._v("比如切换到"),e("code",[t._v("new_branch")]),t._v("分支：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/13.png",alt:"image-20200310151539203"}})]),t._v(" "),e("h3",{attrs:{id:"_2-git-checkout"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-git-checkout"}},[t._v("#")]),t._v(" 2."),e("code",[t._v("git checkout -")])]),t._v(" "),e("p",[t._v("切换回上次操作的分支：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/14.png",alt:"image-20200310152313013"}})]),t._v(" "),e("h2",{attrs:{id:"五、重命名本地分支"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、重命名本地分支"}},[t._v("#")]),t._v(" 五、重命名本地分支")]),t._v(" "),e("h3",{attrs:{id:"_1-git-branch-m-oldname-newname"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-git-branch-m-oldname-newname"}},[t._v("#")]),t._v(" 1."),e("code",[t._v("git branch -m <oldName> <newName>")])]),t._v(" "),e("p",[t._v("如下图所示，将本地分支"),e("code",[t._v("master")]),t._v("重命名为"),e("code",[t._v("master2")]),t._v("：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/15.png",alt:"image-20200311115657966"}})]),t._v(" "),e("h2",{attrs:{id:"六、删除本地分支"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#六、删除本地分支"}},[t._v("#")]),t._v(" 六、删除本地分支")]),t._v(" "),e("h3",{attrs:{id:"_1-git-branch-d-new-branch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-git-branch-d-new-branch"}},[t._v("#")]),t._v(" 1."),e("code",[t._v("git branch -d new_branch")])]),t._v(" "),e("p",[t._v("删除"),e("code",[t._v("new_branch")]),t._v("分支：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/16.png",alt:"image-20200310163652841"}})]),t._v(" "),e("p",[e("strong",[t._v("注意点：")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("不能删除当前所处的分支；")])]),t._v(" "),e("li",[e("p",[t._v("当需要删除的分支上有"),e("code",[t._v("master")]),t._v("分支没有的内容，并且删除前没有进行合并（"),e("code",[t._v("merge")]),t._v("）时，会报错：")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/17.png",alt:"image-20200310163934006"}})]),t._v(" "),e("p",[t._v("此时可以通过**"),e("code",[t._v("git branch -D new_branch")]),t._v("** 使用参数"),e("code",[t._v("D")]),t._v("，在不合并的情况下强制"),e("strong",[t._v("删除分支")]),t._v("；")]),t._v(" "),e("h2",{attrs:{id:"七、合并分支"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#七、合并分支"}},[t._v("#")]),t._v(" 七、合并分支")]),t._v(" "),e("p",[t._v("注意：这里所讲的分支指的是有公共提交节点的分支，如下图中的"),e("code",[t._v("dev")]),t._v("与"),e("code",[t._v("master")]),t._v("分支所示，提交节点"),e("code",[t._v("A")]),t._v("为它们的公共提交节点：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/18.png",alt:"image-20200411210604441"}})]),t._v(" "),e("p",[t._v("当两分支没有公共提交节点，如下图所示，应采用"),e("code",[t._v("rebase")]),t._v("进行合并，后面会详细介绍：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/19.png",alt:"image-20200411210330211"}})]),t._v(" "),e("h3",{attrs:{id:"_1-git-merge-branch-name"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-git-merge-branch-name"}},[t._v("#")]),t._v(" 1."),e("code",[t._v("git merge <branch_name>")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("首先，创建并切换到新分支"),e("code",[t._v("dev")]),t._v("中，并为"),e("code",[t._v("test.txt")]),t._v("文件添加内容"),e("code",[t._v("dev1")]),t._v("：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/20.png",alt:"image-20200413213753822"}})]),t._v(" "),e("p",[t._v("**注意：**要将"),e("code",[t._v("dev")]),t._v("分支上的这一修改提交到版本库，才能进行后续合并。因为合并的是提交对象链，详情见后面讲解的合并原理：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/21.png",alt:"image-20200413124513814"}})])]),t._v(" "),e("li",[e("p",[t._v("然后，"),e("strong",[t._v("切换回"),e("code",[t._v("master")]),t._v("分支")]),t._v("，通过"),e("code",[t._v("git merge dev")]),t._v("指令，将"),e("code",[t._v("dev")]),t._v("分支中的内容合并到"),e("strong",[t._v("当前所处")]),t._v("的"),e("code",[t._v("master")]),t._v("分支中；合并后"),e("code",[t._v("master")]),t._v("分支与"),e("code",[t._v("dev")]),t._v("分支上"),e("code",[t._v("test.txt")]),t._v("文件的内容达到了同步：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/22.png",alt:"image-20200413213934629"}})])])]),t._v(" "),e("h3",{attrs:{id:"_2-分支合并的原则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-分支合并的原则"}},[t._v("#")]),t._v(" 2.分支合并的原则")]),t._v(" "),e("p",[e("code",[t._v("git")]),t._v("分支的合并采用的是"),e("strong",[t._v("三方合并")]),t._v("的原则：找到两分支最新提交"),e("code",[t._v("A")]),t._v("和"),e("code",[t._v("B")]),t._v("的公共父节点"),e("code",[t._v("C")]),t._v("，在这三个节点的基础上合并为节点"),e("code",[t._v("D")]),t._v("。这个节点"),e("code",[t._v("D")]),t._v("就包含了两个分支上的所有内容：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/23.png",alt:"image-20200407160615973"}})]),t._v(" "),e("h2",{attrs:{id:"八、分支的本质"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#八、分支的本质"}},[t._v("#")]),t._v(" 八、分支的本质")]),t._v(" "),e("p",[e("strong",[t._v("分支：指向一条"),e("code",[t._v("commit")]),t._v("对象链或一条工作记录线的指针；")])]),t._v(" "),e("p",[t._v("快照"),e("code",[t._v("A~D")]),t._v("分别表示四次提交（"),e("code",[t._v("commit")]),t._v("），注意提交的顺序为："),e("code",[t._v("A -> B -> C -> D")]),t._v("：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/24.png",alt:"image-20200408150401090"}})]),t._v(" "),e("p",[t._v("从图中可以看到每一次提交的对象内都会保存上一次提交的"),e("code",[t._v("commit id")]),t._v("，由此可以从后往前把所有的提交（"),e("code",[t._v("commit")]),t._v("）串起来形成一条"),e("strong",[t._v("链")]),t._v("（类似单向链表），"),e("strong",[t._v("这条链就组成了一条完整的分支信息")]),t._v("：")]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("当版本库中只有一条分支："),e("strong",[t._v("该分支的最新提交就包含了整条分支的所有内容，代表版本库的")]),t._v("当前状态")]),t._v("。如上图的快照"),e("code",[t._v("D")]),t._v("，里面包含了快照"),e("code",[t._v("A~C")]),t._v("中的所有内容，此时快照"),e("code",[t._v("D")]),t._v("中的内容就是整个版本库中的内容：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/25.png",alt:"image-20200413132342942"}})])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("当版本库中有多条分支："),e("strong",[t._v("每条分支上的最新提交包含了所处分支的")]),t._v("全部内容")]),t._v("，将各个分支的最新提交进行合并。合并的节点就包含了所有分支的内容，也就是"),e("strong",[t._v("现阶段的版本库本身")]),t._v("；如下图中的"),e("code",[t._v("d1")]),t._v("、"),e("code",[t._v("m2")]),t._v("、"),e("code",[t._v("t3")]),t._v("分别包含了"),e("code",[t._v("dev")]),t._v("、"),e("code",[t._v("master")]),t._v("、"),e("code",[t._v("test")]),t._v("分支上的所有内容：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/26.png",alt:"image-20200413132409178"}})])])]),t._v(" "),e("h3",{attrs:{id:"_1-分支-指针"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-分支-指针"}},[t._v("#")]),t._v(" 1.分支 "),e("code",[t._v("==")]),t._v(" 指针")]),t._v(" "),e("p",[t._v("情景一：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/27.png",alt:"image-20200406131416304"}})]),t._v(" "),e("p",[t._v("从图中可以看到：")]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[e("code",[t._v("HEAD")]),t._v("为一个指针：指向当前分支；")])])]),t._v(" "),e("li",[e("p",[e("strong",[e("code",[t._v("master")]),t._v("也为一指针：指向提交；")])])])]),t._v(" "),e("p",[t._v("情景二：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/28.png",alt:"image-20200406131503784"}})]),t._v(" "),e("p",[t._v("上图中，"),e("code",[t._v("dev")]),t._v("为"),e("code",[t._v("master")]),t._v("分支上创建的新分支，可知：")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("git")]),t._v("在创建新分支时，文件本身不变化，只需要创建一个"),e("strong",[t._v("代表新分支，并指向当前分支的指针")]),t._v("；如图中的"),e("code",[t._v("dev")]),t._v("与"),e("code",[t._v("master")]),t._v("指向同一个提交，文件没有发生任何变化；")]),t._v(" "),e("li",[e("code",[t._v("HEAD")]),t._v("指向"),e("code",[t._v("dev")]),t._v("分支，表示当前所处分支为"),e("code",[t._v("dev")]),t._v("，相当于执行了："),e("code",[t._v("git checkout -b dev")]),t._v(" 后的状态；")])]),t._v(" "),e("blockquote",[e("p",[t._v("相信你已经发现："),e("code",[t._v("HEAD")]),t._v("是一个始终"),e("strong",[t._v("指向当前分支")]),t._v("的"),e("strong",[t._v("指针")]),t._v("；")])]),t._v(" "),e("h3",{attrs:{id:"_2-head标识符"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-head标识符"}},[t._v("#")]),t._v(" 2."),e("code",[t._v("HEAD")]),t._v("标识符")]),t._v(" "),e("p",[e("code",[t._v("HEAD")]),t._v("文件是一个指向当前所在分支的"),e("strong",[t._v("引用标识符")]),t._v("，也可以理解为一个"),e("strong",[t._v("指针")]),t._v("，它与分支之间的关系是这样的：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/29.png",alt:"image-20200408000947960"}})]),t._v(" "),e("h4",{attrs:{id:"查看head"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看head"}},[t._v("#")]),t._v(" 查看"),e("code",[t._v("HEAD")])]),t._v(" "),e("p",[e("code",[t._v("HEAD")]),t._v("文件中并不包含"),e("code",[t._v("SHA1")]),t._v("值（每次提交的"),e("code",[t._v("commit ID")]),t._v("），而是包含一个指向另外一个引用的指针。我们可以查看"),e("code",[t._v(".git")]),t._v("目录下的"),e("code",[t._v("HEAD")]),t._v("文件：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/30.png",alt:"image-20200310172919110"}})]),t._v(" "),e("p",[t._v("可见"),e("code",[t._v("HEAD")]),t._v("指向的是当前所在的"),e("code",[t._v("master")]),t._v("分支；")]),t._v(" "),e("p",[t._v("当我们通过"),e("code",[t._v("git checkout -b dev")]),t._v("  创建并切换到"),e("code",[t._v("dev")]),t._v("分支后，再次进入"),e("code",[t._v(".git")]),t._v("文件夹查看"),e("code",[t._v("HEAD")]),t._v("，会发现此时"),e("code",[t._v("HEAD")]),t._v("指向了"),e("code",[t._v("dev")]),t._v("：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/31.png",alt:"image-20200310173205214"}})]),t._v(" "),e("p",[t._v("由此证明了"),e("code",[t._v("HEAD")]),t._v("始终指向当前分支；")]),t._v(" "),e("p",[t._v("当执行"),e("code",[t._v("git commit")]),t._v("命令时，"),e("code",[t._v("git")]),t._v("会创建一个"),e("code",[t._v("commit")]),t._v("对象（比如下图"),e("code",[t._v("D")]),t._v("）。并且将这个"),e("code",[t._v("commit")]),t._v("对象的"),e("code",[t._v("parent")]),t._v("指针指向"),e("code",[t._v("HEAD")]),t._v(" 所指向的引用（"),e("code",[t._v("master")]),t._v("）指向的提交（也就是"),e("code",[t._v("C")]),t._v("），这样就能形成一条提交链：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/32.png",alt:"image-20200408001856063"}})]),t._v(" "),e("p",[t._v("我们对于"),e("code",[t._v("HEAD")]),t._v("修改的任何操作，都会被"),e("code",[t._v("git reflog")]),t._v("完整记录下来：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/33.png",alt:"image-20200329145707276"}})]),t._v(" "),e("p",[t._v("但是手动地修改"),e("code",[t._v("HEAD")]),t._v("文件，这些信息就不会被记录下来，所以十分不建议手动修改"),e("code",[t._v("git")]),t._v("相关的配置文件，而是应该尽量采用命令行的方式来修改。")]),t._v(" "),e("h4",{attrs:{id:"修改head"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改head"}},[t._v("#")]),t._v(" 修改"),e("code",[t._v("HEAD")])]),t._v(" "),e("p",[t._v("实际上，我们可以通过"),e("code",[t._v("git")]),t._v("的底层命令"),e("code",[t._v("symbolic-ref")]),t._v("来实现对"),e("code",[t._v("HEAD")]),t._v("文件内容的修改；")]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("git")]),t._v("中的命令可分为两类："),e("strong",[t._v("高级命令")]),t._v("和"),e("strong",[t._v("底层命令")]),t._v("；之前介绍的"),e("code",[t._v("git add")]),t._v(" 等都是高级命令；")])]),t._v(" "),e("p",[t._v("读取：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/34.png",alt:"image-20200329150120113"}})]),t._v(" "),e("p",[t._v("写入：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/35.png",alt:"image-20200329150239094"}})]),t._v(" "),e("p",[t._v("要注意格式："),e("code",[t._v("refs/heads/develop")]),t._v("；")]),t._v(" "),e("p",[t._v("查看"),e("code",[t._v("ORIG_HEAD")]),t._v("文件：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/36.png",alt:"image-20200329150514036"}})]),t._v(" "),e("p",[t._v("里面是一个"),e("code",[t._v("SHA1")]),t._v("值，查看当前的提交信息：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/37.png",alt:"image-20200329150643422"}})]),t._v(" "),e("p",[t._v("可以发现，"),e("code",[t._v("ORIG_HEAD")]),t._v("里面的"),e("code",[t._v("SHA1")]),t._v("值就是最新一次提交的"),e("code",[t._v("SHA1")]),t._v("值。")]),t._v(" "),e("p",[t._v("查看"),e("code",[t._v("FETCH_HEAD")]),t._v("文件：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/38.png",alt:"image-20200329150904196"}})]),t._v(" "),e("p",[t._v("里面有两个信息，一个是最新提交的"),e("code",[t._v("commit ID")]),t._v("，另一个是提交信息。")]),t._v(" "),e("p",[t._v("所以，对于"),e("code",[t._v("git")]),t._v("而言"),e("code",[t._v("commit ID")]),t._v("是十分重要的信息，通过这个"),e("code",[t._v("SHA1")]),t._v("值可以回溯或查找需要的提交。")]),t._v(" "),e("h3",{attrs:{id:"_3-git-merge原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-git-merge原理"}},[t._v("#")]),t._v(" 3."),e("code",[t._v("git merge")]),t._v("原理")]),t._v(" "),e("h4",{attrs:{id:"过程图解"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#过程图解"}},[t._v("#")]),t._v(" 过程图解")]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("在新分支上进行提交操作")])]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/39.png",alt:"image-20200406131605850"}})]),t._v(" "),e("p",[t._v("上图表示在"),e("code",[t._v("dev")]),t._v("分支上进行了一次提交，此时：")]),t._v(" "),e("ul",[e("li",[t._v("分支"),e("code",[t._v("master")]),t._v("的提交记录由："),e("code",[t._v("A")]),t._v("、"),e("code",[t._v("B")]),t._v("和"),e("code",[t._v("C")]),t._v("组成；")]),t._v(" "),e("li",[t._v("而分支"),e("code",[t._v("dev")]),t._v("的提交历史则由："),e("code",[t._v("A")]),t._v("、"),e("code",[t._v("B")]),t._v("、"),e("code",[t._v("C")]),t._v("和"),e("code",[t._v("D")]),t._v("组成；")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("对两分支进行合并操作")])]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/40.png",alt:"image-20200406131708763"}})]),t._v(" "),e("p",[t._v("在"),e("code",[t._v("master")]),t._v("分支上执行："),e("code",[t._v("git merge dev")]),t._v("将"),e("code",[t._v("dev")]),t._v("分支的内容"),e("strong",[t._v("合并")]),t._v("到了"),e("code",[t._v("master")]),t._v("分支上；这种合并方式叫做："),e("code",[t._v("Fast-forward")]),t._v("，"),e("strong",[t._v("没有冲突")]),t._v("，改变的只是"),e("code",[t._v("master")]),t._v("指针的指向；")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/41.png",alt:"image-20200310180632403"}})])])]),t._v(" "),e("h4",{attrs:{id:"详细过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#详细过程"}},[t._v("#")]),t._v(" 详细过程")]),t._v(" "),e("p",[e("strong",[t._v("在执行合并操作前：")])]),t._v(" "),e("ul",[e("li",[t._v("在"),e("code",[t._v("master")]),t._v("分支上查看该分支的提交记录：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/42.png",alt:"image-20200413135649151"}})]),t._v(" "),e("ul",[e("li",[t._v("在"),e("code",[t._v("dev")]),t._v("分支上查看该分支的提交记录：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/43.png",alt:"image-20200413135632944"}})]),t._v(" "),e("p",[t._v("可以看到"),e("code",[t._v("dev")]),t._v("分支只是比"),e("code",[t._v("master")]),t._v("分支多进行了一次提交（"),e("code",[t._v("dev1")]),t._v("），两分支状态如下图所示：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/44.png",alt:"image-20200413140621228"}})]),t._v(" "),e("p",[e("strong",[t._v("执行合并操作：")])]),t._v(" "),e("p",[t._v("先切换到"),e("code",[t._v("master")]),t._v("分支，然后执行"),e("code",[t._v("git merge dev")]),t._v("合并"),e("code",[t._v("dev")]),t._v("分支：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/45.png",alt:"image-20200413135914872"}})]),t._v(" "),e("p",[t._v("可以看到使用了"),e("code",[t._v("Fast-forward")]),t._v("方式进行合并，合并后两分支状态如下图所示：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/46.png",alt:"image-20200413140634456"}})]),t._v(" "),e("p",[t._v("合并后，"),e("code",[t._v("HEAD")]),t._v("同时指向了"),e("code",[t._v("master")]),t._v("和"),e("code",[t._v("dev")]),t._v("分支；并且"),e("code",[t._v("master")]),t._v("和"),e("code",[t._v("dev")]),t._v("分支的提交历史完全一致；这就说明了：使用**"),e("code",[t._v("Fast-forward")]),t._v("（快进合并）**方式进行分支合并，只会改变"),e("code",[t._v("master")]),t._v("分支指针的指向；")]),t._v(" "),e("h3",{attrs:{id:"_4-fast-forward"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-fast-forward"}},[t._v("#")]),t._v(" 4."),e("code",[t._v("Fast-forward")])]),t._v(" "),e("ul",[e("li",[t._v("默认情况下，合并分支时"),e("code",[t._v("git")]),t._v("会使用"),e("code",[t._v("Fast-forward")]),t._v("模式；")]),t._v(" "),e("li",[t._v("在这种模式下，删除分支会"),e("strong",[t._v("丢弃")]),t._v("分支信息；")]),t._v(" "),e("li",[t._v("进行分支合并操作时加上"),e("code",[t._v("--no-ff")]),t._v(" 参数会禁止使用"),e("code",[t._v("Fast-forward")]),t._v("方式，这样会多出一次提交记录；")])]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("ff")]),t._v("表示"),e("code",[t._v("Fast-forward")]),t._v("。")])]),t._v(" "),e("p",[t._v("具体演示如下：")]),t._v(" "),e("h4",{attrs:{id:"使用fast-forward"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用fast-forward"}},[t._v("#")]),t._v(" 使用"),e("code",[t._v("Fast-forward")])]),t._v(" "),e("p",[t._v("首先，查看"),e("code",[t._v("master")]),t._v("分支上最新的"),e("code",[t._v("3")]),t._v("次提交：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/47.png",alt:"image-20200413140911195"}})]),t._v(" "),e("p",[t._v("此时两分支的状态为：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/48.png",alt:"image-20200413141208043"}})]),t._v(" "),e("p",[t._v("随后在"),e("code",[t._v("dev")]),t._v("分支上新增一次提交："),e("code",[t._v("dev2")]),t._v("。查看"),e("code",[t._v("dev")]),t._v("分支上最新的"),e("code",[t._v("3")]),t._v("次提交：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/49.png",alt:"image-20200413141111031"}})]),t._v(" "),e("p",[t._v("此时两个分支的状态为：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/50.png",alt:"image-20200413141246153"}})]),t._v(" "),e("p",[t._v("切换回"),e("code",[t._v("master")]),t._v("分支，通过"),e("code",[t._v("git merge dev")]),t._v("合并"),e("code",[t._v("dev")]),t._v("分支，此时默认采用"),e("code",[t._v("Fast-forward")]),t._v("方式：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/51.png",alt:"image-20200413141412571"}})]),t._v(" "),e("p",[t._v("可以看到合并后，"),e("code",[t._v("master")]),t._v("直接指向了"),e("code",[t._v("dev")]),t._v("的最新提交，并没有产生新的提交。合并后两分支的状态如下所示：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/52.png",alt:"image-20200413141554807"}})]),t._v(" "),e("p",[t._v("由此验证了"),e("code",[t._v("Fast-forward")]),t._v("方式只会改变分支指针的指向。")]),t._v(" "),e("h4",{attrs:{id:"禁用fast-forward"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#禁用fast-forward"}},[t._v("#")]),t._v(" 禁用"),e("code",[t._v("Fast-forward")])]),t._v(" "),e("p",[t._v("合并时可以通过：")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("git merge --no-ff dev\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("禁用"),e("code",[t._v("Fast-forward")]),t._v("模式。")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("继续在"),e("code",[t._v("dev")]),t._v("分支新增一次提交："),e("code",[t._v("dev3")]),t._v("。然后查看"),e("code",[t._v("dev")]),t._v("分支上最新的"),e("code",[t._v("3")]),t._v("次提交：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/53.png",alt:"image-20200413142011002"}})])]),t._v(" "),e("li",[e("p",[t._v("不修改"),e("code",[t._v("master")]),t._v("分支，查看其最新的"),e("code",[t._v("3")]),t._v("次提交：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/54.png",alt:"image-20200413142116641"}})]),t._v(" "),e("p",[t._v("此时两个分支的状态为：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/55.png",alt:"image-20200413142145430"}})])]),t._v(" "),e("li",[e("p",[t._v("然后，在"),e("code",[t._v("master")]),t._v("分支上不使用"),e("code",[t._v("Fast-forward")]),t._v("方式合并"),e("code",[t._v("dev")]),t._v("分支。合并命令采用：")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("git merge --no-ff dev\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("执行后进入如下的"),e("code",[t._v("vim")]),t._v("编辑器界面，要求我们填写提交注释：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/56.png",alt:"image-20200413142507135"}})])])]),t._v(" "),e("p",[t._v("这说明不使用"),e("code",[t._v("Fast-forward")]),t._v("方式合并分支，会触发了一次"),e("strong",[t._v("提交")]),t._v("。填写提交注释后完成提交操作，合并完成后，查看"),e("code",[t._v("master")]),t._v("分支的提交记录：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/57.png",alt:"image-20200413142907282"}})]),t._v(" "),e("p",[t._v("可以发现禁用了"),e("code",[t._v("Fast-forward")]),t._v("模式的合并会比"),e("code",[t._v("dev")]),t._v("分支多产生一次提交："),e("code",[t._v("Merge branch 'dev'")]),t._v("，即使合并后的内容是一样的。此时两分支的状态为：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/58.png",alt:"image-20200413144533217"}})]),t._v(" "),e("p",[t._v("由此验证了，禁用"),e("code",[t._v("Fast-forward")]),t._v("方式合并，会多出一个表示合并的提交记录。")]),t._v(" "),e("h3",{attrs:{id:"_5-合并冲突"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-合并冲突"}},[t._v("#")]),t._v(" 5.合并冲突")]),t._v(" "),e("p",[t._v("合并的两分支只有一条分支发生了改变，并且其中一分支是基于另一分支创建的。比如上述的"),e("code",[t._v("master")]),t._v("与"),e("code",[t._v("dev")]),t._v("分支，两分支没有分岔，此时不会出现合并冲突；"),e("code",[t._v("git")]),t._v("会通过"),e("code",[t._v("Fast-forward")]),t._v("方式自动完成合并操作；")]),t._v(" "),e("p",[t._v("但是，当合并的两分支"),e("strong",[t._v("都发生改变时")]),t._v("，即分支出现分岔，如下图所示。此时就需要解决冲突后手动合并分支了：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/59.png",alt:"image-20200413145058222"}})]),t._v(" "),e("p",[t._v("具体演示如下：")]),t._v(" "),e("h4",{attrs:{id:"合并前"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#合并前"}},[t._v("#")]),t._v(" 合并前")]),t._v(" "),e("p",[t._v("首先，分别对两分支上的"),e("code",[t._v("test.txt")]),t._v("文件进行修改，并分别将修改"),e("strong",[t._v("提交")]),t._v("到各自的分支；")]),t._v(" "),e("ul",[e("li",[t._v("在"),e("code",[t._v("master")]),t._v("分支上进行新的提交："),e("code",[t._v("mas3")]),t._v("，然后查看文件"),e("code",[t._v("test.txt")]),t._v("内容和分支提交记录：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/60.png",alt:"image-20200413150045837"}})]),t._v(" "),e("ul",[e("li",[t._v("在"),e("code",[t._v("dev")]),t._v("分支上进行新的提交："),e("code",[t._v("dev1")]),t._v("，然后查看文件"),e("code",[t._v("test.txt")]),t._v("内容和分支提交记录：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/61.png",alt:"image-20200413150139932"}})]),t._v(" "),e("p",[t._v("可见两分支的提交记录只有最新一次提交不一样：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/62.png",alt:"image-20200413153145295"}})]),t._v(" "),e("h4",{attrs:{id:"合并后"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#合并后"}},[t._v("#")]),t._v(" 合并后")]),t._v(" "),e("p",[t._v("在"),e("code",[t._v("master")]),t._v("分支上，通过"),e("code",[t._v("git merge dev")]),t._v("合并"),e("code",[t._v("dev")]),t._v("分支时，会在共同修改的"),e("code",[t._v("test.txt")]),t._v("文件中出现合并冲突，如下图所示：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/63.png",alt:"image-20200413150334009"}})]),t._v(" "),e("p",[t._v("出现冲突的原因为：两个分支都对同一个文件"),e("code",[t._v("test.txt")]),t._v("进行了修改，"),e("code",[t._v("git")]),t._v("合并时并不知道以哪个分支的修改为标准。所以不能采用"),e("code",[t._v("Fast-forward")]),t._v("方式自动合并，需要解决冲突，手动合并。")]),t._v(" "),e("h4",{attrs:{id:"手动合并过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#手动合并过程"}},[t._v("#")]),t._v(" 手动合并过程")]),t._v(" "),e("p",[t._v("手动合并操作需要分如下三步进行：")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("第一步：选择需要保留的内容，手动解决合并冲突；")])])]),t._v(" "),e("p",[t._v("此时进入发生合并冲突的"),e("code",[t._v("test.txt")]),t._v("文件：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/64.png",alt:"image-20200413150400943"}})]),t._v(" "),e("p",[t._v("会出现典型的冲突呈现方式（此时"),e("code",[t._v("HEAD")]),t._v("指向的是"),e("code",[t._v("master")]),t._v("分支），其中：")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("<<<HEAD")]),t._v("与"),e("code",[t._v(">>>dev")]),t._v("之间的内容表示：两分支上"),e("code",[t._v("test.txt")]),t._v("文件的不同之处；")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("<<<HEAD")]),t._v("与"),e("code",[t._v("===")]),t._v("之间的内容表示：当前分支"),e("code",[t._v("master")]),t._v("对"),e("code",[t._v("test.txt")]),t._v("文件的修改；")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("===")]),t._v("与"),e("code",[t._v(">>>dev")]),t._v("之间的内容表示："),e("code",[t._v("dev")]),t._v("分支对"),e("code",[t._v("test.txt")]),t._v("文件的修改；")])])]),t._v(" "),e("p",[t._v("此时只需要在"),e("code",[t._v("test.txt")]),t._v("中保留想要的内容即可，例如：将两分支对"),e("code",[t._v("test.txt")]),t._v("的修改都进行保存，删除"),e("code",[t._v("3、5、7")]),t._v("行多余的内容：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/65.png",alt:"image-20200413150810935"}})]),t._v(" "),e("p",[t._v("除此之外，还可以通过"),e("code",[t._v("git mergetool")]),t._v("指令，调用"),e("code",[t._v("vimdiff")]),t._v("工具进入"),e("code",[t._v("vim")]),t._v("编辑器，来解决"),e("code",[t._v("test.txt")]),t._v("文件的冲突：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/65.1.png",alt:"image-20200413212456463"}})]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/65.2.png",alt:"image-20200413212331710"}})]),t._v(" "),e("p",[t._v("在实际开发中，我们很少手动进行合并，而是借助于一些工具来实现。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("第二步：使用"),e("code",[t._v("git add test.txt")]),t._v("将手动解决冲突时对"),e("code",[t._v("test.txt")]),t._v("的修改提交到暂存区；")])])]),t._v(" "),e("p",[t._v("编辑完毕后，可以看到此时仍然处于合并过程中（"),e("code",[t._v("MERGING")]),t._v("）。通过"),e("code",[t._v("git status")]),t._v(" 查看状态，发现手动解决冲突时对"),e("code",[t._v("test.txt")]),t._v("文件的修改操作还在工作区中，需要通过"),e("code",[t._v("git add test.txt")]),t._v("将这一修改纳入暂存区，继续进行合并：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/66.png",alt:"image-20200413151548133"}})]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("第三步：通过"),e("code",[t._v("git commit -m '合并注释'")]),t._v("将手动解决冲突时对"),e("code",[t._v("test.txt")]),t._v("的修改进行提交，完成合并操作；")])])]),t._v(" "),e("p",[t._v("如果需要填写较多的合并注释，可以通过"),e("code",[t._v("git commit")]),t._v("进入"),e("code",[t._v("vim")]),t._v("编辑器编辑。提交后，完成整个手动合并过程。")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/67.png",alt:"image-20200310185125770"}})]),t._v(" "),e("p",[t._v("完成手动合并分支后，查看两分支的提交历史：")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("master")]),t._v("分支上的提交历史：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/68.png",alt:"image-20200413152813941"}})]),t._v(" "),e("ul",[e("li",[e("code",[t._v("dev")]),t._v("分支上的提交历史：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/69.png",alt:"image-20200413152928725"}})]),t._v(" "),e("p",[t._v("可以发现此时两分支转变为了可以通过"),e("code",[t._v("Fast forward")]),t._v("方式合并的形式了，如图所示：")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("手动解决冲突前：")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/70.png",alt:"image-20200413153154756"}})]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("手动解决冲突后：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/71.png",alt:"image-20200413153427160"}})])])]),t._v(" "),e("h4",{attrs:{id:"同步两分支"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#同步两分支"}},[t._v("#")]),t._v(" 同步两分支")]),t._v(" "),e("p",[t._v("若想将"),e("code",[t._v("dev")]),t._v("和"),e("code",[t._v("master")]),t._v("分支上的内容进行同步，只需要在"),e("code",[t._v("dev")]),t._v("分支中通过"),e("code",[t._v("git merge master")]),t._v(" 合并"),e("code",[t._v("master")]),t._v("分支即可。此时就可以使用"),e("code",[t._v("Fast-forward")]),t._v("方式进行合并了，合并结果如下图所示：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/72.png",alt:"image-20200413153555178"}})]),t._v(" "),e("p",[e("strong",[t._v("验证：")])]),t._v(" "),e("p",[t._v("合并后，查看"),e("code",[t._v("dev")]),t._v("分支的提交历史：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://ahuntsun.gitee.io/blogimagebed/img/git/lesson3/73.png",alt:"image-20200413154132053"}})]),t._v(" "),e("p",[t._v("可以看到"),e("code",[t._v("HEAD")]),t._v("同时指向"),e("code",[t._v("dev")]),t._v("与"),e("code",[t._v("master")]),t._v("，即三个指针都指向了最新的一次提交，符合上述分析得出的结论；")]),t._v(" "),e("p",[t._v("经过上面的讨论，不难看出：合并分支的实质就是不同提交的合并，以及"),e("code",[t._v("HEAD")]),t._v("和分支指针的移动；")])])}),[],!1,null,null,null);v.default=a.exports}}]);