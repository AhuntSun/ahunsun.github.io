<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>36.HTTPS：让数据传输更安全 | AhuntSun</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="https://blog-static.cnblogs.com/files/AhuntSun-blog/sun1.ico">
    <link rel="stylesheet" href="/css/style.css">
    <script charset="utf-8" src="/js/main.js"></script>
    <meta name="description" content="🌕今日事,今日毕🌕">
    <meta name="keywords" content="AhuntSun, vuepress博客, 学习, 分享">
    <meta name="author" content="AhuntSun">
    <link rel="preload" href="/assets/css/0.styles.265dc05e.css" as="style"><link rel="preload" href="/assets/js/app.17791675.js" as="script"><link rel="preload" href="/assets/js/2.39079bb7.js" as="script"><link rel="preload" href="/assets/js/52.325c372e.js" as="script"><link rel="prefetch" href="/assets/js/10.add3d082.js"><link rel="prefetch" href="/assets/js/100.ccbe9b93.js"><link rel="prefetch" href="/assets/js/101.29c2e23b.js"><link rel="prefetch" href="/assets/js/102.2774cf3b.js"><link rel="prefetch" href="/assets/js/103.b460c3e4.js"><link rel="prefetch" href="/assets/js/104.62b41088.js"><link rel="prefetch" href="/assets/js/105.aa829678.js"><link rel="prefetch" href="/assets/js/106.adee0913.js"><link rel="prefetch" href="/assets/js/107.3b59ac9c.js"><link rel="prefetch" href="/assets/js/108.fb65aab2.js"><link rel="prefetch" href="/assets/js/109.7e20d28f.js"><link rel="prefetch" href="/assets/js/11.1eb9cf4e.js"><link rel="prefetch" href="/assets/js/110.681d19ab.js"><link rel="prefetch" href="/assets/js/111.5e25f6c8.js"><link rel="prefetch" href="/assets/js/112.647aadb3.js"><link rel="prefetch" href="/assets/js/113.55d09bc9.js"><link rel="prefetch" href="/assets/js/114.427133cd.js"><link rel="prefetch" href="/assets/js/115.47e0a952.js"><link rel="prefetch" href="/assets/js/116.8a2e351c.js"><link rel="prefetch" href="/assets/js/117.c56ceb44.js"><link rel="prefetch" href="/assets/js/118.11089bd0.js"><link rel="prefetch" href="/assets/js/119.84076b4f.js"><link rel="prefetch" href="/assets/js/12.b46051f2.js"><link rel="prefetch" href="/assets/js/13.73cf4b83.js"><link rel="prefetch" href="/assets/js/14.bd55635b.js"><link rel="prefetch" href="/assets/js/15.287d3634.js"><link rel="prefetch" href="/assets/js/16.bb0e2ab9.js"><link rel="prefetch" href="/assets/js/17.b1d225ed.js"><link rel="prefetch" href="/assets/js/18.3a1853ca.js"><link rel="prefetch" href="/assets/js/19.89d76b32.js"><link rel="prefetch" href="/assets/js/20.1ac6287c.js"><link rel="prefetch" href="/assets/js/21.f7c3c2ce.js"><link rel="prefetch" href="/assets/js/22.7276cd1b.js"><link rel="prefetch" href="/assets/js/23.064f805c.js"><link rel="prefetch" href="/assets/js/24.c202de18.js"><link rel="prefetch" href="/assets/js/25.911ea669.js"><link rel="prefetch" href="/assets/js/26.c857c24b.js"><link rel="prefetch" href="/assets/js/27.1085839d.js"><link rel="prefetch" href="/assets/js/28.72f65b12.js"><link rel="prefetch" href="/assets/js/29.f9dd7695.js"><link rel="prefetch" href="/assets/js/3.93254602.js"><link rel="prefetch" href="/assets/js/30.244da86b.js"><link rel="prefetch" href="/assets/js/31.b6e058d6.js"><link rel="prefetch" href="/assets/js/32.d5ce5b2a.js"><link rel="prefetch" href="/assets/js/33.d61273e9.js"><link rel="prefetch" href="/assets/js/34.93c55716.js"><link rel="prefetch" href="/assets/js/35.1a40f30d.js"><link rel="prefetch" href="/assets/js/36.0e32baa9.js"><link rel="prefetch" href="/assets/js/37.b85ca083.js"><link rel="prefetch" href="/assets/js/38.8b396a88.js"><link rel="prefetch" href="/assets/js/39.890255c2.js"><link rel="prefetch" href="/assets/js/4.e00be33d.js"><link rel="prefetch" href="/assets/js/40.5c12a9b3.js"><link rel="prefetch" href="/assets/js/41.301f6200.js"><link rel="prefetch" href="/assets/js/42.099f5f31.js"><link rel="prefetch" href="/assets/js/43.53443cdb.js"><link rel="prefetch" href="/assets/js/44.ff664e03.js"><link rel="prefetch" href="/assets/js/45.f61b7d16.js"><link rel="prefetch" href="/assets/js/46.454797af.js"><link rel="prefetch" href="/assets/js/47.c3d906ff.js"><link rel="prefetch" href="/assets/js/48.cc996c3b.js"><link rel="prefetch" href="/assets/js/49.616f7e67.js"><link rel="prefetch" href="/assets/js/5.0871711b.js"><link rel="prefetch" href="/assets/js/50.97563535.js"><link rel="prefetch" href="/assets/js/51.9ac48405.js"><link rel="prefetch" href="/assets/js/53.30604ed9.js"><link rel="prefetch" href="/assets/js/54.c97d6fda.js"><link rel="prefetch" href="/assets/js/55.db98bd5e.js"><link rel="prefetch" href="/assets/js/56.050fc13b.js"><link rel="prefetch" href="/assets/js/57.2c1df219.js"><link rel="prefetch" href="/assets/js/58.a2de3cd3.js"><link rel="prefetch" href="/assets/js/59.3541fb22.js"><link rel="prefetch" href="/assets/js/6.15dd6e23.js"><link rel="prefetch" href="/assets/js/60.2c2b14f6.js"><link rel="prefetch" href="/assets/js/61.f7dc0d6e.js"><link rel="prefetch" href="/assets/js/62.9ff35cf7.js"><link rel="prefetch" href="/assets/js/63.a0416301.js"><link rel="prefetch" href="/assets/js/64.9ac24a92.js"><link rel="prefetch" href="/assets/js/65.3e45996c.js"><link rel="prefetch" href="/assets/js/66.8e93fefd.js"><link rel="prefetch" href="/assets/js/67.764dbdfd.js"><link rel="prefetch" href="/assets/js/68.0659ad78.js"><link rel="prefetch" href="/assets/js/69.54ee1588.js"><link rel="prefetch" href="/assets/js/7.e8ba4578.js"><link rel="prefetch" href="/assets/js/70.0549ff7f.js"><link rel="prefetch" href="/assets/js/71.4686b267.js"><link rel="prefetch" href="/assets/js/72.c7e2d85a.js"><link rel="prefetch" href="/assets/js/73.79530a41.js"><link rel="prefetch" href="/assets/js/74.144ea233.js"><link rel="prefetch" href="/assets/js/75.48b74af8.js"><link rel="prefetch" href="/assets/js/76.67b22ee0.js"><link rel="prefetch" href="/assets/js/77.383fb255.js"><link rel="prefetch" href="/assets/js/78.101172c6.js"><link rel="prefetch" href="/assets/js/79.9398ff67.js"><link rel="prefetch" href="/assets/js/8.cdb0f5de.js"><link rel="prefetch" href="/assets/js/80.3440a347.js"><link rel="prefetch" href="/assets/js/81.4f247fd6.js"><link rel="prefetch" href="/assets/js/82.8ddc79b5.js"><link rel="prefetch" href="/assets/js/83.971fde97.js"><link rel="prefetch" href="/assets/js/84.29d8cfe1.js"><link rel="prefetch" href="/assets/js/85.37444f84.js"><link rel="prefetch" href="/assets/js/86.34d6b9f4.js"><link rel="prefetch" href="/assets/js/87.404db0e2.js"><link rel="prefetch" href="/assets/js/88.ec6493a6.js"><link rel="prefetch" href="/assets/js/89.440e8108.js"><link rel="prefetch" href="/assets/js/9.6b234095.js"><link rel="prefetch" href="/assets/js/90.333f0ccd.js"><link rel="prefetch" href="/assets/js/91.5cbfd507.js"><link rel="prefetch" href="/assets/js/92.442b835e.js"><link rel="prefetch" href="/assets/js/93.4a01402f.js"><link rel="prefetch" href="/assets/js/94.807f3e25.js"><link rel="prefetch" href="/assets/js/95.2f76024c.js"><link rel="prefetch" href="/assets/js/96.d62ce0b3.js"><link rel="prefetch" href="/assets/js/97.162bd2f0.js"><link rel="prefetch" href="/assets/js/98.ed1ddc87.js"><link rel="prefetch" href="/assets/js/99.d40596ea.js">
    <link rel="stylesheet" href="/assets/css/0.styles.265dc05e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">AhuntSun</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/navitem/git/" class="nav-link">
  Git应用详解
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          理论篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/theory/" class="nav-link">
  JavaScript版基础知识
</a></li></ul></li><li class="dropdown-item"><h4>
          实战篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/example/2offer/" class="nav-link">
  剑指offer
</a></li><li class="dropdown-subitem"><a href="/navitem/algorithm/example/leecode/" class="nav-link">
  leecode精选
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/navitem/article/" class="nav-link router-link-active">
  好文转载
</a></div><div class="nav-item"><a href="/navitem/essay/" class="nav-link">
  随笔整合
</a></div><div class="nav-item"><a href="/navitem/demo/" class="nav-link">
  实战Demo
</a></div><div class="nav-item"><a href="/navitem/esun/" class="nav-link">
  eSun-UI
</a></div><div class="nav-item"><a href="/navitem/tech/" class="nav-link">
  面试宝典
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cubic-bezier.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  贝塞尔曲线
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://easings.net/en" target="_blank" rel="noopener noreferrer" class="nav-link external">
  加速度曲线速查
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用网站" class="dropdown-title"><span class="title">实用网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/navitem/website/1/" class="nav-link">
  图片编辑
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/2/" class="nav-link">
  样式设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/3/" class="nav-link">
  论坛网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/4/" class="nav-link">
  在线学习
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/5/" class="nav-link">
  创新社区
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/6/" class="nav-link">
  优质图库
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/7/" class="nav-link">
  UI设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/8/" class="nav-link">
  工具网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/9/" class="nav-link">
  JavaScript库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="联系我" class="dropdown-title"><span class="title">联系我</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/AhuntSun-blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_43425487" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/user/5dea331b518825123e7ae8d4" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AhuntSun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/ahuntsun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/navitem/git/" class="nav-link">
  Git应用详解
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          理论篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/theory/" class="nav-link">
  JavaScript版基础知识
</a></li></ul></li><li class="dropdown-item"><h4>
          实战篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/example/2offer/" class="nav-link">
  剑指offer
</a></li><li class="dropdown-subitem"><a href="/navitem/algorithm/example/leecode/" class="nav-link">
  leecode精选
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/navitem/article/" class="nav-link router-link-active">
  好文转载
</a></div><div class="nav-item"><a href="/navitem/essay/" class="nav-link">
  随笔整合
</a></div><div class="nav-item"><a href="/navitem/demo/" class="nav-link">
  实战Demo
</a></div><div class="nav-item"><a href="/navitem/esun/" class="nav-link">
  eSun-UI
</a></div><div class="nav-item"><a href="/navitem/tech/" class="nav-link">
  面试宝典
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cubic-bezier.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  贝塞尔曲线
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://easings.net/en" target="_blank" rel="noopener noreferrer" class="nav-link external">
  加速度曲线速查
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用网站" class="dropdown-title"><span class="title">实用网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/navitem/website/1/" class="nav-link">
  图片编辑
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/2/" class="nav-link">
  样式设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/3/" class="nav-link">
  论坛网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/4/" class="nav-link">
  在线学习
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/5/" class="nav-link">
  创新社区
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/6/" class="nav-link">
  优质图库
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/7/" class="nav-link">
  UI设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/8/" class="nav-link">
  工具网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/9/" class="nav-link">
  JavaScript库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="联系我" class="dropdown-title"><span class="title">联系我</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/AhuntSun-blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_43425487" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/user/5dea331b518825123e7ae8d4" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AhuntSun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/ahuntsun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Part1</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Part2</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Part3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Part4</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Part5</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Part6</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/navitem/article/notes/browser/notes/29.html" class="sidebar-link">29.HTTP1：HTTP性能优化</a></li><li><a href="/navitem/article/notes/browser/notes/30.html" class="sidebar-link">30.HTTP2：如何提升网络速度</a></li><li><a href="/navitem/article/notes/browser/notes/31.html" class="sidebar-link">31.HTTP3：甩掉TCP、TCL包袱 构建高效网络</a></li><li><a href="/navitem/article/notes/browser/notes/32.html" class="sidebar-link">32.同源策略：为什么XMLHttpRequst不能跨域请求资源</a></li><li><a href="/navitem/article/notes/browser/notes/33.html" class="sidebar-link">33.跨站脚本攻击XSS：为什么Cookie中有httpOnly属性</a></li><li><a href="/navitem/article/notes/browser/notes/34.html" class="sidebar-link">34.CSRF攻击：陌生链接不要随便点</a></li><li><a href="/navitem/article/notes/browser/notes/35.html" class="sidebar-link">35.沙盒：页面和系统之间的隔离墙</a></li><li><a href="/navitem/article/notes/browser/notes/36.html" aria-current="page" class="active sidebar-link">36.HTTPS：让数据传输更安全</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/navitem/article/notes/browser/notes/36.html#在-http-协议栈中引入安全层" class="sidebar-link">在 HTTP 协议栈中引入安全层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/navitem/article/notes/browser/notes/36.html#第一版：使用对称加密" class="sidebar-link">第一版：使用对称加密</a></li><li class="sidebar-sub-header"><a href="/navitem/article/notes/browser/notes/36.html#第二版：使用非对称加密" class="sidebar-link">第二版：使用非对称加密</a></li><li class="sidebar-sub-header"><a href="/navitem/article/notes/browser/notes/36.html#第三版：对称加密和非对称加密搭配使用" class="sidebar-link">第三版：对称加密和非对称加密搭配使用</a></li><li class="sidebar-sub-header"><a href="/navitem/article/notes/browser/notes/36.html#第四版：添加数字证书" class="sidebar-link">第四版：添加数字证书</a></li></ul></li><li class="sidebar-sub-header"><a href="/navitem/article/notes/browser/notes/36.html#数字证书的申请和验证" class="sidebar-link">数字证书的申请和验证</a></li><li class="sidebar-sub-header"><a href="/navitem/article/notes/browser/notes/36.html#浏览器如何验证数字证书" class="sidebar-link">浏览器如何验证数字证书</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_36-https：让数据传输更安全"><a href="#_36-https：让数据传输更安全" class="header-anchor">#</a> 36.HTTPS：让数据传输更安全</h1> <p>浏览器安全主要划分为三大块内容：<strong>页面安全</strong>、<strong>系统安全</strong>和<strong>网络安全</strong>。前面我们用四篇文章介绍了页面安全和系统安全，也聊了浏览器和 <code>Web</code> 开发者是如何应对各种类型的攻击，本文是我们专栏的最后一篇，我们就接着来聊聊<strong>网络安全协议</strong> <code>HTTPS</code>。</p> <p>我们先从 <code>HTTP</code> 的明文传输的特性讲起，在上一个模块的三篇文章中我们分析过，起初设计 <code>HTTP</code> 协议的目的很单纯，就是为了传输超文本文件，那时候也没有太强的加密传输的数据需求，所以 <code>HTTP</code> 一直保持着明文传输数据的特征。但这样的话，在传输过程中的每一个环节，数据都有可能<strong>被窃取</strong>或者<strong>篡改</strong>，这也意味着你和服务器之间还可能有个中间人，你们在通信过程中的一切内容都在中间人的掌握中，如下图：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/browser/part6/ls36/1.png" alt=""></p> <p>从上图可以看出，我们使用 <code>HTTP</code> 传输的内容很容易被中间人窃取、伪造和篡改，通常我们把这种攻击方式称为<strong>中间人攻击</strong></p> <p>具体来讲，在将 <code>HTTP</code> 数据提交给 <code>TCP</code> 层之后，数据会经过<strong>用户电脑</strong>、<strong><code>WiFi</code> 路由器</strong>、<strong>运营商</strong>和<strong>目标服务器</strong>，在这中间的每个环节中，数据都有可能被窃取或篡改。比如用户电脑被黑客安装了恶意软件，那么恶意软件就能抓取和篡改所发出的 <code>HTTP</code> 请求的内容。或者用户一不小心连接上了 <code>WiFi</code> 钓鱼路由器，那么数据也都能被黑客抓取或篡改。</p> <h2 id="在-http-协议栈中引入安全层"><a href="#在-http-协议栈中引入安全层" class="header-anchor">#</a> 在 <code>HTTP</code> 协议栈中引入安全层</h2> <p>鉴于 <code>HTTP</code> 的明文传输使得传输过程毫无安全性可言，且制约了网上购物、在线转账等一系列场景应用，于是倒逼着我们要引入<strong>加密方案</strong></p> <p>从 <code>HTTP</code> 协议栈层面来看，我们可以在 <code>TCP</code> 和 <code>HTTP</code> 之间插入一个安全层，所有经过安全层的数据都会被加密或者解密，你可以参考下图：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/browser/part6/ls36/2.png" alt=""></p> <p>从图中我们可以看出 <code>HTTPS</code> 并非是一个新的协议，通常 <code>HTTP</code> 直接和 <code>TCP</code> 通信，<code>HTTPS</code> 则先和<strong>安全层通信</strong>，然后安全层再和 <code>TCP</code> 层通信。也就是说 <code>HTTPS</code> 所有的安全核心都在<strong>安全层</strong>，它不会影响到上面的 <code>HTTP</code> 协议，也不会影响到下面的 <code>TCP/IP</code>，因此要搞清楚 <code>HTTPS</code> 是如何工作的，就要弄清楚安全层是怎么工作的。</p> <p>总的来说，安全层有两个主要的职责：<strong>对发起 <code>HTTP</code> 请求的数据进行加密操作</strong>和<strong>对接收到 <code>HTTP</code> 的内容进行解密操作</strong></p> <p>我们知道了安全层最重要的就是加解密，那么接下来我们就利用这个安全层，一步一步实现一个从简单到复杂的 <code>HTTPS</code> 协议。</p> <h3 id="第一版：使用对称加密"><a href="#第一版：使用对称加密" class="header-anchor">#</a> 第一版：使用对称加密</h3> <p>提到加密，最简单的方式是使用<strong>对称加密</strong>。所谓<strong>对称加密是指加密和解密都使用的是相同的密钥</strong></p> <p>了解了对称加密，下面我们就使用对称加密来实现第一版的 <code>HTTPS</code>。</p> <p>要在两台电脑上加解密同一个文件，我们至少需要知道加解密方式和密钥，因此，在 <code>HTTPS</code> 发送数据之前，浏览器和服务器之间需要<strong>协商加密方式</strong>和<strong>密钥</strong>，过程如下所示：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/browser/part6/ls36/3.png" alt=""></p> <p>通过上图我们可以看出，<code>HTTPS</code> 首先要<strong>协商加解密方式</strong>，这个过程就是 <code>HTTPS</code> 建立安全连接的过程。为了让加密的密钥更加难以破解，我们让服务器和客户端同时决定密钥，具体过程如下：</p> <ul><li>浏览器发送它所支持的<strong>加密套件列表</strong>和一个<strong>随机数</strong> <code>client-random</code>，这里的<strong>加密套件是指加密的方法</strong>，加密套件列表就是指浏览器<strong>能支持多少种加密方法列表</strong>。</li> <li>服务器会从加密套件列表中选取一个加密套件，然后还会生成一个<strong>随机数</strong> <code>service-random</code>，并将 <code>service-random</code> 和加密套件列表返回给浏览器。</li> <li>最后浏览器和服务器<strong>分别返回确认消息</strong>。</li></ul> <p>这样浏览器端和服务器端都有相同的 <code>client-random</code> 和 <code>service-random</code>了，然后它们再使用相同的方法将 <code>client-random</code> 和 <code>service-random</code> 混合起来生成一个<strong>密钥</strong> <code>master secret</code>，有了密钥 <code>master secret</code> 和加密套件之后，双方就可以进行数据的加密传输了。</p> <p>通过将对称加密应用在<strong>安全层</strong>上，我们实现了第一个版本的 <code>HTTPS</code>，虽然这个版本能够很好地工作，但是其中传输 <code>client-random</code> 和 <code>service-random</code> 的过程却是<strong>明文</strong>的，这意味着黑客也可以<strong>拿到协商的加密套件</strong>和<strong>双方的随机数</strong>，由于利用随机数<strong>合成密钥的算法</strong>是<strong>公开</strong>的，所以黑客拿到随机数之后，也可以合成密钥，这样数据依然可以被破解，那么黑客也就可以使用密钥来<strong>伪造</strong>或<strong>篡改数据</strong>了。</p> <h3 id="第二版：使用非对称加密"><a href="#第二版：使用非对称加密" class="header-anchor">#</a> 第二版：使用非对称加密</h3> <p>不过非对称加密能够解决这个问题，因此接下来我们就利用<strong>非对称加密</strong>来实现我们第二版的 <code>HTTPS</code>，不过在讨论具体的实现之前，我们先看看什么是非对称加密。</p> <p>和对称加密只有一个密钥不同，<strong>非对称加密算法有 <code>A</code>、<code>B</code> 两把密钥，如果你用 <code>A</code> 密钥来加密，那么只能使用 <code>B</code> 密钥来解密；反过来，如果你要 <code>B</code> 密钥来加密，那么只能用 <code>A</code> 密钥来解密</strong></p> <p>在 <code>HTTPS</code> 中，服务器会将其中的一个<strong>密钥</strong>通过<strong>明文</strong>的形式发送给浏览器，我们把这个密钥称为<strong>公钥</strong>，服务器自己留下的那个密钥称为<strong>私钥</strong>。顾名思义，<strong>公钥是每个人都能获取到的，而私钥只有服务器才能知道，不对任何人公开</strong>。下图是使用非对称加密改造的 <code>HTTPS</code> 协议：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/browser/part6/ls36/4.png" alt=""></p> <p>根据该图，我们来分析下使用非对称加密的请求流程。</p> <ul><li>首先浏览器还是发送<strong>加密套件列表</strong>给服务器。</li> <li>然后服务器会选择一个加密套件，不过和对称加密不同的是，使用非对称加密时服务器上需要有<strong>用于浏览器加密的公钥</strong>和<strong>服务器解密 <code>HTTP</code> 数据的私钥</strong>，由于公钥是给浏览器加密使用的，因此服务器会将加密套件和公钥一道发送给浏览器。</li> <li>最后就是浏览器和服务器返回确认消息。</li></ul> <p>这样浏览器端就有了服务器的<strong>公钥</strong>，在浏览器端向服务器端发送数据时，就可以使用该公钥来加密数据。由于公钥加密的数据只有<strong>私钥才能解密</strong>，所以即便黑客截获了数据和公钥，他也是无法使用公钥来解密数据的。</p> <ul><li><strong>第一个是非对称加密的效率太低</strong>。这会<strong>严重影响到加解密数据的速度</strong>，进而影响到用户打开页面的速度。</li> <li><strong>第二个是无法保证服务器发送给浏览器的数据安全</strong>。虽然浏览器端可以使用公钥来加密，但是服务器端只能采用私钥来加密，私钥加密只有公钥能解密，但黑客也是可以获取得到公钥的，这样就不能保证服务器端数据的安全了。</li></ul> <h3 id="第三版：对称加密和非对称加密搭配使用"><a href="#第三版：对称加密和非对称加密搭配使用" class="header-anchor">#</a> 第三版：对称加密和非对称加密搭配使用</h3> <p>基于以上两点原因，我们最终选择了一个更加完美的方案，那就是<strong>在传输数据阶段依然使用对称加密，但是对称加密的密钥我们采用非对称加密来传输</strong>。下图就是改造后的版本：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/browser/part6/ls36/5.png" alt=""></p> <p><strong>从图中可以看出，改造后的流程是这样的：</strong></p> <ul><li>首先浏览器向服务器发送<strong>对称加密套件列表</strong>、<strong>非对称加密套件列表</strong>和<strong>随机数 <code>client-random</code></strong>；</li> <li>服务器保存<strong>随机数 <code>client-random</code></strong>，<strong>选择对称加密</strong>和<strong>非对称加密的套件</strong>，然后<strong>生成随机数 <code>service-random</code></strong>，向浏览器发送选择的<strong>加密套件</strong>、<code>service-random</code> 和<strong>公钥</strong>；</li> <li>浏览器保存<strong>公钥</strong>，并利用 <code>client-random</code> 和 <code>service-random</code> 计算出来 <code>pre-master</code>，然后利用<strong>公钥</strong>对 <code>pre-master</code> 加密，并向服务器发送加密后的数据；</li> <li>最后服务器拿出自己的<strong>私钥</strong>，解密出 <code>pre-master</code> 数据，并返回确认消息。</li></ul> <p>到此为止，服务器和浏览器就有了共同的 <code>client-random</code>、<code>service-random</code> 和 <code>pre-master</code>，然后服务器和浏览器会使用这<strong>三组随机数</strong>生成<strong>对称密钥</strong>，因为服务器和浏览器使用同一套方法来生成密钥，所以最终生成的密钥也是<strong>相同</strong>的。</p> <p>有了对称加密的密钥之后，双方就可以使用<strong>对称加密</strong>的方式来传输数据了。</p> <p>需要特别注意的一点，<strong><code>pre-master</code> 是经过公钥加密之后传输的，所以黑客无法获取到 <code>pre-master</code>，这样黑客就无法生成密钥，也就保证了黑客无法破解传输过程中的数据了</strong></p> <h3 id="第四版：添加数字证书"><a href="#第四版：添加数字证书" class="header-anchor">#</a> 第四版：添加数字证书</h3> <p>通过对称和非对称混合方式，我们完美地实现了数据的加密传输。不过这种方式依然存在着问题，比如我要打开极客时间的官网，但是黑客通过 <code>DNS</code> <strong>劫持</strong>将极客时间官网的 <code>IP</code> 地址替换成了黑客的 <code>IP</code> 地址，这样我访问的其实是黑客的服务器了，黑客就可以在自己的服务器上实现公钥和私钥，而对浏览器来说，它完全<strong>不知道现在访问的是个黑客的站点</strong>。</p> <p>所以我们还需要服务器<strong>向浏览器提供证明</strong>“<strong>我就是我</strong>”，那怎么证明呢？</p> <p>这里我们结合实际生活中的一个例子，比如你要买房子，首先你需要给房管局提交你买房的材料，包括银行流水、银行证明、身份证等，然后房管局工作人员在验证无误后，会发给你一本盖了章的房产证，房产证上包含了你的名字、身份证号、房产地址、实际面积、公摊面积等信息。</p> <p>在这个例子中，你之所以能证明房子是你自己的，是因为引进了房管局这个<strong>权威机构</strong>，并通过这个权威机构给你颁发一个<strong>证书</strong></p> <p>对于浏览器来说，<strong>数字证书</strong>有两个作用：</p> <ul><li><strong>第一：<strong>是通过数字证书</strong>向浏览器证明服务器的身份</strong>；</li> <li><strong>第二：<strong>数字证书里面包含了</strong>服务器公钥</strong>。</li></ul> <p>接下来我们看看含有数字证书的 <code>HTTPS</code> 的请求流程，你可以参考下图：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/browser/part6/ls36/6.png" alt=""></p> <p><strong>相较于第三版的 <code>HTTPS</code> 协议，这里主要有两点改变：</strong></p> <ul><li>服务器<strong>没有直接返回公钥给浏览器</strong>，而是返回了<strong>数字证书</strong>，而<strong>公钥</strong>正是<strong>包含在数字证书中</strong>的；</li> <li>在浏览器端多了一个<strong>证书验证</strong>的操作，验证了证书之后，才继续后续流程。</li></ul> <p>通过引入数字证书，我们就实现了服务器的身份认证功能，这样即便黑客伪造了服务器，但是由于证书是没有办法伪造的，所以依然无法欺骗用户。</p> <h2 id="数字证书的申请和验证"><a href="#数字证书的申请和验证" class="header-anchor">#</a> 数字证书的申请和验证</h2> <p>在第四版的 <code>HTTPS</code> 中，我们提到过，有了数字证书，黑客就无法欺骗用户了，不过我们并没有解释清楚如何通过数字证书来证明用户身份，所以接下来我们再来把这个问题解释清楚。</p> <p><strong>如何申请数字证书</strong></p> <p>我们先来看看如何向 <code>CA</code> 申请证书。比如极客时间需要向某个 <code>CA</code> 去申请数字证书，通常的申请流程分以下几步：</p> <ul><li>首先极客时间需要<strong>准备一套私钥和公钥</strong>，<strong>私钥</strong>留着自己使用；</li> <li>然后极客时间向 <code>CA</code> 机构提交公钥、公司、站点等信息并等待认证，这个认证过程可能是收费的；</li> <li><code>CA</code> 通过线上、线下等多种渠道来验证极客时间所提供信息的真实性，如公司是否存在、企业是否合法、域名是否归属该企业等；</li> <li>如信息审核通过，<code>CA</code> 会向极客时间签发<strong>认证的数字证书</strong>，包含了极客时间的公钥、组织信息、<code>CA</code> 的信息、有效时间、证书序列号等，这些信息都是明文的，同时包含一个 <code>CA</code> 生成的<strong>签名</strong>。</li></ul> <p>这样我们就完成了极客时间数字证书的申请过程。前面几步都很好理解，不过最后一步数字签名的过程还需要解释下：首先 <code>CA</code> 使用**<code>Hash</code> 函数<strong>来计算极客时间提交的明文信息，并得出</strong>信息摘要**；然后 <code>CA</code> 再使用它的私钥对信息摘要进行加密，<strong>加密后的密文就是 <code>CA</code> 颁给极客时间的数字签名</strong>。这就相当于房管局在房产证上盖的章，这个章是可以去验证的，同样我们也可以通过数字签名来验证是否是该 <code>CA</code> 颁发的。</p> <h2 id="浏览器如何验证数字证书"><a href="#浏览器如何验证数字证书" class="header-anchor">#</a> 浏览器如何验证数字证书</h2> <p>有了 <code>CA</code> 签名过的数字证书，当浏览器向极客时间服务器发出请求时，服务器会返回<strong>数字证书</strong>给浏览器。</p> <p>浏览器接收到数字证书之后，会对数字证书进行验证。首先浏览器读取证书中相关的明文信息，采用 <code>CA</code> 签名时相同的 <code>Hash</code> 函数来计算并得到<strong>信息摘要 <code>A</code></strong>；然后再利用对应 <code>CA</code> 的<strong>公钥</strong>解密签名数据，得到<strong>信息摘要 <code>B</code></strong>；对比信息摘要 <code>A</code> 和信息摘要 <code>B</code>，<strong>如果一致</strong>，则可以<strong>确认证书是合法的</strong>，即证明了这个服务器是极客时间的；同时浏览器还会验证证书相关的域名信息、有效时间等信息。</p> <p>这时候相当于验证了 <code>CA</code> 是谁，但是这个 <code>CA</code> 可能比较小众，浏览器不知道该不该信任它，然后浏览器会继续查找给这个 <code>CA</code> 颁发证书的 <code>CA</code>，再以同样的方式验证它上级 <code>CA</code> 的可靠性。通常情况下，操作系统中会内置信任的顶级 <code>CA</code> 的证书信息（包含<strong>公钥</strong>），如果这个 <code>CA</code> 链中没有找到浏览器内置的顶级的 <code>CA</code>，证书也会被判定非法。</p> <p><strong>另外，在申请和使用证书的过程中，还需要注意以下三点：</strong></p> <ul><li>申请数字证书是不需要提供私钥的，要确保私钥永远只能由服务器掌握；</li> <li>数字证书最核心的是 <code>CA</code> 使用它的<strong>私钥</strong>生成的<strong>数字签名</strong>；</li> <li>内置 <code>CA</code> 对应的<strong>证书</strong>称为<strong>根证书</strong>，根证书是最权威的机构，它们自己为自己签名，我们把这称为自签名证书。</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新于:</span> <span class="time">2020年8月21日星期五上午9点29分</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/navitem/article/notes/browser/notes/35.html" class="prev">
        35.沙盒：页面和系统之间的隔离墙
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.17791675.js" defer></script><script src="/assets/js/2.39079bb7.js" defer></script><script src="/assets/js/52.325c372e.js" defer></script>
  </body>
</html>
