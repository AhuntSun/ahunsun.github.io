<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>07.变量提升：JavaScript代码是按顺序执行的吗 | AhuntSun</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="https://blog-static.cnblogs.com/files/AhuntSun-blog/sun1.ico">
    <link rel="stylesheet" href="/css/style.css">
    <script charset="utf-8" src="/js/main.js"></script>
    <meta name="description" content="🌕今日事,今日毕🌕">
    <meta name="keywords" content="AhuntSun, vuepress博客, 学习, 分享">
    <meta name="author" content="AhuntSun">
    <link rel="preload" href="/assets/css/0.styles.265dc05e.css" as="style"><link rel="preload" href="/assets/js/app.da882caa.js" as="script"><link rel="preload" href="/assets/js/2.39079bb7.js" as="script"><link rel="preload" href="/assets/js/57.ce334ec7.js" as="script"><link rel="prefetch" href="/assets/js/10.f51c507c.js"><link rel="prefetch" href="/assets/js/100.7e91dc57.js"><link rel="prefetch" href="/assets/js/101.8dc5fd38.js"><link rel="prefetch" href="/assets/js/102.70b9e0d0.js"><link rel="prefetch" href="/assets/js/103.c08ebd41.js"><link rel="prefetch" href="/assets/js/104.f8891f1a.js"><link rel="prefetch" href="/assets/js/105.20a79a3b.js"><link rel="prefetch" href="/assets/js/106.deb266a4.js"><link rel="prefetch" href="/assets/js/107.758b146d.js"><link rel="prefetch" href="/assets/js/108.2d09a256.js"><link rel="prefetch" href="/assets/js/109.cac78002.js"><link rel="prefetch" href="/assets/js/11.dc0d4157.js"><link rel="prefetch" href="/assets/js/110.df191352.js"><link rel="prefetch" href="/assets/js/111.c8150840.js"><link rel="prefetch" href="/assets/js/112.0981921b.js"><link rel="prefetch" href="/assets/js/113.25d4970a.js"><link rel="prefetch" href="/assets/js/114.7e3595ac.js"><link rel="prefetch" href="/assets/js/115.38c2eaf0.js"><link rel="prefetch" href="/assets/js/116.14df36df.js"><link rel="prefetch" href="/assets/js/117.aa489e1c.js"><link rel="prefetch" href="/assets/js/118.d0ded549.js"><link rel="prefetch" href="/assets/js/119.34142d6e.js"><link rel="prefetch" href="/assets/js/12.6a4035ba.js"><link rel="prefetch" href="/assets/js/120.5be17853.js"><link rel="prefetch" href="/assets/js/121.542e40a4.js"><link rel="prefetch" href="/assets/js/122.9d98c72b.js"><link rel="prefetch" href="/assets/js/123.af154edb.js"><link rel="prefetch" href="/assets/js/124.e6500473.js"><link rel="prefetch" href="/assets/js/125.e33561f9.js"><link rel="prefetch" href="/assets/js/126.5ac6b7ed.js"><link rel="prefetch" href="/assets/js/127.7b4bf694.js"><link rel="prefetch" href="/assets/js/128.d1613376.js"><link rel="prefetch" href="/assets/js/129.4ef6c8cb.js"><link rel="prefetch" href="/assets/js/13.3cebc682.js"><link rel="prefetch" href="/assets/js/130.1cce150d.js"><link rel="prefetch" href="/assets/js/14.c3cda318.js"><link rel="prefetch" href="/assets/js/15.66f5b135.js"><link rel="prefetch" href="/assets/js/16.13b5bf04.js"><link rel="prefetch" href="/assets/js/17.ffe423b7.js"><link rel="prefetch" href="/assets/js/18.f8360efa.js"><link rel="prefetch" href="/assets/js/19.5ea8dcf5.js"><link rel="prefetch" href="/assets/js/20.81961062.js"><link rel="prefetch" href="/assets/js/21.5c400fc2.js"><link rel="prefetch" href="/assets/js/22.d3ef4a7d.js"><link rel="prefetch" href="/assets/js/23.f51c538c.js"><link rel="prefetch" href="/assets/js/24.8867221e.js"><link rel="prefetch" href="/assets/js/25.b97cf86f.js"><link rel="prefetch" href="/assets/js/26.4e08086a.js"><link rel="prefetch" href="/assets/js/27.d3523f74.js"><link rel="prefetch" href="/assets/js/28.1638f54d.js"><link rel="prefetch" href="/assets/js/29.f32f2e11.js"><link rel="prefetch" href="/assets/js/3.1842561f.js"><link rel="prefetch" href="/assets/js/30.6b3c337e.js"><link rel="prefetch" href="/assets/js/31.0de789e7.js"><link rel="prefetch" href="/assets/js/32.ad73365d.js"><link rel="prefetch" href="/assets/js/33.2bc5824b.js"><link rel="prefetch" href="/assets/js/34.a904c2e3.js"><link rel="prefetch" href="/assets/js/35.0cfaca3f.js"><link rel="prefetch" href="/assets/js/36.da1b643a.js"><link rel="prefetch" href="/assets/js/37.421a7a69.js"><link rel="prefetch" href="/assets/js/38.c3b3a65e.js"><link rel="prefetch" href="/assets/js/39.68e2eb05.js"><link rel="prefetch" href="/assets/js/4.e00be33d.js"><link rel="prefetch" href="/assets/js/40.d5dbd643.js"><link rel="prefetch" href="/assets/js/41.c62088ec.js"><link rel="prefetch" href="/assets/js/42.34c0fbda.js"><link rel="prefetch" href="/assets/js/43.7f7226d7.js"><link rel="prefetch" href="/assets/js/44.1915a5de.js"><link rel="prefetch" href="/assets/js/45.780181bb.js"><link rel="prefetch" href="/assets/js/46.06724024.js"><link rel="prefetch" href="/assets/js/47.fb3fde17.js"><link rel="prefetch" href="/assets/js/48.4f9b0737.js"><link rel="prefetch" href="/assets/js/49.a4497adf.js"><link rel="prefetch" href="/assets/js/5.1e7ec642.js"><link rel="prefetch" href="/assets/js/50.5c2f6af0.js"><link rel="prefetch" href="/assets/js/51.3d50a5d9.js"><link rel="prefetch" href="/assets/js/52.4a8dde8c.js"><link rel="prefetch" href="/assets/js/53.b9f38421.js"><link rel="prefetch" href="/assets/js/54.4c25996d.js"><link rel="prefetch" href="/assets/js/55.26df397e.js"><link rel="prefetch" href="/assets/js/56.7a6eb910.js"><link rel="prefetch" href="/assets/js/58.82bc220c.js"><link rel="prefetch" href="/assets/js/59.dbfd24e4.js"><link rel="prefetch" href="/assets/js/6.9d1b367b.js"><link rel="prefetch" href="/assets/js/60.28ccf65f.js"><link rel="prefetch" href="/assets/js/61.d9dd7dcd.js"><link rel="prefetch" href="/assets/js/62.60d169e6.js"><link rel="prefetch" href="/assets/js/63.33d34506.js"><link rel="prefetch" href="/assets/js/64.f2564371.js"><link rel="prefetch" href="/assets/js/65.02010c0d.js"><link rel="prefetch" href="/assets/js/66.70cf4f21.js"><link rel="prefetch" href="/assets/js/67.53f37240.js"><link rel="prefetch" href="/assets/js/68.48c5d9e1.js"><link rel="prefetch" href="/assets/js/69.1d826a0d.js"><link rel="prefetch" href="/assets/js/7.20ff6042.js"><link rel="prefetch" href="/assets/js/70.b7b9145b.js"><link rel="prefetch" href="/assets/js/71.cb99273c.js"><link rel="prefetch" href="/assets/js/72.3e3a12ed.js"><link rel="prefetch" href="/assets/js/73.feeef764.js"><link rel="prefetch" href="/assets/js/74.2c645f34.js"><link rel="prefetch" href="/assets/js/75.fe026040.js"><link rel="prefetch" href="/assets/js/76.afb1d474.js"><link rel="prefetch" href="/assets/js/77.067a9cbe.js"><link rel="prefetch" href="/assets/js/78.249ebe37.js"><link rel="prefetch" href="/assets/js/79.febdf489.js"><link rel="prefetch" href="/assets/js/8.6c95a654.js"><link rel="prefetch" href="/assets/js/80.7907d8f3.js"><link rel="prefetch" href="/assets/js/81.63d3c513.js"><link rel="prefetch" href="/assets/js/82.3b67f4e4.js"><link rel="prefetch" href="/assets/js/83.bbef2976.js"><link rel="prefetch" href="/assets/js/84.742b6175.js"><link rel="prefetch" href="/assets/js/85.7da84f27.js"><link rel="prefetch" href="/assets/js/86.71230bcd.js"><link rel="prefetch" href="/assets/js/87.9b4479af.js"><link rel="prefetch" href="/assets/js/88.0da45ae6.js"><link rel="prefetch" href="/assets/js/89.024bf340.js"><link rel="prefetch" href="/assets/js/9.3cf39192.js"><link rel="prefetch" href="/assets/js/90.5fef54bf.js"><link rel="prefetch" href="/assets/js/91.aeaca877.js"><link rel="prefetch" href="/assets/js/92.fbf9e35f.js"><link rel="prefetch" href="/assets/js/93.74ef59a8.js"><link rel="prefetch" href="/assets/js/94.7c636190.js"><link rel="prefetch" href="/assets/js/95.f263867e.js"><link rel="prefetch" href="/assets/js/96.f271beb3.js"><link rel="prefetch" href="/assets/js/97.c03814e9.js"><link rel="prefetch" href="/assets/js/98.38cf05b5.js"><link rel="prefetch" href="/assets/js/99.da91ad4c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.265dc05e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">AhuntSun</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/navitem/git/" class="nav-link">
  Git应用详解
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          理论篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/theory/" class="nav-link">
  JavaScript版基础知识
</a></li></ul></li><li class="dropdown-item"><h4>
          实战篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/example/2offer/" class="nav-link">
  剑指offer
</a></li><li class="dropdown-subitem"><a href="/navitem/algorithm/example/leecode/" class="nav-link">
  leecode精选
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/navitem/article/" class="nav-link router-link-active">
  好文转载
</a></div><div class="nav-item"><a href="/navitem/essay/" class="nav-link">
  随笔整合
</a></div><div class="nav-item"><a href="/navitem/demo/" class="nav-link">
  实战Demo
</a></div><div class="nav-item"><a href="/navitem/esun/" class="nav-link">
  eSun-UI
</a></div><div class="nav-item"><a href="/navitem/tech/FE-interview/" class="nav-link">
  面试宝典
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cubic-bezier.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  贝塞尔曲线
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://easings.net/en" target="_blank" rel="noopener noreferrer" class="nav-link external">
  加速度曲线速查
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用网站" class="dropdown-title"><span class="title">实用网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/navitem/website/1/" class="nav-link">
  图片编辑
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/2/" class="nav-link">
  样式设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/3/" class="nav-link">
  论坛网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/4/" class="nav-link">
  在线学习
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/5/" class="nav-link">
  创新社区
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/6/" class="nav-link">
  优质图库
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/7/" class="nav-link">
  UI设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/8/" class="nav-link">
  工具网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/9/" class="nav-link">
  JavaScript库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="联系我" class="dropdown-title"><span class="title">联系我</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/AhuntSun-blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_43425487" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/user/5dea331b518825123e7ae8d4" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AhuntSun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/ahuntsun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/navitem/git/" class="nav-link">
  Git应用详解
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          理论篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/theory/" class="nav-link">
  JavaScript版基础知识
</a></li></ul></li><li class="dropdown-item"><h4>
          实战篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/example/2offer/" class="nav-link">
  剑指offer
</a></li><li class="dropdown-subitem"><a href="/navitem/algorithm/example/leecode/" class="nav-link">
  leecode精选
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/navitem/article/" class="nav-link router-link-active">
  好文转载
</a></div><div class="nav-item"><a href="/navitem/essay/" class="nav-link">
  随笔整合
</a></div><div class="nav-item"><a href="/navitem/demo/" class="nav-link">
  实战Demo
</a></div><div class="nav-item"><a href="/navitem/esun/" class="nav-link">
  eSun-UI
</a></div><div class="nav-item"><a href="/navitem/tech/FE-interview/" class="nav-link">
  面试宝典
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cubic-bezier.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  贝塞尔曲线
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://easings.net/en" target="_blank" rel="noopener noreferrer" class="nav-link external">
  加速度曲线速查
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用网站" class="dropdown-title"><span class="title">实用网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/navitem/website/1/" class="nav-link">
  图片编辑
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/2/" class="nav-link">
  样式设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/3/" class="nav-link">
  论坛网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/4/" class="nav-link">
  在线学习
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/5/" class="nav-link">
  创新社区
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/6/" class="nav-link">
  优质图库
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/7/" class="nav-link">
  UI设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/8/" class="nav-link">
  工具网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/9/" class="nav-link">
  JavaScript库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="联系我" class="dropdown-title"><span class="title">联系我</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/AhuntSun-blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_43425487" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/user/5dea331b518825123e7ae8d4" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AhuntSun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/ahuntsun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Part1</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Part2</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/navitem/article/notes/browser/notes/7.html" aria-current="page" class="active sidebar-link">07.变量提升：JavaScript代码是按顺序执行的吗</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/navitem/article/notes/browser/notes/7.html#变量提升（hoisting）" class="sidebar-link">变量提升（Hoisting）</a></li><li class="sidebar-sub-header"><a href="/navitem/article/notes/browser/notes/7.html#javascript代码的执行流程" class="sidebar-link">JavaScript代码的执行流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/navitem/article/notes/browser/notes/7.html#_1-编译阶段" class="sidebar-link">1. 编译阶段</a></li><li class="sidebar-sub-header"><a href="/navitem/article/notes/browser/notes/7.html#_2-执行阶段" class="sidebar-link">2. 执行阶段</a></li></ul></li><li class="sidebar-sub-header"><a href="/navitem/article/notes/browser/notes/7.html#代码中出现相同的变量或者函数怎么办？" class="sidebar-link">代码中出现相同的变量或者函数怎么办？</a></li><li class="sidebar-sub-header"><a href="/navitem/article/notes/browser/notes/7.html#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/navitem/article/notes/browser/notes/7.html#思考时间" class="sidebar-link">思考时间</a></li></ul></li><li><a href="/navitem/article/notes/browser/notes/8.html" class="sidebar-link">08.调用栈：为什么JavaScript代码会出现栈溢出</a></li><li><a href="/navitem/article/notes/browser/notes/9.html" class="sidebar-link">09.块级作用域：var缺陷以及为什么要引入let和const</a></li><li><a href="/navitem/article/notes/browser/notes/10.html" class="sidebar-link">10.作用域链和闭包：代码中出现相同的变量JavaScript引擎如何选择</a></li><li><a href="/navitem/article/notes/browser/notes/11.html" class="sidebar-link">11.this：从JavaScript执行上下文视角讲this</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Part3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Part4</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Part5</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Part6</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_07-变量提升：javascript代码是按顺序执行的吗"><a href="#_07-变量提升：javascript代码是按顺序执行的吗" class="header-anchor">#</a> 07.变量提升：JavaScript代码是按顺序执行的吗</h1> <p>讲解完宏观视角下的浏览器后，从这篇文章开始，我们就进入下一个新的模块了，这里我会对<code>JavaScript</code>执行原理做深入介绍。</p> <p>今天在该模块的第一篇文章，我们主要讲解<strong>执行上下文</strong>相关的内容。那为什么先讲执行上下文呢？它这么重要吗？可以这么说，只有理解了<code>JavaScrip</code>的执行上下文，你才能更好地理解<code>JavaScript</code>语言本身，比如<strong>变量提升</strong>、<strong>作用域</strong>和<strong>闭包</strong>等。不仅如此，理解<strong>执行上下文</strong>和<strong>调用栈</strong>的概念还能助你成为一名更合格的前端开发者。</p> <p>不过由于我们专栏不是专门讲<code>JavaScript</code>语言的，所以我并不会对<code>JavaScript</code>语法本身做过多介绍。本文主要是从<code>JavaScript</code>的顺序执行讲起，然后一步步带你了解<code>JavaScript</code>是怎么运行的。</p> <p>接下来咱们先看段代码，你觉得下面这段代码输出的结果是什么？</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myname<span class="token punctuation">)</span>
<span class="token keyword">var</span> myname <span class="token operator">=</span> <span class="token string">'极客时间'</span>
<span class="token keyword">function</span> <span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'函数showName被执行'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>使用过<code>JavaScript</code>开发的程序员应该都知道，<code>JavaScript</code>是按顺序执行的。若按照这个逻辑来理解的话，那么：</p> <ul><li>当执行到第<code>1</code>行的时候，由于函数<code>showName</code>还没有定义，所以执行应该会报错；</li> <li>同样执行第<code>2</code>行的时候，由于变量<code>myname</code>函数也未定义，所以同样也会报错</li></ul> <p>然而实际执行结果却并非如此， 如下图：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/browser/part2/ls7/1.png" alt=""></p> <p>第<code>1</code>行输出“函数<code>showName</code>被执行”，第<code>2</code>行输出“<code>undefined</code>”，这和前面想象中的顺序执行有点不一样啊！</p> <p>通过上面的执行结果，你应该已经知道了函数或者变量可以在定义之前使用，那如果使用没有定义的变量或者函数，<code>JavaScript</code>代码还能继续执行吗？为了验证这点，我们可以删除第<code>3</code>行变量<code>myname</code>的定义，如下所示：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myname<span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'函数showName被执行'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>然后再次执行这段代码时，<code>JavaScript</code>引擎就会报错，结果如下：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/browser/part2/ls7/2.png" alt=""></p> <p>从上面两段代码的执行结果来看，我们可以得出如下三个结论。</p> <ul><li>执行过程中，若使用了未声明的变量，那么<code>JavaScript</code>执行会报错。</li> <li><strong>在一个变量定义之前使用它</strong>，不会出错，但是该变量的值会为<code>undefined</code>，而不是定义时的值。</li> <li><strong>在一个函数定义之前使用它</strong>，不会出错，且函数能正确执行</li></ul> <p>第一个结论很好理解，因为变量没有定义，这样在执行<code>JavaScript</code>代码时，就找不到该变量，所以<code>JavaScript会</code>抛出错误。</p> <p>但是对于第二个和第三个结论，就挺让人费解的：</p> <ul><li>变量和函数为什么能在其定义之前使用？这似乎表明<code>JavaScript</code>代码并不是一行一行执行的。</li> <li>同样的方式，变量和函数的处理结果为什么不一样？比如上面的执行结果，提前使用的<code>showName</code>函数能打印出来完整结果，但是提前使用的<code>myname</code>变量值却是<code>undefined</code>，而不是定义时使用的“极客时间”这个值</li></ul> <h2 id="变量提升（hoisting）"><a href="#变量提升（hoisting）" class="header-anchor">#</a> 变量提升（<code>Hoisting</code>）</h2> <p>要解释这两个问题，你就需要先了解下什么是变量提升。</p> <p>不过在介绍变量提升之前，我们先通过下面这段代码，来看看什么是<code>JavaScript</code>中的声明和赋值。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var myname = '极客时间'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这段代码你可以把它看成是两行代码组成的：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var myname    //声明部分
myname = '极客时间'  //赋值部分
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="http://ahuntsun.gitee.io/blogimagebed/img/browser/part2/ls7/3.png" alt=""></p> <p>上面是变量的声明和赋值，那接下来我们再来看看函数的声明和赋值，结合下面这段代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>第一个函数<code>foo</code>是一个完整的函数声明，也就是说没有涉及到赋值操作；第二个函数是先声明变量bar，再把<code>function(){console.log('bar')}</code>赋值给bar。为了直观理解，你可以参考下图：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/browser/part2/ls7/4.png" alt=""></p> <p>好了，理解了声明和赋值操作，那接下来我们就可以聊聊什么是变量提升了。</p> <p><strong>所谓的变量提升，是指在<code>JavaScript</code>代码执行过程中，<code>JavaScript</code>引擎把变量的声明部分和函数的声明部分提升到代码开头的“行为”。变量被提升后，会给变量设置默认值，这个默认值就是我们熟悉的<code>undefined</code></strong>。</p> <p>下面我们来模拟下实现：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
* 变量提升部分
*/</span>
<span class="token comment">// 把变量 myname提升到开头，</span>
<span class="token comment">// 同时给myname赋值为undefined</span>
<span class="token keyword">var</span> myname <span class="token operator">=</span> <span class="token keyword">undefined</span>
<span class="token comment">// 把函数showName提升到开头</span>
<span class="token keyword">function</span> <span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'showName被调用'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
* 可执行代码部分
*/</span>
<span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myname<span class="token punctuation">)</span>
<span class="token comment">// 去掉var声明部分，保留赋值语句</span>
myname <span class="token operator">=</span> <span class="token string">'极客时间'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>为了模拟变量提升的效果，我们对代码做了以下调整，如下图：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/browser/part2/ls7/5.png" alt=""></p> <p>从图中可以看出，对原来的代码主要做了两处调整：</p> <ul><li>第一处是把声明的部分都提升到了代码开头，如变量<code>myname</code>和函数<code>showName</code>，并给变量设置默认值<code>undefined</code>；</li> <li>第二处是移除原本声明的变量和函数，如<code>var myname</code> = '极客时间'的语句，移除了<code>var</code>声明，整个移除<code>showName</code>的函数声明。</li> <li>通过这两步，就可以实现变量提升的效果。你也可以执行这段模拟变量提升的代码，其输出结果和第一段代码应该是完全一样的。</li></ul> <p>通过这段模拟的变量提升代码，相信你已经明白了可以在定义之前使用变量或者函数的原因——函数和变量在执行之前都提升到了代码开头。</p> <h2 id="javascript代码的执行流程"><a href="#javascript代码的执行流程" class="header-anchor">#</a> JavaScript代码的执行流程</h2> <p>从概念的字面意义上来看，“变量提升”意味着变量和函数的声明会在物理层面移动到代码的最前面，正如我们所模拟的那样。但，这并不准确。实际上变量和函数声明在代码里的位置是不会改变的，而且是在编译阶段被<code>JavaScript</code>引擎放入内存中。对，你没听错，一段<code>JavaScript</code>代码在执行之前需要被<code>JavaScript</code>引擎编译，编译完成之后，才会进入执行阶段。大致流程你可以参考下图：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/browser/part2/ls7/6.png" alt=""></p> <h3 id="_1-编译阶段"><a href="#_1-编译阶段" class="header-anchor">#</a> 1. 编译阶段</h3> <p>那么编译阶段和变量提升存在什么关系呢？</p> <p>为了搞清楚这个问题，我们还是回过头来看上面那段模拟变量提升的代码，为了方便介绍，可以把这段代码分成两部分。</p> <p><strong>第一部分：变量提升部分的代码。</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> myname <span class="token operator">=</span> <span class="token keyword">undefined</span>
<span class="token keyword">function</span> <span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'函数showName被执行'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>第二部分：执行部分的代码。</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myname<span class="token punctuation">)</span>
myname <span class="token operator">=</span> <span class="token string">'极客时间'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>下面我们就可以把JavaScript的执行流程细化，如下图所示：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/browser/part2/ls7/7.png" alt=""></p> <p>从上图可以看出，输入一段代码，经过编译后，会生成两部分内容：执行上下文（<code>Execution context</code>）和可执行代码。</p> <p>执行上下文是<code>JavaScript</code>执行一段代码时的运行环境，比如调用一个函数，就会进入这个函数的执行上下文，确定该函数在执行期间用到的诸如<code>this</code>、变量、对象以及函数等。</p> <p>关于执行上下文的细节，我会在下一篇文章《08 | 调用栈：为什么<code>JavaScript</code>代码会出现栈溢出？》做详细介绍，现在你只需要知道，在执行上下文中存在一个变量环境的对象（<code>Viriable Environment</code>），该对象中保存了变量提升的内容，比如上面代码中的变量<code>myname</code>和函数<code>showName</code>，都保存在该对象中。</p> <p>你可以简单地把变量环境对象看成是如下结构</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>VariableEnvironment:
     myname -&gt; undefined, 
     showName -&gt;function : {console.log(myname)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>了解完变量环境对象的结构后，接下来，我们再结合下面这段代码来分析下是如何生成变量环境对象的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myname<span class="token punctuation">)</span>
<span class="token keyword">var</span> myname <span class="token operator">=</span> <span class="token string">'极客时间'</span>
<span class="token keyword">function</span> <span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'函数showName被执行'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>我们可以一行一行来分析上述代码：</p> <ul><li>第<code>1</code>行和第<code>2</code>行，由于这两行代码不是声明操作，所以<code>JavaScript</code>引擎不会做任何处理；</li> <li>第<code>3</code>行，由于这行是经过<code>var</code>声明的，因此<code>JavaScript</code>引擎将在环境对象中创建一个名为<code>myname</code>的属性，并使用<code>undefined</code>对其初始化；</li> <li>第<code>4</code>行，<code>JavaScript</code>引擎发现了一个通过<code>function</code>定义的函数，所以它将函数定义存储到堆(<code>HEAP</code>）中，并在环境对象中创建一个<code>showName</code>的属性，然后将该属性值指向堆中函数的位置（不了解堆也没关系，<code>JavaScript</code>的执行堆和执行栈我会在后续文章中介绍）。
这样就生成了变量环境对象。接下来<code>JavaScript</code>引擎会把声明以外的代码编译为<strong>字节码</strong>，至于字节码的细节，我也会在后面文章中做详细介绍，你可以类比如下的模拟代码</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myname<span class="token punctuation">)</span>
myname <span class="token operator">=</span> <span class="token string">'极客时间'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>好了，现在有了<strong>执行上下文</strong>和<strong>可执行代码</strong>了，那么接下来就到了执行阶段了。</p> <h3 id="_2-执行阶段"><a href="#_2-执行阶段" class="header-anchor">#</a> 2. 执行阶段</h3> <p><code>JavaScript</code>引擎开始执行“可执行代码”，按照顺序一行一行地执行。下面我们就来一行一行分析下这个执行过程</p> <ul><li>当执行到<code>showName</code>函数时，<code>JavaScript</code>引擎便开始在<strong>变量环境对象</strong>中查找该函数，由于变量环境对象中存在该函数的引用，所以<code>JavaScript</code>引擎便开始执行该函数，并输出“函数<code>showName</code>被执行”结果。</li> <li>接下来打印“<code>myname</code>”信息，<code>JavaScript</code>引擎继续在<strong>变量环境对象</strong>中查找该对象，由于变量环境存在<code>myname</code>变量，并且其值为<code>undefined</code>，所以这时候就输出<code>undefined</code>。</li> <li>接下来执行第<code>3</code>行，把“极客时间”赋给<code>myname</code>变量，赋值后变量环境中的<code>myname</code>属性值改变为“极客时间”，变量环境如下所示：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>VariableEnvironment:
     myname -&gt; &quot;极客时间&quot;, 
     showName -&gt;function : {console.log(myname)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>好了，以上就是一段代码的编译和执行流程。实际上，编译阶段和执行阶段都是非常复杂的，包括了词法分析、语法解析、代码优化、代码生成等，这些内容我会在《<code>14</code> | 编译器和解释器：<code>V8</code>是如何执行一段<code>JavaScript</code>代码的？》那节详细介绍，在本篇文章中你只需要知道<code>JavaScript</code>代码经过编译生成了什么内容就可以了</p> <h2 id="代码中出现相同的变量或者函数怎么办？"><a href="#代码中出现相同的变量或者函数怎么办？" class="header-anchor">#</a> 代码中出现相同的变量或者函数怎么办？</h2> <p>现在你已经知道了，在执行一段<code>JavaScript</code>代码之前，会编译代码，并将代码中的函数和变量保存到执行上下文的<strong>变量环境</strong>中，那么如果代码中出现了重名的函数或者变量，<code>JavaScript</code>引擎会如何处理？</p> <p>我们先看下面这样一段代码</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'极客邦'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'极客时间'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>在上面代码中，我们先定义了一个<code>showName</code>的函数，该函数打印出来“极客邦”；然后调用<code>showName</code>，并定义了一个<code>showName</code>函数，这个<code>showName</code>函数打印出来的是“极客时间”；最后接着继续调用<code>showName</code>。那么你能分析出来这两次调用打印出来的值是什么吗？</p> <p><strong>我们来分析下其完整执行流程</strong>：</p> <p>即变量提升的最终原因为：<code>JavaScript</code>没有块级作用域，所以无论变量在哪里定义，都会被当做全局变量，而被全局访问到，也就相当于将函数声明提到了当前执行上下文的最前面；</p> <p>综上所述，<strong>一段代码如果定义了两个相同名字的函数，那么最终生效的是最后一个函数</strong>。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>好了，今天就到这里，下面我来简单总结下今天的主要内容：</p> <ul><li><code>JavaScript</code>代码执行过程中，需要先做<strong>变量提升</strong>，而之所以需要实现变量提升，<strong>是因为<code>JavaScript</code>代码在执行之前需要先编译。</strong>
在编译阶段，变量和函数会被存放到<strong>变量环境</strong>中，变量的默认值会被设置为<code>undefined</code>；在代码执行阶段，<code>JavaScript</code>引擎会从变量环境中去查找自定义的变量和函数。</li> <li>如果在编译阶段，存在两个相同的函数，那么最终存放在变量环境中的是最后定义的那个，这是因为后定义的会覆盖掉之前定义的。</li> <li>以上就是今天所讲的主要内容，当然，学习这些内容并不是让你掌握一些<code>JavaScript</code>小技巧，其主要目的是让你清楚<code>JavaScript</code>的执行机制：<strong>先编译，再执行。</strong></li></ul> <blockquote><p>变量提升的原因为：<code>V8</code>引擎在执行<code>JavaScript</code>代码的执行机制为：先编译，后执行。</p> <p>即变量提升的<strong>本质原因</strong>为：<code>JavaScript</code>没有块级作用域，所以无论变量在哪里定义，都会被当做当前执行上下文（全局或函数）的&quot;全局&quot;变量，而被当前执行上下文访问到，也就相当于将函数声明提到了当前执行上下文的最前面；</p></blockquote> <p>如果你了解了<code>JavaScript</code>执行流程，那么在编写代码时，你就能避开一些陷阱；在分析代码过程中，也能通过分析<code>JavaScript</code>的执行过程来定位问题</p> <h2 id="思考时间"><a href="#思考时间" class="header-anchor">#</a> 思考时间</h2> <p>最后，看下面这段代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//不会变量声明和函数定义，放到执行上下文的可执行代码中</span>
<span class="token keyword">var</span> <span class="token function-variable function">showName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//是变量定义，将其放入执行上下文的变量环境对象中；将赋值操作放入可执行代码中</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//函数定义，放入执行上下文中的变量环境中</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 使用变量提升改写后的代码为 */</span>
<span class="token comment">//变量环境对象中的内容</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token keyword">undefined</span>
<span class="token keyword">function</span> <span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//可执行代码中的内容</span>
<span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function-variable function">showName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>你能按照<code>JavaScript</code>的执行流程，来分析最终输出结果吗？</p> <p>分析</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>输出1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>编译阶段:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var showName
function showName(){console.log(1)}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>执行阶段:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>showName()//输出1
showName=function(){console.log(2)}
//如果后面再有showName执行的话，就输出2因为这时候函数引用已经变了
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>变量提升记住这个规律就行了：</p> <ul><li>在变量定义前使用，不会出错，不过值为<code>Undefined</code>；</li> <li>在函数定义前使用，不会出错，会正常调用；</li></ul></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新于:</span> <span class="time">2020年8月21日星期五上午9点29分</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/navitem/article/notes/browser/notes/6.html" class="prev">
        06.渲染流程（下）：HTML、CSS和JavaScript是如何变成页面的
      </a></span> <span class="next"><a href="/navitem/article/notes/browser/notes/8.html">
        08.调用栈：为什么JavaScript代码会出现栈溢出
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.da882caa.js" defer></script><script src="/assets/js/2.39079bb7.js" defer></script><script src="/assets/js/57.ce334ec7.js" defer></script>
  </body>
</html>
