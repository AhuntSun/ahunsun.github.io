<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>01.一文摸透从输入URL到页面渲染的过程 | AhuntSun</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="https://blog-static.cnblogs.com/files/AhuntSun-blog/sun1.ico">
    <link rel="stylesheet" href="/css/style.css">
    <script charset="utf-8" src="/js/main.js"></script>
    <meta name="description" content="🌕今日事,今日毕🌕">
    <meta name="keywords" content="AhuntSun, vuepress博客, 学习, 分享">
    <meta name="author" content="AhuntSun">
    <link rel="preload" href="/assets/css/0.styles.265dc05e.css" as="style"><link rel="preload" href="/assets/js/app.0f1658bb.js" as="script"><link rel="preload" href="/assets/js/2.39079bb7.js" as="script"><link rel="preload" href="/assets/js/82.5ac2a8ef.js" as="script"><link rel="prefetch" href="/assets/js/10.ab5a1cd6.js"><link rel="prefetch" href="/assets/js/100.ccbe9b93.js"><link rel="prefetch" href="/assets/js/101.29c2e23b.js"><link rel="prefetch" href="/assets/js/102.2774cf3b.js"><link rel="prefetch" href="/assets/js/103.b460c3e4.js"><link rel="prefetch" href="/assets/js/104.3731fbd3.js"><link rel="prefetch" href="/assets/js/105.a7c9ad92.js"><link rel="prefetch" href="/assets/js/106.36e314aa.js"><link rel="prefetch" href="/assets/js/107.51824f73.js"><link rel="prefetch" href="/assets/js/108.52d52565.js"><link rel="prefetch" href="/assets/js/109.6059df5a.js"><link rel="prefetch" href="/assets/js/11.1eb9cf4e.js"><link rel="prefetch" href="/assets/js/110.fe083f01.js"><link rel="prefetch" href="/assets/js/111.8ce13f1c.js"><link rel="prefetch" href="/assets/js/112.6f9275a6.js"><link rel="prefetch" href="/assets/js/113.9b1b6b53.js"><link rel="prefetch" href="/assets/js/114.e7aa3077.js"><link rel="prefetch" href="/assets/js/115.82f24886.js"><link rel="prefetch" href="/assets/js/116.e37a566b.js"><link rel="prefetch" href="/assets/js/117.31759681.js"><link rel="prefetch" href="/assets/js/118.a16185ed.js"><link rel="prefetch" href="/assets/js/119.f28cc550.js"><link rel="prefetch" href="/assets/js/12.96ad7904.js"><link rel="prefetch" href="/assets/js/13.94582efe.js"><link rel="prefetch" href="/assets/js/14.7fe79082.js"><link rel="prefetch" href="/assets/js/15.5944dae5.js"><link rel="prefetch" href="/assets/js/16.259b7e5a.js"><link rel="prefetch" href="/assets/js/17.816e8a20.js"><link rel="prefetch" href="/assets/js/18.e326b11c.js"><link rel="prefetch" href="/assets/js/19.5b3500a6.js"><link rel="prefetch" href="/assets/js/20.1ac6287c.js"><link rel="prefetch" href="/assets/js/21.88462c52.js"><link rel="prefetch" href="/assets/js/22.838497c0.js"><link rel="prefetch" href="/assets/js/23.064f805c.js"><link rel="prefetch" href="/assets/js/24.c202de18.js"><link rel="prefetch" href="/assets/js/25.eecff72d.js"><link rel="prefetch" href="/assets/js/26.9d667fb0.js"><link rel="prefetch" href="/assets/js/27.1085839d.js"><link rel="prefetch" href="/assets/js/28.43039452.js"><link rel="prefetch" href="/assets/js/29.60bc2650.js"><link rel="prefetch" href="/assets/js/3.93254602.js"><link rel="prefetch" href="/assets/js/30.439baa01.js"><link rel="prefetch" href="/assets/js/31.6134e203.js"><link rel="prefetch" href="/assets/js/32.d5ce5b2a.js"><link rel="prefetch" href="/assets/js/33.1a61512b.js"><link rel="prefetch" href="/assets/js/34.68744c60.js"><link rel="prefetch" href="/assets/js/35.22a62126.js"><link rel="prefetch" href="/assets/js/36.3e25377a.js"><link rel="prefetch" href="/assets/js/37.35ab219f.js"><link rel="prefetch" href="/assets/js/38.da1ea404.js"><link rel="prefetch" href="/assets/js/39.7601379b.js"><link rel="prefetch" href="/assets/js/4.e00be33d.js"><link rel="prefetch" href="/assets/js/40.c7cc8f6d.js"><link rel="prefetch" href="/assets/js/41.e2d4c51e.js"><link rel="prefetch" href="/assets/js/42.099f5f31.js"><link rel="prefetch" href="/assets/js/43.53443cdb.js"><link rel="prefetch" href="/assets/js/44.29a624a7.js"><link rel="prefetch" href="/assets/js/45.9af6b45c.js"><link rel="prefetch" href="/assets/js/46.2873b517.js"><link rel="prefetch" href="/assets/js/47.c3d906ff.js"><link rel="prefetch" href="/assets/js/48.a91b296a.js"><link rel="prefetch" href="/assets/js/49.d00cbb74.js"><link rel="prefetch" href="/assets/js/5.0871711b.js"><link rel="prefetch" href="/assets/js/50.ac3091f5.js"><link rel="prefetch" href="/assets/js/51.c9172799.js"><link rel="prefetch" href="/assets/js/52.de5d30f3.js"><link rel="prefetch" href="/assets/js/53.30604ed9.js"><link rel="prefetch" href="/assets/js/54.c97d6fda.js"><link rel="prefetch" href="/assets/js/55.ffe76555.js"><link rel="prefetch" href="/assets/js/56.aba421de.js"><link rel="prefetch" href="/assets/js/57.2c1df219.js"><link rel="prefetch" href="/assets/js/58.f693405e.js"><link rel="prefetch" href="/assets/js/59.3541fb22.js"><link rel="prefetch" href="/assets/js/6.5eef3512.js"><link rel="prefetch" href="/assets/js/60.c4a4d589.js"><link rel="prefetch" href="/assets/js/61.c5e88a36.js"><link rel="prefetch" href="/assets/js/62.9ff35cf7.js"><link rel="prefetch" href="/assets/js/63.e41da034.js"><link rel="prefetch" href="/assets/js/64.e30f0e98.js"><link rel="prefetch" href="/assets/js/65.3e45996c.js"><link rel="prefetch" href="/assets/js/66.576a58cd.js"><link rel="prefetch" href="/assets/js/67.764dbdfd.js"><link rel="prefetch" href="/assets/js/68.29e28eed.js"><link rel="prefetch" href="/assets/js/69.54ee1588.js"><link rel="prefetch" href="/assets/js/7.94844dae.js"><link rel="prefetch" href="/assets/js/70.12901dfb.js"><link rel="prefetch" href="/assets/js/71.6d5a39da.js"><link rel="prefetch" href="/assets/js/72.e8a0dfd9.js"><link rel="prefetch" href="/assets/js/73.19a8aab6.js"><link rel="prefetch" href="/assets/js/74.144ea233.js"><link rel="prefetch" href="/assets/js/75.f09f7382.js"><link rel="prefetch" href="/assets/js/76.5b71788e.js"><link rel="prefetch" href="/assets/js/77.f6064033.js"><link rel="prefetch" href="/assets/js/78.40681be5.js"><link rel="prefetch" href="/assets/js/79.2a690100.js"><link rel="prefetch" href="/assets/js/8.cdb0f5de.js"><link rel="prefetch" href="/assets/js/80.3440a347.js"><link rel="prefetch" href="/assets/js/81.6759b047.js"><link rel="prefetch" href="/assets/js/83.cc0ec694.js"><link rel="prefetch" href="/assets/js/84.822ab7fa.js"><link rel="prefetch" href="/assets/js/85.c4b7c147.js"><link rel="prefetch" href="/assets/js/86.3ff7556d.js"><link rel="prefetch" href="/assets/js/87.b79cc938.js"><link rel="prefetch" href="/assets/js/88.dc91a53e.js"><link rel="prefetch" href="/assets/js/89.d3c6e68b.js"><link rel="prefetch" href="/assets/js/9.73718d17.js"><link rel="prefetch" href="/assets/js/90.ba517110.js"><link rel="prefetch" href="/assets/js/91.804f8ad9.js"><link rel="prefetch" href="/assets/js/92.9d38f6ca.js"><link rel="prefetch" href="/assets/js/93.dba1ee5a.js"><link rel="prefetch" href="/assets/js/94.b38e9c35.js"><link rel="prefetch" href="/assets/js/95.0782ba38.js"><link rel="prefetch" href="/assets/js/96.95f2b789.js"><link rel="prefetch" href="/assets/js/97.b479ff0f.js"><link rel="prefetch" href="/assets/js/98.ed1ddc87.js"><link rel="prefetch" href="/assets/js/99.d40596ea.js">
    <link rel="stylesheet" href="/assets/css/0.styles.265dc05e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">AhuntSun</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/navitem/git/" class="nav-link">
  Git应用详解
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          理论篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/theory/" class="nav-link">
  JavaScript版基础知识
</a></li></ul></li><li class="dropdown-item"><h4>
          实战篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/example/2offer/" class="nav-link">
  剑指offer
</a></li><li class="dropdown-subitem"><a href="/navitem/algorithm/example/leecode/" class="nav-link">
  leecode精选
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/navitem/article/" class="nav-link">
  好文转载
</a></div><div class="nav-item"><a href="/navitem/essay/" class="nav-link router-link-active">
  随笔整合
</a></div><div class="nav-item"><a href="/navitem/demo/" class="nav-link">
  实战Demo
</a></div><div class="nav-item"><a href="/navitem/esun/" class="nav-link">
  eSun-UI
</a></div><div class="nav-item"><a href="/navitem/tech/" class="nav-link">
  编程技巧
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cubic-bezier.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  贝塞尔曲线
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://easings.net/en" target="_blank" rel="noopener noreferrer" class="nav-link external">
  加速度曲线速查
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用网站" class="dropdown-title"><span class="title">实用网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/navitem/website/1/" class="nav-link">
  图片编辑
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/2/" class="nav-link">
  样式设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/3/" class="nav-link">
  论坛网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/4/" class="nav-link">
  在线学习
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/5/" class="nav-link">
  创新社区
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/6/" class="nav-link">
  优质图库
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/7/" class="nav-link">
  UI设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/8/" class="nav-link">
  工具网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/9/" class="nav-link">
  JavaScript库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="联系我" class="dropdown-title"><span class="title">联系我</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/AhuntSun-blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_43425487" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/user/5dea331b518825123e7ae8d4" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AhuntSun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/ahuntsun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/navitem/git/" class="nav-link">
  Git应用详解
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          理论篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/theory/" class="nav-link">
  JavaScript版基础知识
</a></li></ul></li><li class="dropdown-item"><h4>
          实战篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/example/2offer/" class="nav-link">
  剑指offer
</a></li><li class="dropdown-subitem"><a href="/navitem/algorithm/example/leecode/" class="nav-link">
  leecode精选
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/navitem/article/" class="nav-link">
  好文转载
</a></div><div class="nav-item"><a href="/navitem/essay/" class="nav-link router-link-active">
  随笔整合
</a></div><div class="nav-item"><a href="/navitem/demo/" class="nav-link">
  实战Demo
</a></div><div class="nav-item"><a href="/navitem/esun/" class="nav-link">
  eSun-UI
</a></div><div class="nav-item"><a href="/navitem/tech/" class="nav-link">
  编程技巧
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cubic-bezier.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  贝塞尔曲线
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://easings.net/en" target="_blank" rel="noopener noreferrer" class="nav-link external">
  加速度曲线速查
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用网站" class="dropdown-title"><span class="title">实用网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/navitem/website/1/" class="nav-link">
  图片编辑
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/2/" class="nav-link">
  样式设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/3/" class="nav-link">
  论坛网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/4/" class="nav-link">
  在线学习
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/5/" class="nav-link">
  创新社区
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/6/" class="nav-link">
  优质图库
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/7/" class="nav-link">
  UI设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/8/" class="nav-link">
  工具网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/9/" class="nav-link">
  JavaScript库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="联系我" class="dropdown-title"><span class="title">联系我</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/AhuntSun-blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_43425487" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/user/5dea331b518825123e7ae8d4" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AhuntSun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/ahuntsun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>随笔整合</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/navitem/essay/notes/1.html" aria-current="page" class="active sidebar-link">01.一文摸透从输入URL到页面渲染的过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/navitem/essay/notes/1.html#一、chrome架构" class="sidebar-link">一、Chrome架构</a></li><li class="sidebar-sub-header"><a href="/navitem/essay/notes/1.html#二、导航阶段" class="sidebar-link">二、导航阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/navitem/essay/notes/1.html#ⅰ-浏览器主进程" class="sidebar-link">Ⅰ.浏览器主进程</a></li><li class="sidebar-sub-header"><a href="/navitem/essay/notes/1.html#ⅱ-网络进程" class="sidebar-link">Ⅱ.网络进程</a></li></ul></li><li class="sidebar-sub-header"><a href="/navitem/essay/notes/1.html#三、渲染阶段" class="sidebar-link">三、渲染阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/navitem/essay/notes/1.html#ⅲ-渲染进程" class="sidebar-link">Ⅲ.渲染进程</a></li><li class="sidebar-sub-header"><a href="/navitem/essay/notes/1.html#ⅳ-gpu进程" class="sidebar-link">Ⅳ.GPU进程</a></li><li class="sidebar-sub-header"><a href="/navitem/essay/notes/1.html#ⅴ-浏览器主进程" class="sidebar-link">Ⅴ.浏览器主进程</a></li></ul></li></ul></li><li><a href="/navitem/essay/notes/2.html" class="sidebar-link">02.解决移动端1px边框问题的几种方法</a></li><li><a href="/navitem/essay/notes/3.html" class="sidebar-link">03.什么是跨域？</a></li><li><a href="/navitem/essay/notes/4.html" class="sidebar-link">04.移动端300ms延迟</a></li><li><a href="/navitem/essay/notes/5.html" class="sidebar-link">05.Ajax简介</a></li><li><a href="/navitem/essay/notes/6.html" class="sidebar-link">06.Max-age和Expires</a></li><li><a href="/navitem/essay/notes/7.html" class="sidebar-link">07.Vue的生命周期与响应式原理</a></li><li><a href="/navitem/essay/notes/8.html" class="sidebar-link">08.详解HTTP协议</a></li><li><a href="/navitem/essay/notes/9.html" class="sidebar-link">09.浅谈前端性能优化</a></li><li><a href="/navitem/essay/notes/10.html" class="sidebar-link">10.面试体会</a></li><li><a href="/navitem/essay/notes/11.html" class="sidebar-link">11.知识点整理①</a></li><li><a href="/navitem/essay/notes/12.html" class="sidebar-link">12.知识点整理②</a></li><li><a href="/navitem/essay/notes/13.html" class="sidebar-link">13.知识点整理③</a></li><li><a href="/navitem/essay/notes/14.html" class="sidebar-link">14.宏任务与微任务</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_01-一文摸透从输入url到页面渲染的过程"><a href="#_01-一文摸透从输入url到页面渲染的过程" class="header-anchor">#</a> 01.一文摸透从输入URL到页面渲染的过程</h1> <p>从输入<code>URL</code>到页面渲染需要<code>Chrome</code>浏览器的多个进程配合，所以我们先来谈谈现阶段<code>Chrome</code>浏览器的多进程架构。</p> <h2 id="一、chrome架构"><a href="#一、chrome架构" class="header-anchor">#</a> 一、<code>Chrome</code>架构</h2> <p>目前<code>Chrome</code>采用的是多进程的架构模式，可分为主要的五类进程，分别是：浏览器（<code>Browser</code>）主进程、 <code>GPU</code> 进程、网络（<code>NetWork</code>）进程、多个渲染进程和多个插件进程；</p> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/0.1.png" alt=""></p> <ul><li><strong>浏览器进程</strong>。主要负责界面显示、用户交互、子进程管理，同时提供存储等功能。</li> <li><strong>渲染进程</strong>。核心任务是将<code>HTML</code>、<code>CSS</code> 和 <code>JavaScript</code>转换为用户可以与之交互的网页，排版引擎<code>Blink</code>和<code>JavaScript</code>引擎<code>V8</code>都是运行在该进程中，默认情况下，<code>Chrome</code>会为每个<code>Tab</code>标签创建一个渲染进程。出于安全考虑，渲染进程都是运行在沙箱模式下。</li> <li><strong><code>GPU</code>进程</strong>。其实，<code>Chrome</code>刚开始发布的时候是没有<code>GPU</code>进程的。而<code>GPU</code>的使用初衷是为了实现<code>3D CSS</code>的效果，只是随后网页、<code>Chrome</code>的<code>UI</code>界面都选择采用<code>GPU</code>来绘制，这使得<code>GPU</code>成为浏览器普遍的需求。最后，<code>Chrome</code>在其多进程架构上也引入了<code>GPU</code>进程。</li> <li><strong>网络进程</strong>。主要负责页面的网络资源加载，之前是作为一个模块运行在浏览器进程里面的，直至最近才独立出来，成为一个单独的进程。</li> <li><strong>插件进程</strong>。主要是负责插件的运行，因插件易崩溃，所以需要通过插件进程来隔离，以保证插件进程崩溃不会对浏览器和页面造成影响</li></ul> <p>了解了<code>Chrome</code>的多进程架构，就能够从宏观上理解从输入<code>URL</code>到页面渲染的过程了，这个过程主要分为<strong>导航阶段</strong>和<strong>渲染阶段</strong>。</p> <h2 id="二、导航阶段"><a href="#二、导航阶段" class="header-anchor">#</a> 二、导航阶段</h2> <h3 id="ⅰ-浏览器主进程"><a href="#ⅰ-浏览器主进程" class="header-anchor">#</a> Ⅰ.浏览器主进程</h3> <h4 id="_1-用户输入url"><a href="#_1-用户输入url" class="header-anchor">#</a> 1.用户输入<code>URL</code></h4> <ul><li>**1、**浏览器进程检查<code>url</code>，组装协议，构成完整的<code>url</code>，这时候有两种情况：
<ul><li>输入的是搜索内容：地址栏会使用浏览器默认的搜索引擎，来合成新的带搜索关键字的<code>URL</code>。</li> <li>输入的是请求<code>URL</code>：地址栏会根据规则，给这段内容加上协议，合成为完整的<code>URL</code>；</li></ul></li> <li>**2、**浏览器进程通过进程间通信（<code>IPC</code>）把<code>url</code>请求发送给网络进程；</li></ul> <h3 id="ⅱ-网络进程"><a href="#ⅱ-网络进程" class="header-anchor">#</a> Ⅱ.网络进程</h3> <h4 id="_2-url请求过程"><a href="#_2-url请求过程" class="header-anchor">#</a> 2.<code>URL</code>请求过程</h4> <ul><li>**3、**网络进程接收到<code>url</code>请求后检查本地缓存是否缓存了该请求资源，如果有则将该资源返回给浏览器进程；</li></ul> <blockquote><p>这里涉及到浏览器与HTTP协议的缓存策略问题，有兴趣的可以看这篇文章：<a href="https://www.cnblogs.com/AhuntSun-blog/p/12529920.html" target="_blank" rel="noopener noreferrer">详解HTTP协议<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <ul><li><p>**4、**准备<code>IP</code>地址和端口：进行<code>DNS</code>解析时先查找缓存，没有再使用<code>DNS</code>服务器解析，查找顺序为：</p> <ul><li>浏览器缓存；</li> <li>本机缓存；</li> <li><code>hosts</code>文件；</li> <li>路由器缓存；</li> <li><code>ISP DNS</code>缓存；</li> <li><code>DNS</code>递归查询（本地<code>DNS</code>服务器 -&gt; 权限<code>DNS</code>服务器 -&gt; 顶级<code>DNS</code>服务器 -&gt; <code>13</code>台根<code>DNS</code>服务器）</li></ul></li> <li><p>**5、**等待<code>TCP</code>队列：浏览器会为每个域名最多维护<code>6</code>个<code>TCP</code>连接，如果发起一个<code>HTTP</code>请求时，这 <code>6</code>个 <code>TCP</code>连接都处于忙碌状态，那么这个请求就会处于排队状态；解决方案：</p> <ul><li>采用域名分片技术：将一个站点的资源放在多个（<code>CDN</code>）域名下面。</li> <li>升级为<code>HTTP2</code>，就没有<code>6</code>个<code>TCP</code>连接的限制了；</li></ul></li> <li><p>**6、**通过三次握手建立<code>TCP</code>连接：</p> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/0.2.png" alt="123"></p> <ul><li>**第一次：**客户端先向服务器端发送一个同步数据包，报文的<code>TCP</code>首部中：标志位：**同步<code>SYN</code>**为<code>1</code>，表示这是一个请求建立连接的数据包；序号<code>Seq=x</code>，<code>x</code>为所传送数据的第一个字节的序号，随后进入<code>SYN-SENT</code>状态；</li></ul> <blockquote><p>标志位值为<code>1</code>表示该标志位有效。</p></blockquote> <ul><li>**第二次：**服务器根据收到数据包的<code>SYN</code>标志位判断为建立连接的请求，随后返回一个确认数据包，其中标志位<code>SYN=1</code>，<code>ACK=1</code>，序号<code>seq=y</code>，确认号<code>ack=x + 1</code>表示收到了客户端传输过来的<code>x</code>字节数据，并希望下次从<code>x+1</code>个字节开始传，并进入<code>SYN-RCVD</code>状态；</li></ul> <blockquote><p>这里要区分标志位<code>ACK</code>和确认号<code>ack</code>；</p></blockquote> <ul><li>**第三次：**客户端收到后，再给服务器发送一个确认数据包，标志位<code>ACK=1</code>，序号<code>seq=x+1</code>，确认号<code>ack=y+1</code>，随后进入<code>ESTABLISHED</code>状态；</li></ul> <p>服务器端收到后，也进入<code>ESTABLISHED</code>状态，由此成功建立了<code>TCP</code>连接，可以开始数据传送；</p> <ul><li><strong>为什么要第三次挥手？<strong>避免服务器等待造成</strong>资源浪费</strong>，具体原因：</li></ul> <blockquote><p>如果没有最后一个数据包确认（第三次握手），<code>A</code>先发出一个建立连接的请求数据包，由于网络原因绕远路了。<code>A</code>经过设定的超时时间后还未收到<code>B</code>的确认数据包。</p> <p>于是发出第二个建立连接的请求数据包，这次网路通畅，<code>B</code>的确认数据包也很快就到达<code>A</code>。于是<code>A</code>与<code>B</code>开始传输数据；</p> <p>过了一会<code>A</code>第一次发出的建立连接的请求数据包到达了<code>B</code>，<code>B</code>以为是再次建立连接，所以又发出一个确认数据包。由于A已经收到了一个确认数据包，所以会忽略<code>B</code>发来的第二个确认数据包，但是<code>B</code>发出确认数据包之后就要一直等待<code>A</code>的回复，而<code>A</code>永远也不会回复。</p> <p>由此造成服务器资源浪费，这种情况多了<code>B</code>计算机可能就停止响应了。</p></blockquote></li> <li><p>**7、**构建并发送<code>HTTP</code>请求信息；</p></li> <li><p>**8、**服务器端处理请求；</p></li> <li><p>**9、**客户端处理响应，首先检查服务器响应报文的状态码：</p> <ul><li>如果是<code>301/302</code>表示服务器已更换域名需要重定向，这时网络进程会从响应头的<code>Location</code>字段里面读取重定向的地址，然后再发起新的<code>HTTP</code>或者<code>HTTPS</code>请求，跳回第<code>4</code>步。</li> <li>如果是<code>200</code>，就检查<code>Content-Type</code>字段，值为<code>text/html</code>说明是<code>HTML</code>文档，是<code>application/octet-stream</code>说明是文件下载；</li></ul></li></ul> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/1.png" alt=""></p> <ul><li>**10、**请求结束，当通用首部字段<code>Conection</code>不是<code>Keep-Alive</code>时，即不为<code>TCP</code>长连接时，通过四次挥手断开<code>TCP</code>连接：</li></ul> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/1.5.png" alt=""></p> <ul><li>**第一次：**客户端（主动断开连接）发送数据包给服务器，其中标志位<code>FIN=1</code>，序号位<code>seq=u</code>，并停止发送数据；</li> <li>**第二次：**服务器收到数据包后，由于还需传输数据，无法立即关闭连接，先返回一个标志位<code>ACK=1</code>，序号<code>seq=v</code>，确认号<code>ack=u+1</code>的数据包；</li> <li>**第三次：**服务器准备好断开连接后，返回一个数据包，其中标志位<code>FIN=1</code>，标志位<code>ACK=1</code>，序号<code>seq=w</code>，确认号<code>ack=u+1</code>；</li> <li>**第四次：**客户端收到数据包后，返回一个标志位<code>ACK=1</code>，序号<code>seq=u+1</code>，确认号<code>ack=w+1</code>的数据包。</li></ul> <p>由此通过四次挥手断开<code>TCP</code>连接。</p> <blockquote><p>详细过程参见：<a href="https://www.cnblogs.com/AhuntSun-blog/p/12028636.html" target="_blank" rel="noopener noreferrer">详解TCP连接的“三次握手”与“四次挥手”(上)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <ul><li>**为什么要四次挥手？**由于服务器不能马上断开连接，导致<code>FIN</code>释放连接报文与<code>ACK</code>确认接收报文需要分两次传输，即第二次和第三次&quot;挥手&quot;；</li></ul> <h4 id="_3-准备渲染进程"><a href="#_3-准备渲染进程" class="header-anchor">#</a> 3.准备渲染进程</h4> <ul><li>**11、**准备渲染进程：浏览器进程检查当前<code>url</code>是否与之前打开了渲染进程的页面的根域名相同，如果相同，则复用原来的进程，如果不同，则开启新的渲染进程；</li></ul> <h4 id="_4-提交文档"><a href="#_4-提交文档" class="header-anchor">#</a> 4.提交文档</h4> <ul><li>**12、**提交文档：
<ul><li><strong>渲染进程</strong>准备好后，<strong>浏览器</strong>向<strong>渲染进程</strong>发起“<strong>提交文档</strong>”的消息，<strong>渲染进程</strong>接收到消息后与<strong>网络进程</strong>建立传输数据的“<strong>管道</strong>”</li> <li><strong>渲染进程</strong>接收完数据后，向浏览器发送“<strong>确认提交</strong>”</li> <li><strong>浏览器进程</strong>接收到确认消息后更新浏览器界面状态：<strong>安全状态</strong>、<strong>地址栏<code>url</code></strong>、<strong>前进后退的历史状态</strong>、<strong>更新<code>web</code>页面</strong></li></ul></li></ul> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/2.png" alt=""></p> <h2 id="三、渲染阶段"><a href="#三、渲染阶段" class="header-anchor">#</a> 三、渲染阶段</h2> <p>在渲染阶段通过<strong>渲染流水线</strong>在渲染进程的主线程和合成线程配合下，完成页面的渲染；</p> <h3 id="ⅲ-渲染进程"><a href="#ⅲ-渲染进程" class="header-anchor">#</a> Ⅲ.渲染进程</h3> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/3.png" alt=""></p> <blockquote><p><strong>渲染进程中的主线程部分</strong></p></blockquote> <h4 id="_5-构建dom树"><a href="#_5-构建dom树" class="header-anchor">#</a> 5.构建<code>DOM</code>树</h4> <ul><li><p><strong>13、<strong>先将请求回来的数据解压，随后<code>HTML</code>解析器将其中的<code>HTML</code><strong>字节流</strong>通过</strong>分词器</strong>拆分为一个个<code>Token</code>，然后生成节点<code>Node</code>，最后解析成浏览器识别的<code>DOM</code>树结构。</p> <p>可以通过<code>Chrome</code>调试工具的<code>Console</code>选项打开控制台输入<code>document</code>查看<code>DOM</code>树；</p></li></ul> <blockquote><p>渲染引擎还有一个<strong>安全检查模块</strong>叫 <code>XSSAuditor</code>，是用来<strong>检测词法安全</strong>的。在分词器解析出来 <code>Token</code> 之后，它会检测这些模块是否安全，比如<strong>是否引用了外部脚本</strong>，<strong>是否符合 <code>CSP</code> 规范</strong>，<strong>是否存在跨站点请求</strong>等。如果出现不符合规范的内容，<code>XSSAuditor</code> 会对该脚本或者下载任务<strong>进行拦截</strong>。</p></blockquote> <p>首次解析<code>HTML</code>时<strong>渲染进程</strong>会开启一个<strong>预解析线程</strong>，遇到<code>HTML</code>文档中内嵌的<code>JavaScript</code>和<code>CSS</code>外部引用就会同步提前下载这些文件，下载时间以最后下载完的文件为准。</p> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/4.png" alt=""></p> <h4 id="_6-构建cssom"><a href="#_6-构建cssom" class="header-anchor">#</a> 6.构建<code>CSSOM</code></h4> <ul><li><p><strong>14、</strong><code>CSS</code>解析器将<code>CSS</code>转换为浏览器能识别的<code>styleSheets</code>也就是<code>CSSOM</code>：可以通过控制台输入<code>document.styleSheets</code>查看；</p> <p>这里要考虑一下阻塞的问题，由于<code>JavaScript</code>有修改<code>CSS</code>和<code>HTML</code>的能力，所以，需要先等到 <code>CSS</code> 文件下载完成并生成 <code>CSSOM</code>，然后再执行 <code>JavaScript</code> 脚本，最后再继续构建 <code>DOM</code>。由于这种阻塞，导致了<strong>解析白屏</strong>；</p></li></ul> <blockquote><p><strong>优化方案：</strong></p> <ul><li><strong>移除<code>js</code>和<code>css</code>的文件下载</strong>：通过内联 <code>JavaScript</code>、内联 <code>CSS</code>；</li> <li><strong>尽量减少文件大小</strong>：如通过 <code>webpack</code> 等工具<strong>移除</strong>不必要的<strong>注释</strong>，并<strong>压缩 <code>js</code> 文件</strong>；</li> <li>将不进行<code>DOM</code>操作或<code>CSS</code>样式修改的  <code>JavaScript</code> 标记上 <code>sync</code> 或者 <code>defer</code>异步引入；</li> <li><strong>使用媒体查询属性</strong>：将大的<code>CSS</code>文件拆分成多个不同用途的 <code>CSS</code> 文件，只有在特定的场景下才会加载特定的 <code>CSS</code> 文件。</li></ul></blockquote> <p>可以通过浏览器调试工具的<code>Network</code>面板中的<code>DOMContentLoaded</code>查看最后生成<code>DOM</code>树所需的时间；</p> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/5.png" alt=""></p> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/6.png" alt="image-20200405110720560"></p> <h4 id="_7-样式计算"><a href="#_7-样式计算" class="header-anchor">#</a> 7.样式计算</h4> <ul><li>**15、**转换样式表中的属性值，使其标准化。比如将<code>em</code>转换为<code>px</code>，<code>color</code>转换为<code>rgb</code>；</li> <li>**16、**计算<code>DOM</code>树中每个节点的具体样式，这里遵循<code>CSS</code>的继承和层叠规则；可以通过<code>Chrome</code>调试工具的<code>Elements</code>选项的<code>Computed</code>查看某一标签的最终样式；</li></ul> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/7.png" alt="image-20200405110849074"></p> <h4 id="_8-布局阶段"><a href="#_8-布局阶段" class="header-anchor">#</a> 8.布局阶段</h4> <ul><li><p>**17、**创建布局树，遍历<code>DOM</code>树中的所有节点，去掉所有隐藏的节点（比如<code>head</code>，添加了<code>display:none</code>的节点），只在布局树中保留可见的节点。</p></li> <li><p>**18、**计算布局树中节点的坐标位置（较复杂，这里不展开）；</p></li></ul> <h4 id="_9-分层"><a href="#_9-分层" class="header-anchor">#</a> 9.分层</h4> <ul><li>**19、**对布局树进行分层，并生成分层树（<code>Layer Tree</code>），可以通过<code>Chrome</code>调试工具的<code>Layer</code>选项查看。分层树中每一个节点都直接或间接的属于一个图层（如果一个节点没有对应的层，那么这个节点就从属于父节点的图层）</li></ul> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/8.png" alt="image-20200405111350260"></p> <h4 id="_10-图层绘制"><a href="#_10-图层绘制" class="header-anchor">#</a> 10.图层绘制</h4> <ul><li>**20、**为每个图层生成绘制列表（即绘制指令），并将其提交到合成线程。以上操作都是在渲染进程中的主线程中进行的，提交到合成线程后就不阻塞主线程了；</li></ul> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/9.png" alt=""></p> <blockquote><p><strong>渲染进程中的合成线程部分</strong></p></blockquote> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/10.png" alt=""></p> <h4 id="_11-切分图块"><a href="#_11-切分图块" class="header-anchor">#</a> 11.切分图块</h4> <p><strong>21、<strong>合成线程将图层切分成大小固定的图块（<code>256x256</code>或者<code>512x512</code>）然后</strong>优先绘制</strong>靠近视口的图块，这样就可以大大加速页面的显示速度；</p> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/11.png" alt=""></p> <h3 id="ⅳ-gpu进程"><a href="#ⅳ-gpu进程" class="header-anchor">#</a> Ⅳ.<code>GPU</code>进程</h3> <h4 id="_12-栅格化操作"><a href="#_12-栅格化操作" class="header-anchor">#</a> 12.栅格化操作</h4> <ul><li><strong>22、<strong>在</strong>光栅化线程池</strong>中将<strong>图块</strong>转换成<strong>位图</strong>，通常这个过程都会使用<code>GPU</code>来加速生成，使用<code>GPU</code>生成位图的过程叫<strong>快速栅格化</strong>，或者<code>GPU</code>栅格化，生成的位图被保存在<code>GPU</code>内存中。</li></ul> <p><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/12.png" alt=""></p> <h3 id="ⅴ-浏览器主进程"><a href="#ⅴ-浏览器主进程" class="header-anchor">#</a> Ⅴ.浏览器主进程</h3> <h4 id="_13-合成与显示"><a href="#_13-合成与显示" class="header-anchor">#</a> 13.合成与显示</h4> <ul><li>**23、**合成：一旦所有图块都被光栅化，<strong>合成线程</strong>就会将它们合成为一张图片，并生成一个绘制图块的命令——“<code>DrawQuad</code>”，然后将该命令提交给浏览器进程。</li></ul> <blockquote><p><strong>注意了：<strong>合成的过程是在渲染进程的</strong>合成线程</strong>中完成的，不会影响到渲染进程的<strong>主线程</strong>执行；</p></blockquote> <ul><li>**24、**显示：浏览器进程里面有一个叫<code>viz</code>的组件，用来接收合成线程发过来的<code>DrawQuad</code>命令，然后根据<code>DrawQuad</code>命令，将其页面内容绘制到内存中，最后再将内存显示在屏幕上。</li></ul> <p>到这里，经过这一系列的阶段，编写好的<code>HTML</code>、<code>CSS</code>、<code>JavaScript</code>等文件，经过浏览器就会显示出漂亮的页面了。</p> <blockquote><p>参考资料：<a href="https://time.geekbang.org/column/intro/100033601" target="_blank" rel="noopener noreferrer">浏览器工作原理与实践<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新于:</span> <span class="time">2020年6月13日星期六晚上7点32分</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/navitem/essay/notes/2.html">
        02.解决移动端1px边框问题的几种方法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.0f1658bb.js" defer></script><script src="/assets/js/2.39079bb7.js" defer></script><script src="/assets/js/82.5ac2a8ef.js" defer></script>
  </body>
</html>
