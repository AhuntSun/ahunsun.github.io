<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第四讲：版本回退的三种方式与stash | AhuntSun</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="https://blog-static.cnblogs.com/files/AhuntSun-blog/sun1.ico">
    <link rel="stylesheet" href="/css/style.css">
    <script charset="utf-8" src="/js/main.js"></script>
    <meta name="description" content="🌕今日事,今日毕🌕">
    <meta name="keywords" content="AhuntSun, vuepress博客, 学习, 分享">
    <meta name="author" content="AhuntSun">
    <link rel="preload" href="/assets/css/0.styles.265dc05e.css" as="style"><link rel="preload" href="/assets/js/app.ca5cc671.js" as="script"><link rel="preload" href="/assets/js/2.39079bb7.js" as="script"><link rel="preload" href="/assets/js/103.3b27ad94.js" as="script"><link rel="prefetch" href="/assets/js/10.1ecb730e.js"><link rel="prefetch" href="/assets/js/100.057d6055.js"><link rel="prefetch" href="/assets/js/101.b29fc953.js"><link rel="prefetch" href="/assets/js/102.2572c9be.js"><link rel="prefetch" href="/assets/js/104.3731fbd3.js"><link rel="prefetch" href="/assets/js/105.a7c9ad92.js"><link rel="prefetch" href="/assets/js/106.36e314aa.js"><link rel="prefetch" href="/assets/js/107.6ec529aa.js"><link rel="prefetch" href="/assets/js/108.fb65aab2.js"><link rel="prefetch" href="/assets/js/109.73ba07b8.js"><link rel="prefetch" href="/assets/js/11.a05914c3.js"><link rel="prefetch" href="/assets/js/110.ca1eb247.js"><link rel="prefetch" href="/assets/js/111.c71aa5f7.js"><link rel="prefetch" href="/assets/js/112.8142b94e.js"><link rel="prefetch" href="/assets/js/113.bd4f0024.js"><link rel="prefetch" href="/assets/js/114.a699f37f.js"><link rel="prefetch" href="/assets/js/115.c5b495d2.js"><link rel="prefetch" href="/assets/js/116.6f3d4e7c.js"><link rel="prefetch" href="/assets/js/117.c56ceb44.js"><link rel="prefetch" href="/assets/js/118.11089bd0.js"><link rel="prefetch" href="/assets/js/119.5518b9d2.js"><link rel="prefetch" href="/assets/js/12.b46051f2.js"><link rel="prefetch" href="/assets/js/13.8e3b1d41.js"><link rel="prefetch" href="/assets/js/14.5b50d887.js"><link rel="prefetch" href="/assets/js/15.5944dae5.js"><link rel="prefetch" href="/assets/js/16.bb0e2ab9.js"><link rel="prefetch" href="/assets/js/17.b1d225ed.js"><link rel="prefetch" href="/assets/js/18.291883e2.js"><link rel="prefetch" href="/assets/js/19.f9e6592b.js"><link rel="prefetch" href="/assets/js/20.9fe3ff9e.js"><link rel="prefetch" href="/assets/js/21.332dcadf.js"><link rel="prefetch" href="/assets/js/22.610951e3.js"><link rel="prefetch" href="/assets/js/23.064f805c.js"><link rel="prefetch" href="/assets/js/24.c202de18.js"><link rel="prefetch" href="/assets/js/25.eecff72d.js"><link rel="prefetch" href="/assets/js/26.9d667fb0.js"><link rel="prefetch" href="/assets/js/27.ab69dd88.js"><link rel="prefetch" href="/assets/js/28.925a6933.js"><link rel="prefetch" href="/assets/js/29.f9dd7695.js"><link rel="prefetch" href="/assets/js/3.93254602.js"><link rel="prefetch" href="/assets/js/30.244da86b.js"><link rel="prefetch" href="/assets/js/31.e1abfd47.js"><link rel="prefetch" href="/assets/js/32.d5ce5b2a.js"><link rel="prefetch" href="/assets/js/33.11f87d9d.js"><link rel="prefetch" href="/assets/js/34.4606019c.js"><link rel="prefetch" href="/assets/js/35.1a40f30d.js"><link rel="prefetch" href="/assets/js/36.0e32baa9.js"><link rel="prefetch" href="/assets/js/37.b85ca083.js"><link rel="prefetch" href="/assets/js/38.8b396a88.js"><link rel="prefetch" href="/assets/js/39.7601379b.js"><link rel="prefetch" href="/assets/js/4.e00be33d.js"><link rel="prefetch" href="/assets/js/40.c7cc8f6d.js"><link rel="prefetch" href="/assets/js/41.a16b9c4e.js"><link rel="prefetch" href="/assets/js/42.5fa68552.js"><link rel="prefetch" href="/assets/js/43.53443cdb.js"><link rel="prefetch" href="/assets/js/44.29a624a7.js"><link rel="prefetch" href="/assets/js/45.9af6b45c.js"><link rel="prefetch" href="/assets/js/46.4bb5db42.js"><link rel="prefetch" href="/assets/js/47.980dc028.js"><link rel="prefetch" href="/assets/js/48.5466f130.js"><link rel="prefetch" href="/assets/js/49.616f7e67.js"><link rel="prefetch" href="/assets/js/5.59c5d4c1.js"><link rel="prefetch" href="/assets/js/50.ac3091f5.js"><link rel="prefetch" href="/assets/js/51.c9172799.js"><link rel="prefetch" href="/assets/js/52.de5d30f3.js"><link rel="prefetch" href="/assets/js/53.dfa209c3.js"><link rel="prefetch" href="/assets/js/54.e962142d.js"><link rel="prefetch" href="/assets/js/55.ffe76555.js"><link rel="prefetch" href="/assets/js/56.aba421de.js"><link rel="prefetch" href="/assets/js/57.be2bc9cb.js"><link rel="prefetch" href="/assets/js/58.4fa385b9.js"><link rel="prefetch" href="/assets/js/59.08364f7c.js"><link rel="prefetch" href="/assets/js/6.67ee82bb.js"><link rel="prefetch" href="/assets/js/60.de6987d0.js"><link rel="prefetch" href="/assets/js/61.f7dc0d6e.js"><link rel="prefetch" href="/assets/js/62.9ff35cf7.js"><link rel="prefetch" href="/assets/js/63.e41da034.js"><link rel="prefetch" href="/assets/js/64.42f6f595.js"><link rel="prefetch" href="/assets/js/65.3e45996c.js"><link rel="prefetch" href="/assets/js/66.83f70b91.js"><link rel="prefetch" href="/assets/js/67.65885aab.js"><link rel="prefetch" href="/assets/js/68.29e28eed.js"><link rel="prefetch" href="/assets/js/69.abbb3e52.js"><link rel="prefetch" href="/assets/js/7.8dbe2569.js"><link rel="prefetch" href="/assets/js/70.12901dfb.js"><link rel="prefetch" href="/assets/js/71.4686b267.js"><link rel="prefetch" href="/assets/js/72.74270703.js"><link rel="prefetch" href="/assets/js/73.5ee75dbd.js"><link rel="prefetch" href="/assets/js/74.5058673b.js"><link rel="prefetch" href="/assets/js/75.205b80ce.js"><link rel="prefetch" href="/assets/js/76.15d4fd09.js"><link rel="prefetch" href="/assets/js/77.383fb255.js"><link rel="prefetch" href="/assets/js/78.101172c6.js"><link rel="prefetch" href="/assets/js/79.85945a06.js"><link rel="prefetch" href="/assets/js/8.8a37f718.js"><link rel="prefetch" href="/assets/js/80.dccd6a68.js"><link rel="prefetch" href="/assets/js/81.3da0691e.js"><link rel="prefetch" href="/assets/js/82.c544e288.js"><link rel="prefetch" href="/assets/js/83.cc0ec694.js"><link rel="prefetch" href="/assets/js/84.ccc07864.js"><link rel="prefetch" href="/assets/js/85.def5d7af.js"><link rel="prefetch" href="/assets/js/86.ef554d1a.js"><link rel="prefetch" href="/assets/js/87.b79cc938.js"><link rel="prefetch" href="/assets/js/88.ec6493a6.js"><link rel="prefetch" href="/assets/js/89.440e8108.js"><link rel="prefetch" href="/assets/js/9.96cf967d.js"><link rel="prefetch" href="/assets/js/90.333f0ccd.js"><link rel="prefetch" href="/assets/js/91.a4b4926c.js"><link rel="prefetch" href="/assets/js/92.9d38f6ca.js"><link rel="prefetch" href="/assets/js/93.dba1ee5a.js"><link rel="prefetch" href="/assets/js/94.807f3e25.js"><link rel="prefetch" href="/assets/js/95.2f76024c.js"><link rel="prefetch" href="/assets/js/96.95f2b789.js"><link rel="prefetch" href="/assets/js/97.162bd2f0.js"><link rel="prefetch" href="/assets/js/98.ed1ddc87.js"><link rel="prefetch" href="/assets/js/99.d40596ea.js">
    <link rel="stylesheet" href="/assets/css/0.styles.265dc05e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">AhuntSun</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/navitem/git/" class="nav-link router-link-active">
  Git应用详解
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          理论篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/theory/" class="nav-link">
  JavaScript版基础知识
</a></li></ul></li><li class="dropdown-item"><h4>
          实战篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/example/2offer/" class="nav-link">
  剑指offer
</a></li><li class="dropdown-subitem"><a href="/navitem/algorithm/example/leecode/" class="nav-link">
  leecode精选
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/navitem/article/" class="nav-link">
  好文转载
</a></div><div class="nav-item"><a href="/navitem/essay/" class="nav-link">
  随笔整合
</a></div><div class="nav-item"><a href="/navitem/demo/" class="nav-link">
  实战Demo
</a></div><div class="nav-item"><a href="/navitem/esun/" class="nav-link">
  eSun-UI
</a></div><div class="nav-item"><a href="/navitem/tech/" class="nav-link">
  面试宝典
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cubic-bezier.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  贝塞尔曲线
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://easings.net/en" target="_blank" rel="noopener noreferrer" class="nav-link external">
  加速度曲线速查
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用网站" class="dropdown-title"><span class="title">实用网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/navitem/website/1/" class="nav-link">
  图片编辑
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/2/" class="nav-link">
  样式设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/3/" class="nav-link">
  论坛网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/4/" class="nav-link">
  在线学习
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/5/" class="nav-link">
  创新社区
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/6/" class="nav-link">
  优质图库
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/7/" class="nav-link">
  UI设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/8/" class="nav-link">
  工具网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/9/" class="nav-link">
  JavaScript库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="联系我" class="dropdown-title"><span class="title">联系我</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/AhuntSun-blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_43425487" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/user/5dea331b518825123e7ae8d4" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AhuntSun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/ahuntsun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/navitem/git/" class="nav-link router-link-active">
  Git应用详解
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          理论篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/theory/" class="nav-link">
  JavaScript版基础知识
</a></li></ul></li><li class="dropdown-item"><h4>
          实战篇
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navitem/algorithm/example/2offer/" class="nav-link">
  剑指offer
</a></li><li class="dropdown-subitem"><a href="/navitem/algorithm/example/leecode/" class="nav-link">
  leecode精选
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/navitem/article/" class="nav-link">
  好文转载
</a></div><div class="nav-item"><a href="/navitem/essay/" class="nav-link">
  随笔整合
</a></div><div class="nav-item"><a href="/navitem/demo/" class="nav-link">
  实战Demo
</a></div><div class="nav-item"><a href="/navitem/esun/" class="nav-link">
  eSun-UI
</a></div><div class="nav-item"><a href="/navitem/tech/" class="nav-link">
  面试宝典
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cubic-bezier.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  贝塞尔曲线
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://easings.net/en" target="_blank" rel="noopener noreferrer" class="nav-link external">
  加速度曲线速查
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用网站" class="dropdown-title"><span class="title">实用网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/navitem/website/1/" class="nav-link">
  图片编辑
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/2/" class="nav-link">
  样式设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/3/" class="nav-link">
  论坛网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/4/" class="nav-link">
  在线学习
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/5/" class="nav-link">
  创新社区
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/6/" class="nav-link">
  优质图库
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/7/" class="nav-link">
  UI设计
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/8/" class="nav-link">
  工具网站
</a></li><li class="dropdown-item"><!----> <a href="/navitem/website/9/" class="nav-link">
  JavaScript库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="联系我" class="dropdown-title"><span class="title">联系我</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/AhuntSun-blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_43425487" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/user/5dea331b518825123e7ae8d4" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AhuntSun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/ahuntsun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Git Tutorial</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/navitem/git/notes/1.html" class="sidebar-link">第一讲：Git 分区，配置与日志</a></li><li><a href="/navitem/git/notes/2.html" class="sidebar-link">第二讲：Git删除、修改、撤销操作</a></li><li><a href="/navitem/git/notes/3.html" class="sidebar-link">第三讲：本地分支的重要操作</a></li><li><a href="/navitem/git/notes/4.html" aria-current="page" class="active sidebar-link">第四讲：版本回退的三种方式与stash</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/navitem/git/notes/4.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/navitem/git/notes/4.html#一、版本回退" class="sidebar-link">一、版本回退</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/navitem/git/notes/4.html#ⅰ-git-reset" class="sidebar-link">Ⅰ.git reset</a></li><li class="sidebar-sub-header"><a href="/navitem/git/notes/4.html#ⅱ-git-revert" class="sidebar-link">Ⅱ.git revert</a></li><li class="sidebar-sub-header"><a href="/navitem/git/notes/4.html#ⅲ-git-checkout" class="sidebar-link">Ⅲ.git checkout</a></li><li class="sidebar-sub-header"><a href="/navitem/git/notes/4.html#ⅳ-revert与reset的选择" class="sidebar-link">Ⅳ.revert与reset的选择</a></li><li class="sidebar-sub-header"><a href="/navitem/git/notes/4.html#ⅴ-回退方法汇总" class="sidebar-link">Ⅴ.回退方法汇总</a></li></ul></li><li class="sidebar-sub-header"><a href="/navitem/git/notes/4.html#二、git-stash" class="sidebar-link">二、git stash</a></li></ul></li><li><a href="/navitem/git/notes/5.html" class="sidebar-link">第五讲：远程仓库Github与Git图形化界面</a></li><li><a href="/navitem/git/notes/6.html" class="sidebar-link">第六讲：Git协作与Git pull常见问题</a></li><li><a href="/navitem/git/notes/7.html" class="sidebar-link">第七讲：Git refspec与远程分支的重要操作</a></li><li><a href="/navitem/git/notes/8.html" class="sidebar-link">第八讲：Git标签、别名与Git gc</a></li><li><a href="/navitem/git/notes/9.html" class="sidebar-link">第九讲：Git cherry-pick与Git rebase</a></li><li><a href="/navitem/git/notes/10.html" class="sidebar-link">第十讲：Git子库：submodule与subtree</a></li><li><a href="/navitem/git/notes/11.html" class="sidebar-link">第十一讲：Git工作流Gitflow</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第四讲：版本回退的三种方式与stash"><a href="#第四讲：版本回退的三种方式与stash" class="header-anchor">#</a> 第四讲：版本回退的三种方式与stash</h1> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p><code>git</code>作为一款版本控制工具，其最核心的功能就是版本回退，没有之一。熟悉<code>git</code>版本回退的操作能够让你真真正正地放开手脚去开发，不用小心翼翼，怕一不小心删除了不该删除的文件。本节除了介绍版本回退的内容之外，还会介绍<code>stash</code>的使用。</p> <h2 id="一、版本回退"><a href="#一、版本回退" class="header-anchor">#</a> 一、版本回退</h2> <p>在<code>git</code>中永远有后悔药可吃，总是可以回到<strong>版本库</strong>的某一个时刻，这就叫做<strong>版本回退</strong>；</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/1.png" alt="image-20200406144058526"></p> <p>如上图所示：当前<code>master</code>分支指针指向<code>D</code>，通过版本回退可以使<code>master</code>指向<code>C</code>、<code>B</code>或<code>A</code>。进行版本回退的命令大体上有三种：<code>reset</code>、<code>revert</code>和<code>checkout</code>。下面就来一一讲解：</p> <h3 id="ⅰ-git-reset"><a href="#ⅰ-git-reset" class="header-anchor">#</a> Ⅰ.<code>git reset</code></h3> <h4 id="_1-参数"><a href="#_1-参数" class="header-anchor">#</a> 1.参数</h4> <p><code>reset</code>命令可以添加很多参数，常用的有<code>--mixed</code>、<code>--soft</code>和<code>--hard</code>三种。下图为一次完整提交的四个阶段：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/2.png" alt="image-20200412192613526"></p> <p>三个参数大体上的区别为：</p> <ul><li><code>--mixed</code>：为默认值，等同于<code>git reset</code>。作用为：将文件回退到<strong>工作区</strong>，此时会保留<strong>工作区</strong>中的文件，但会丢弃<strong>暂存区</strong>中的文件；</li> <li><code>--soft</code>：作用为：将文件回退到<strong>暂存区</strong>，此时会保留<strong>工作区</strong>和<strong>暂存区</strong>中的文件；</li> <li><code>--hard</code>：作用为：将文件回退到<strong>修改前</strong>，此时会丢弃<strong>工作区</strong>和<strong>暂存区</strong>中的文件；</li></ul> <p>下面就来详细地讲解它们的使用方法：</p> <p>首先在<code>master</code>分支进行四次提交，每次提交在<code>test.txt</code>中添加一行文本信息：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/3.png" alt="image-20200406164503683"></p> <h5 id="mixed"><a href="#mixed" class="header-anchor">#</a> <code>--mixed</code></h5> <p>该参数为默认值，作用为：将文件回退到工作区中：如下图所示，将<code>test.txt</code>文件回退一次提交：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/4.png" alt="image-20200412194811197"></p> <p>可以看到第四次提交对<code>test.txt</code>的修改操作被回退到了工作区当中，并且保留了工作区中第四次提交对<code>test.txt</code>所做的修改，所以工作区中的<code>test.txt</code>文件内容与回退前一致。</p> <h5 id="soft"><a href="#soft" class="header-anchor">#</a> <code>--soft</code></h5> <p>该参数的作用为：将文件回退到暂存区中：如下图所示，将<code>test.txt</code>文件回退一次提交：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/5.png" alt="image-20200412195321082"></p> <p>可以看到第四次提交对<code>test.txt</code>的修改操作被回退到了暂存区当中，并且保留了工作区和暂存区中第四次提交对<code>test.txt</code>所做的修改，所以，工作区中的文件内容与回退前一致。</p> <h5 id="hard"><a href="#hard" class="header-anchor">#</a> <code>--hard</code></h5> <p>该参数的作用为：将文件回退到修改前：如下图所示，将<code>test.txt</code>文件回退一次提交：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/6.png" alt="image-20200412205112201"></p> <p>可以看到<code>test.txt</code>直接回到了进行第四次提交前，此时删除了工作区和暂存区中第四次提交对<code>test.txt</code>所做的修改。所以，工作区变得干净了，<code>test.txt</code>文件内容回退到刚完成第三次提交时。</p> <h4 id="_2-写法"><a href="#_2-写法" class="header-anchor">#</a> 2.写法</h4> <p>为了方便演示<code>reset</code>的各种使用方法，下面的指令都采用<code>--hard</code>参数。</p> <h5 id="git-reset-hard-head"><a href="#git-reset-hard-head" class="header-anchor">#</a> <code>git reset --hard HEAD^</code></h5> <p><strong>该命令的作用为回退一次提交：</strong></p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/7.png" alt="image-20200406164628192"></p> <p>回退后的状态为：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/8.png" alt="image-20200406164713774"></p> <p>可以看到，该方法会同时改变了<code>HEAD</code>和<code>master</code>指针的指向；</p> <h5 id="git-reset-hard-head-2"><a href="#git-reset-hard-head-2" class="header-anchor">#</a> <code>git reset --hard HEAD^^</code></h5> <p><strong>该命令的作用为回退两次提交：</strong></p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/9.png" alt="image-20200406170323254"></p> <p>回退后的状态为：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/10.png" alt="image-20200406170352024"></p> <p>同样，使用<code>--hard</code>参数回退，工作区是干净的；可以看到，该方法也会同时改变<code>HEAD</code>和<code>master</code>指针的指向；</p> <h5 id="git-reset-hard-head-n"><a href="#git-reset-hard-head-n" class="header-anchor">#</a> <code>git reset --hard HEAD~n</code></h5> <p><strong>该命令的作用为回退<code>n</code>次提交：</strong></p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/11.png" alt="image-20200406203027868"></p> <p>可以看到使用了<code>--hard</code>参数，回退结果符合预期，并且该方法也会同步修改<code>HEAD</code>和分支<code>master</code>指针的指向。</p> <p><strong>注意：该方式只能向前回退，不能向后回退</strong>。</p> <blockquote><p>上述命令中的<code>HEAD</code>可以更换为分支名，比如<code>master</code>：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git reset --hard master~n
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>该命令表示将<code>master</code>分支回退<code>n</code>次提交。由于<code>HEAD</code>始终指向当前分支，所以使用分支名和使用<code>HEAD</code>效果是一样的。</p></blockquote> <h5 id="git-reset-hard-commit-id"><a href="#git-reset-hard-commit-id" class="header-anchor">#</a> <code>git reset --hard commit_id</code></h5> <p>**该指令的作用为回退到指定的<code>commit id</code>的提交版本；<strong>由于<code>commit id</code>是不会重复的，一般只需要写前几（<code>6</code>）位就可以识别出来。通过<code>commit id</code>的回退方式</strong>既可以向前回退，也可以向后回退。**如下所示，从<code>1st commit</code>往后回退到<code>4th commit</code>，其中<code>4th commit</code>的<code>commit id = bdb373...</code>。</p> <p>为了熟悉该指令，我们分两种方式进行回退：使用<code>--hard</code>参数与使用默认参数。</p> <ul><li><p><strong>使用<code>--hard</code>参数</strong></p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/12.png" alt="image-20200406193422130"></p> <p>从图中可以看出：通过第四次提交的<code>commit_id: bdb373</code>顺利地从第一次提交向后回退到了第四次提交，并且工作区干净。该方法也同时修改了<code>HEAD</code>和分支<code>master</code>的指向，具体过程为：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/13.png" alt="image-20200414171228274"></p></li> <li><p><strong>使用默认参数</strong></p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/14.png" alt="image-20200406193005200"></p> <p>可以看到切换回了<code>4th commit</code>，但是工作区的<code>test.txt</code>文件并没有变化；这是因为，在<code>4th -&gt; 1st</code>的过程中，需要在工作区中删除<code>test.txt</code>文件中的<code>2nd line、3rd line、4th line</code>。通过默认参数<code>--mixed</code>，将<code>4th commit</code>对文件的修改回退到了工作区当中，如下图所示：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/15.png" alt="image-20200406202451310"></p> <p>这个过程丢弃了<strong>暂存区</strong>中对文件的删除操作，但是保留了<strong>工作区</strong>中对文件的删除操作。所以，工作区中的<code>test.txt</code>文件仍然处于删除了三行内容的状态。</p> <p>此时只需要将修改操作从阶段<code>1</code>移动到修改前的阶段<code>0</code>，即可将文件恢复到修改前的状态，并清空工作区。可以采用<code>git restore test.txt</code>实现：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/16.png" alt="image-20200406202716247"></p></li></ul> <h3 id="ⅱ-git-revert"><a href="#ⅱ-git-revert" class="header-anchor">#</a> Ⅱ.<code>git revert</code></h3> <p><code>revert</code>是回滚，重做的意思。不同于<code>reset</code>直接通过改变分支指向来进行版本回退，并且不产生新的提交；<code>revert</code>是通过额外创建一次提交，来取消分支上指定的某次提交的方式，来实现版本回退的。如下图所示，假如想要重做提交<code>B</code>，重做前与重做后的状态为：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/17.png" alt="image-20200413234440432"></p> <p>所谓重做提交<code>B</code>，指的是在新建的提交<code>B'</code>中取消提交<code>B</code>中所做的一切操作。也就是说<code>revert</code>的思想为：通过创建一个新提交来取消不要的提交。所以，提交数会增加。</p> <h4 id="_1-参数-2"><a href="#_1-参数-2" class="header-anchor">#</a> 1.参数</h4> <p><code>git</code>同样为<code>revert</code>提供了许多参数，常用的有以下三种。为了演示它们的作用，首先需要设置对应的测试环境：在<code>dev</code>分支上进行四次提交，每次提交都为<code>test.txt</code>添加一行内容：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/18.png" alt="image-20200414000404304"></p> <h5 id="e"><a href="#e" class="header-anchor">#</a> <code>-e</code></h5> <p><code>-e</code>参数是<code>--edit</code>的缩写，为<code>revert</code>指令的默认参数，即<code>git revert -e</code>等同于<code>git revert</code>。该参数的作用为在重做过程中，新建一次提交的同时编辑提交信息。比如通过以下命令重做上述的<code>dev2</code>提交：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git revert f4a95
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行该指令后会创建一次新的提交来取消提交<code>dev2</code>所做的一切操作，并且会进入<code>vim</code>编辑器，编辑新提交的提交注释：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/19.png" alt="image-20200414115052089"></p> <p>如下图所示，提交<code>dev2</code>为文件<code>test.txt</code>添加的<code>dev2</code>文本被取消了，并且<code>dev</code>分支上多了一次提交：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/20.png" alt="image-20200414114945783"></p> <h5 id="no-edit"><a href="#no-edit" class="header-anchor">#</a> <code>--no-edit</code></h5> <p>该参数的作用为不编辑由于<code>revert</code>重做，所新增提交的注释信息。如下图所示，通过：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git revert --no-edit f4a95b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>重做提交<code>dev2</code>的过程中，并不会进入<code>vim</code>编辑器编辑新增提交的注释信息，而是采用默认的注释信息：<code>Revert &quot;dev2&quot;</code>：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/21.png" alt="image-20200414114748865"></p> <h5 id="n"><a href="#n" class="header-anchor">#</a> <code>-n</code></h5> <p><code>-n</code>参数是<code>--no-commit</code>的简写形式，作用为对<code>revert</code>重做某次提交时所产生的修改，不进行提交，也就是不会新增一次提交；</p> <p>如下图所示，这是<code>revert</code>指令通过新建提交<code>B'</code>来取消提交<code>B</code>的过程，分为<code>0~4</code>个阶段。不添加<code>-n</code>参数时，<code>revert</code>指令会产生一次额外提交<code>B'</code>，此时处于下图中的第<code>3</code>阶段。而使用<code>-n</code>参数时，虽然<code>revert</code>指令也会通过新建提交<code>B'</code>来重做提交<code>B</code>。但是，此时还处于生成提交<code>B'</code>的过程，还没有完全生成提交<code>B'</code>，也就是处于下图中的第<code>2</code>阶段。</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/22.png" alt="image-20200414002942670"></p> <p>这种做法的好处是，允许我们干涉<code>revert</code>重做过程，手动进行提交。如下图所示，通过：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git revert -n f4a95
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>重做提交<code>dev2</code>的过程中，手动暂停了重做过程。虽然提交<code>dev2</code>对<code>test.txt</code>所做的修改已被撤销，但是这一重做操作还未进行提交：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/23.png" alt="image-20200414120436217"></p> <p>这样我们既可以修改重做过程中不满意的地方，也可以随意添加注释。修改完后，通过手动提交的方式，完成重做（<code>REVERTING</code>）操作：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/24.png" alt="image-20200414121147251"></p> <h4 id="_2-写法-2"><a href="#_2-写法-2" class="header-anchor">#</a> 2.写法</h4> <p><code>revert</code>指令也有多种写法，下面介绍主要的几种。为了方便演示，下列指令都采用默认参数<code>-e</code>手动编辑每次新增提交的注释信息。</p> <h5 id="git-revert-commit-id"><a href="#git-revert-commit-id" class="header-anchor">#</a> <code>git revert commit_id</code></h5> <p>这是最常用的写法，通过<code>commit_id</code>精准地选择想要重做的提交。分两种情况：</p> <ul><li><p>**情况一：**重做最新一次提交，不会发生冲突。</p> <p>例如：通过以下指令，重做<code>dev</code>分支上最新的一次提交<code>dev2</code>：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git revert f4a95b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>首先进入<code>vim</code>编辑器编辑新增提交的注释信息：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/25.png" alt="image-20200414135326937"></p> <p>随后完成重做操作，如下图所示；可见提交<code>dev2</code>给<code>test.txt</code>添加的<code>dev2</code>内容被删除了，并且多出一次提交，说明重做成功：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/26.png" alt="image-20200414140040443"></p></li> <li><p>**情况二：**重做非最新一次提交，会发生冲突。</p> <p>例如：通过以下指令，重做<code>dev</code>分支上的第三次提交<code>dev1</code>：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git revert dbde45
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>会出现合并冲突：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/27.png" alt="image-20200414140502098"></p> <p>使用<code>git mergetool</code>指令，通过<code>vim</code>编辑器的工具<code>vimdiff</code>显示冲突文件<code>test.txt</code>：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/28.png" alt="image-20200414140645448"></p> <p>回车进入<code>vim</code>编辑器界面，解决冲突：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/29.png" alt="image-20200414141354304"></p> <p>解决冲突之后，手动进行一次提交，完成<code>revert</code>过程：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/30.png" alt="image-20200414142323103"></p></li> <li><p><strong>为什么会出现冲突？</strong></p> <p>通过上面的例子不难看出，<code>revert</code>操作生成的<strong>新提交其实是通过两次提交合并而成</strong>的。如下图所示：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/31.png" alt="image-20200414143430837"></p> <ul><li>首先，将被重做的提交<code>dev1</code>的前一次提交<code>2nd</code>复制一份，即图中的<code>2nd'</code>；</li> <li>然后，将它与当前分支的最新提交<code>dev2</code>进行合并，由此生成<code>revert</code>操作新增的提交；</li></ul> <p>知道了<code>revert</code>操作新增的提交的由来后，就不难解释为什么会出现合并冲突了，如下图所示：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/32.png" alt="image-20200414144109389"></p> <p>合并的两次提交中，文件<code>test.txt</code>的内容不一样。<code>git</code>不知道以哪个版本为准，自然会导致自动合并失败，需要手动合并。</p></li></ul> <h5 id="git-revert-head"><a href="#git-revert-head" class="header-anchor">#</a> <code>git revert HEAD</code></h5> <p>该指令的作用为重做所在分支的最新一次提交，并且不会发生冲突：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/33.png" alt="image-20200414150640086"></p> <h5 id="git-revert-head-2"><a href="#git-revert-head-2" class="header-anchor">#</a> <code>git revert HEAD^</code></h5> <p>该指令的作用为重做所在分支的倒数第二次提交，会发生冲突，需要手动合并，完成重做操作：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/34.png" alt="image-20200414151002143"></p> <h5 id="git-revert-head-3"><a href="#git-revert-head-3" class="header-anchor">#</a> <code>git revert HEAD^^</code></h5> <p>该指令的作用为重做所在分支的倒数第三次提交，会发生冲突，需要手动合并，完成重做操作：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/35.png" alt="image-20200414180953703"></p> <h5 id="git-revert-head-n"><a href="#git-revert-head-n" class="header-anchor">#</a> <code>git revert HEAD~n</code></h5> <p>该指令的作用为重做所在分支的倒数第<code>n+1</code>次提交，会发生冲突，需要手动合并，完成重做操作。过程与上述一致，这里就不再赘述了。</p> <blockquote><p>**总结：**常用<code>git revert commit_id</code>这种方式。</p></blockquote> <h4 id="_3-撤销revert操作"><a href="#_3-撤销revert操作" class="header-anchor">#</a> 3.撤销<code>revert</code>操作</h4> <p>思路很简单，再次通过<code>revert</code>操作取消上一次的<code>revert</code>操作（即所谓&quot;负负得正&quot;）。</p> <p>操作前，<code>dev</code>分支上的提交记录和<code>test.txt</code>文件内容如下：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/36.png" alt="image-20200414153206034"></p> <p>通过：<code>git revert --no-edit f4a95</code>重做提交<code>dev2</code>（<code>--no-edit</code>表示不修改新增提交的注释）：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/37.png" alt="image-20200414153456451"></p> <p>重做后，多了一次提交，并且<code>test.txt</code>文件中删除了<code>dev2</code>这一行内容。此时，可以通过：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git revert --no-edit 582d127
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>重做上一次重做操作，以此达到取消上一次重做操作的目的：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/38.png" alt="image-20200414153724455"></p> <p>如上图所示，虽然多出了一次提交，但是<code>test.txt</code>文件中被删除的<code>dev2</code>内容被恢复了，这样就撤销了<code>revert</code>操作。</p> <h3 id="ⅲ-git-checkout"><a href="#ⅲ-git-checkout" class="header-anchor">#</a> Ⅲ.<code>git checkout</code></h3> <h4 id="_1-git-checkout-commit-id"><a href="#_1-git-checkout-commit-id" class="header-anchor">#</a> 1.<code>git checkout commit_id</code></h4> <p>使用<code>checkout</code>可以进行版本回退，如直接使用：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git checkout cb214 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>回退到提交<code>3rd</code>，此时会出现如下提示：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/39.png" alt="image-20200311111540863"></p> <p>注意到，切换后<code>HEAD</code>指向的不再是<code>master</code>分支，而是<code>cb214...</code>即第三次提交，查看历史提交记录：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/40.png" alt="image-20200311111719389"></p> <p>可看到只有<code>3</code>次提交，什么意思呢？如下图所示：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/41.png" alt="image-20200412001646768"></p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/42.png" alt="image-20200311112656834"></p> <p>通过<code>git checkout</code>让<code>HEAD</code>指针指向了第<code>3</code>次提交，可以将它想象为一个新的分支。但是却没有实际创建分支，即此时<code>head</code>指向的由提交<code>1~3</code>组成的<code>commit</code>对象链条处于游离状态；</p> <p>接着，在<code>HEAD</code>还指向游离的提交节点<code>3</code>的基础上对文件做出新的修改：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/43.png" alt="image-20200311113237150"></p> <ul><li>此时如果我们切换回<code>master</code>分支，会出现下列错误</li></ul> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/44.png" alt="image-20200311113209483"></p> <p>提示显示：如果没有保存就从游离的提交上切换到<code>master</code>分支，这一修改就会被<code>checkout</code>命令覆盖。我们可以在切换前进行一次提交操作：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/45.png" alt="image-20200311113625297"></p> <p>此时的状态为：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/46.png" alt="image-20200412002213790"></p> <ul><li>在游离的<code>Commit</code>对象链中进行了一次提交之后，再次通过：<code>git checkout master</code>切换到<code>master</code>分支：</li></ul> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/47.png" alt="image-20200311114055018"></p> <p>提示大意为：如果没有任何分支指向刚才在游离的<code>Commit</code>对象链中进行的提交，那么该提交就会被忽略。此时的状态如下图所示：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/48.png" alt="image-20200412002655921"></p> <p>如果想要创建一个分支保存（指向）这条游离的<code>Commit</code>对象链，现在就是很好的时机。根据上述提示的命令：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git branch mycommit  c4d5cc3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>创建指向<code>commit_id</code>为<code>c4d5cc3</code>的提交（即上述的提交节点<code>5</code>）的分支<code>mycommit</code>：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/49.png" alt="image-20200311115117279"></p> <p>由此游离的<code>commit</code>对象链得以被新分支所指向，并得到了保存，此时的状态如下图所示：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/50.png" alt="image-20200412004042471"></p> <blockquote><p><strong>总结：</strong></p> <ul><li><p>通过<code>checkout</code>进行版本回退会造成游离的提交对象链，需要额外创建一个分支进行保存；</p></li> <li><p>因此，使用<code>checkout</code>进行版本回退的思路为，先切换到想要回退的提交版本，再删除进行版本回退的分支<code>dev</code>。最后，创建一个新的<code>dev</code>分支指向游离的提交对象链，完成分支<code>dev</code>的版本回退，简称&quot;偷天换日&quot;；</p></li> <li><p>只要有分支指向，提交就不会被丢弃。</p></li></ul></blockquote> <h3 id="ⅳ-revert与reset的选择"><a href="#ⅳ-revert与reset的选择" class="header-anchor">#</a> Ⅳ.<code>revert</code>与<code>reset</code>的选择</h3> <p>由于<code>checkout</code>会造成游离的提交对象链，所以，一般不使用<code>checkout</code>而是使用<code>reset</code>和<code>revert</code>进行版本回退：</p> <ul><li><p><code>revert</code>通过创建一个新提交的方式来撤销某次操作，该操作之前和之后的提交记录都会被保留，并且会将该撤销操作作为最新的提交；</p></li> <li><p><code>reset</code>是通过改变<code>HEAD</code>和分支指针指向的方式，进行版本回退，该操作之后的提交记录不会被保留，并且不会创建新的提交；</p></li></ul> <p>在个人开发上，建议使用<code>reset</code>；但是在团队开发中建议使用<code>revert</code>，特别是公共的分支（比如<code>master</code>)，这样能够完整保留提交历史，方便回溯。</p> <h3 id="ⅴ-回退方法汇总"><a href="#ⅴ-回退方法汇总" class="header-anchor">#</a> Ⅴ.回退方法汇总</h3> <p>版本回退主要有<strong>三大方式</strong>：<code>reset</code>、<code>revert</code>和<code>checkout</code>，各方式的比较如下：</p> <table><thead><tr><th style="text-align:center;">方法</th> <th style="text-align:center;">效果</th> <th style="text-align:center;">向前回退</th> <th style="text-align:center;">向后回退</th> <th style="text-align:center;">同步修改<code>HEAD</code>与分支指向</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>git reset --hard HEAD^</code></td> <td style="text-align:center;">往前回退<code>1</code>次提交</td> <td style="text-align:center;">能</td> <td style="text-align:center;">否</td> <td style="text-align:center;">是</td></tr> <tr><td style="text-align:center;"><code>git reset --hard HEAD^^</code></td> <td style="text-align:center;">往前回退<code>2</code>次提交</td> <td style="text-align:center;">能</td> <td style="text-align:center;">否</td> <td style="text-align:center;">是</td></tr> <tr><td style="text-align:center;"><code>git reset --hard HEAD~n</code></td> <td style="text-align:center;">往前回退<code>n</code>次提交</td> <td style="text-align:center;">能</td> <td style="text-align:center;">否</td> <td style="text-align:center;">是</td></tr> <tr><td style="text-align:center;"><code>git reset --hard &lt;commit_id&gt;</code></td> <td style="text-align:center;">回退到指定<code>commit id</code>的提交</td> <td style="text-align:center;">能</td> <td style="text-align:center;">能</td> <td style="text-align:center;">是</td></tr> <tr><td style="text-align:center;"><code>git revert HEAD</code></td> <td style="text-align:center;">重做最新一次提交</td> <td style="text-align:center;">能</td> <td style="text-align:center;">否</td> <td style="text-align:center;">是</td></tr> <tr><td style="text-align:center;"><code>git revert HEAD^</code></td> <td style="text-align:center;">重做倒数第二次提交</td> <td style="text-align:center;">能</td> <td style="text-align:center;">否</td> <td style="text-align:center;">是</td></tr> <tr><td style="text-align:center;"><code>git revert HEAD^^</code></td> <td style="text-align:center;">重做倒数第三次提交</td> <td style="text-align:center;">能</td> <td style="text-align:center;">否</td> <td style="text-align:center;">是</td></tr> <tr><td style="text-align:center;"><code>git revert HEAD~n</code></td> <td style="text-align:center;">重做倒数第<code>n+1</code>次提交</td> <td style="text-align:center;">能</td> <td style="text-align:center;">否</td> <td style="text-align:center;">是</td></tr> <tr><td style="text-align:center;"><code>git revert commit_id</code></td> <td style="text-align:center;">重做指定<code>commit_id</code>的提交</td> <td style="text-align:center;">能</td> <td style="text-align:center;">能</td> <td style="text-align:center;">是</td></tr> <tr><td style="text-align:center;"><code>git checkout commit_id</code></td> <td style="text-align:center;">回退到指定<code>commit id</code>的提交</td> <td style="text-align:center;">能</td> <td style="text-align:center;">能</td> <td style="text-align:center;">否</td></tr></tbody></table> <p>从上表可知，只有下列三种方式可以自由地向前向后回退：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git reset --hard commit_id
git revert commit_id
git checkout commit_id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>但是，使用<code>checkout</code>进行回退会出现游离的提交，需要创建一个新分支进行保存，所以不常用。</p> <h2 id="二、git-stash"><a href="#二、git-stash" class="header-anchor">#</a> 二、<code>git stash</code></h2> <h4 id="_1-git-stash的作用"><a href="#_1-git-stash的作用" class="header-anchor">#</a> 1.<code>git stash</code>的作用</h4> <p><code>git stash</code>指令的作用为：对没有提交到版本库的，位于工作区或暂存区中游离的修改进行保存，在需要时可进行恢复。具体应用场景如下：</p> <p>在<code>master</code>分支进行两次提交：<code>1st</code>和<code>2nd</code>，随后创建并切换到<code>dev</code>分支。在<code>dev</code>分支上进行一次提交（<code>dev1</code>），此时两分支的状态为：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/51.png" alt="image-20200412235844426"></p> <p>随后在<code>dev</code>分支上给文件<code>test.txt</code>添加一行<code>dev2</code>，但是不提交到暂存区，直接切换到<code>master</code>分支，会出现如下错误：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/52.png" alt="image-20200413001632846"></p> <p>图中显示的错误大意为：在<code>dev</code>分支上的修改会被<code>checkout</code>操作覆盖。下面我们来看看，将<code>dev</code>分支上的这一修改操作添加到暂存区后，再切换分支，是否还会出现同样的问题：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/53.png" alt="image-20200413001752227"></p> <p>可见还是会出现该错误，这初步验证了位于工作区和暂存区中的修改都会被<code>checkout</code>操作覆盖的结论。原因如下图所示：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/54.png" alt="image-20200413001917190"></p> <p>虽然在<code>dev</code>分支上修改了文件，但是没有将这一修改操作进行提交。这样就不会产生提交节点，就如上图所示，修改<code>dev2</code>是游离的，在切换分支的时候会被丢弃。</p> <p>这种情况在日常开发中很常见，当在<code>develop</code>分支上开发新功能的时候，<code>master</code>分支出现紧急情况需要切换回去进行修复。但是，当前分支的新功能还没开发完全，贸然切换分支，原来开发的内容就会因被覆盖而丢失，怎么办呢？</p> <p>有人可能会说进行一次<code>commit</code>不就可以了吗？确实可以。但是，这样不符合提交的代码就是正确代码的原则。更好的解决方法为使用<code>git stash</code>，如下图所示：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/55.png" alt="image-20200413002115302"></p> <p>可见<code>git stash</code>可以将当前<code>dev</code>分支上，位于在工作区或暂存区中的修改，在未提交的情况下进行了保存；并且将分支回退到修改前的状态，保存过后，就可以很顺畅地切换回<code>master</code>分支了。</p> <blockquote><p>图中的<code>WIP</code>（<code>working in progress</code>）表示的是正在进行的工作；</p></blockquote> <p>当我们在<code>master</code>分支上完成了工作，再次切换回<code>dev</code>分支时，查看<code>test.txt</code>文件：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/56.png" alt="image-20200413002256321"></p> <p>发现切换分支前所做的修改<code>dev2</code>消失了，这是为什么呢？</p> <ul><li><p>其实，上面通过<code>git stash</code>将<code>dev</code>分支上工作区或暂存区中的修改，提交到了<code>stash</code>区域进行保存，并将<code>dev</code>分支回退到修改前的状态。如下图所示：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/57.png" alt="image-20200413003349365"></p></li> <li><p>切换到<code>master</code>分支时<code>test</code>分支上的修改依旧会被覆盖。所以，再次回到<code>dev</code>分支时需要从<code>stash</code>区域中恢复切换分支前保存的修改；</p></li></ul> <p>怎样恢复通过<code>git stash</code>保存到<code>stash</code>中的修改呢？可以通过：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git stash list
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看该分支上被<code>stash</code>保存的修改：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/58.png" alt="image-20200413224408623"></p> <p>继续给<code>test.txt</code>文件添加内容：<code>dev3</code>，并通过以下指令保存修改的同时添加注释：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git stash save '注释'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/59.png" alt="image-20200413225024618"></p> <ul><li>首先，通过上述命令可以修改<code>stash</code>中存储修改的备注信息；</li> <li>其次，虽然在<code>test</code>分支上进行了两次修改，但是使用<code>git stash</code>保存修改后，文件<code>test.txt</code>并没有实际被修改；</li></ul> <h4 id="_2-恢复stash存储的修改"><a href="#_2-恢复stash存储的修改" class="header-anchor">#</a> 2.恢复<code>stash</code>存储的修改</h4> <p>方法有很多，主要有以下三种：</p> <h5 id="git-stash-pop"><a href="#git-stash-pop" class="header-anchor">#</a> <code>git stash pop</code></h5> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/60.png" alt="image-20200413225140030"></p> <p>如图所示，通过上述命令将<code>stash</code>中存储的最新一次修改恢复了。相信你已经发现了，<code>stash</code>与<strong>栈</strong>非常类似：先保存的修改，排在最后，序号最大；后保存的修改，排在最前，序号最小；</p> <p>恢复了最新一次修改后，再次查看<code>stash</code>：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/61.png" alt="image-20200413225221071"></p> <p>可以看到存储的修改只剩下一条了，由此可推断出<code>git stash pop</code>作用为：</p> <ul><li>**第一：**恢复<code>stash</code>中存储的最新一次修改；</li> <li>**第二：**将该修改从<code>stash</code>中删除；</li></ul> <h5 id="git-stash-apply"><a href="#git-stash-apply" class="header-anchor">#</a> <code>git stash apply</code></h5> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/62.png" alt="image-20200413225457480"></p> <p>如上图所示，使用该指令时发生了合并冲突。这是因为，<code>stash</code>中保存的每一次修改代表的都是一个版本。</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/63.png" alt="image-20200413231349820"></p> <ul><li><p>如上图所示，在<code>test</code>分支上，进行第一次修改后，通过<code>git stash</code>将该修改作为修改<code>0</code>保存到<code>stash</code>中，此时分支中的文件并没有发生改变；</p></li> <li><p>进行第二次修改后，通过<code>git stash</code>将修改作为修改<code>1</code>保存到<code>stash</code>中，分支中的文件依旧没有发生改变；此时的<code>stash</code>中相当于保存着同一分支上两个修改后的版本；</p></li> <li><p>此时通过**<code>git stash pop</code><strong>取出修改<code>0</code>，与<code>test</code>分支进行合并；再通过</strong><code>git stash pop</code>**取出修改<code>1</code>，再次与<code>test</code>分支进行合并，两个版本合并自然会产生冲突。</p></li></ul> <p>手动解决冲突后，要进行一次提交才算完成了手动合并；随后查看<code>stash</code>：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/64.png" alt="image-20200413230750201"></p> <p>修改<code>0</code>仍然存在，说明**<code>git stash apply</code>**的作用为取出<code>stash</code>中最新（前面）的修改并与分支进行合并。但是，<code>stash</code>中存储的该修改并不会被删除；</p> <h5 id="git-stash-apply-stash-n"><a href="#git-stash-apply-stash-n" class="header-anchor">#</a> <code>git stash apply stash@{n}</code></h5> <p>这是最常用的方法，作用为从<code>stash</code>中恢复特定的修改，并且不删除<code>stash</code>中的该修改。</p> <p>将<code>test.txt</code>的两次修改通过<code>git stash</code>存储到<code>stash</code>中，如下图所示：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/65.png" alt="image-20200413232024080"></p> <p>通过**<code>git stash apply stash@{1}</code>**恢复<code>stash</code>中存储的修改<code>1</code>：</p> <p><img src="http://ahuntsun.gitee.io/blogimagebed/img/git/lesson4/66.png" alt="image-20200413232309330"></p> <p>如上图所示，成功地恢复了<code>stash</code>中的修改<code>1</code>，并且<code>stash</code>中的修改<code>1</code>并没有被删除；</p> <p><strong>总结：</strong></p> <ul><li><code>git stash pop</code>：恢复并删除<code>stash</code>中存储的最新修改；</li> <li><code>git stash apply</code>：恢复但不删除<code>stash</code>中存储的最新修改；</li> <li><code>git stash apply stash@{0}</code>：恢复但不删除<code>stash</code>中存储的特定提交；</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新于:</span> <span class="time">2020年6月13日星期六晚上7点32分</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/navitem/git/notes/3.html" class="prev">
        第三讲：本地分支的重要操作
      </a></span> <span class="next"><a href="/navitem/git/notes/5.html">
        第五讲：远程仓库Github与Git图形化界面
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ca5cc671.js" defer></script><script src="/assets/js/2.39079bb7.js" defer></script><script src="/assets/js/103.3b27ad94.js" defer></script>
  </body>
</html>
