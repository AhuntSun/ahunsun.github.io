# 05.Ajax简介

## 1.定义

`Ajax` 即“**A**synchronous **J**avascript **A**nd **X**ML”（异步 `JavaScript` 和 `XML`），**是一种无需重新加载整个网页的情况下，能够更新部分网页的技术。**

通过在后台与服务器进行少量数据交换，`Ajax` 可以使网页实现**异步**更新。这意味着可以在不重新加载整个网页的情况下，对网页的**某部分**进行更新。

## 2.Ajax 基本使用的四大步骤，简单易懂

**第一步，**创建`xmlhttprequest`对象，`XMLHttpRequest`对象用来和服务器交换数据。

```javascript
var xmlhttp =new XMLHttpRequest（);
```

**第二步**，使用`xmlhttprequest`对象的`open（）`和`send（）`方法发送资源请求给服务器。

```javascript
xmlhttp.open(method,url,async) 
//例如
xmlhttp.open(get, 'http://193.168.22.11:8000', true)
```

`method`包括`get` 和`post`，`url`主要是文件或资源的路径，`async`参数为`true`(代表**异步**)或者`false`（代表**同步**）

**第三步**，使用`xmlhttprequest`对象的`responseText`或`responseXML`属性获得服务器的响应。

**第四步**，`onReadyStateChange`函数，当发送请求到服务器，我们想要服务器响应执行一些功能就需要使用`onReadyStateChange`函数，每次`xmlhttprequest`对象的`readyState`发生改变都会触发`onReadyStateChange`函数。

`readyState`属性，`XMLHttpRequest`对象的状态，改变从`0`到`4`，`0`代表请求未被初始化，`1`代表服务器连接成功，`2`请求被服务器接收，`3`处理请求，`4`请求完成并且响应准备。

```javascript
/** 1. 创建连接 **/
var xhr = null;
xhr = new XMLHttpRequest()
/** 2. 连接服务器 **/
xhr.open('get', url, true)
/** 3. 发送请求 **/
xhr.send(null);
/** 4. 接受请求 **/
xhr.onreadystatechange = function(){
	if(xhr.readyState == 4){
		if(xhr.status == 200){
			success(xhr.responseText);
		} else { 
			/** false **/
			fail && fail(xhr.status);
		}
	}
}
```